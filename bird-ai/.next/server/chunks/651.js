"use strict";exports.id=651,exports.ids=[651],exports.modules={78912:(t,r,a)=>{var n,o,i=Object.create,s=Object.defineProperty,l=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,c=Object.getPrototypeOf,d=Object.prototype.hasOwnProperty,__copyProps=(t,r,a,n)=>{if(r&&"object"==typeof r||"function"==typeof r)for(let o of u(r))d.call(t,o)||o===a||s(t,o,{get:()=>r[o],enumerable:!(n=l(r,o))||n.enumerable});return t},__toESM=(t,r,a)=>(a=null!=t?i(c(t)):{},__copyProps(!r&&t&&t.__esModule?a:s(a,"default",{value:t,enumerable:!0}),t)),h={};((t,r)=>{for(var a in r)s(t,a,{get:r[a],enumerable:!0})})(h,{AllowlistIdentifier:()=>ea,AuthStatus:()=>eO,Clerk:()=>Clerk,Client:()=>eo,DeletedObject:()=>ei,Email:()=>es,EmailAddress:()=>ec,ExternalAccount:()=>ed,IdentificationLink:()=>el,Invitation:()=>eh,OauthAccessToken:()=>ep,ObjectType:()=>ef,Organization:()=>ey,OrganizationInvitation:()=>em,OrganizationMembership:()=>eg,OrganizationMembershipPublicUserData:()=>eb,PhoneNumber:()=>ev,RedirectUrl:()=>eS,SMSMessage:()=>ew,Session:()=>en,SignInToken:()=>eC,Token:()=>eA,User:()=>eB,Verification:()=>eu,buildRequestUrl:()=>buildRequestUrl,constants:()=>er,createAuthenticateRequest:()=>createAuthenticateRequest,createIsomorphicRequest:()=>createIsomorphicRequest,debugRequestState:()=>debugRequestState,decodeJwt:()=>decodeJwt,deserialize:()=>deserialize,hasValidSignature:()=>hasValidSignature,loadInterstitialFromLocal:()=>loadInterstitialFromLocal,makeAuthObjectSerializable:()=>makeAuthObjectSerializable,prunePrivateMetadata:()=>prunePrivateMetadata,redirect:()=>redirect,sanitizeAuthObject:()=>sanitizeAuthObject,signedInAuthObject:()=>signedInAuthObject,signedOutAuthObject:()=>signedOutAuthObject,verifyJwt:()=>verifyJwt,verifyToken:()=>verifyToken}),t.exports=__copyProps(s({},"__esModule",{value:!0}),h);var p=class{constructor(t){this.request=t}requireId(t){if(!t)throw Error("A valid resource ID is required.")}},y=RegExp("/{1,}","g");function joinPaths(...t){return t.filter(t=>t).join("/").replace(y,"/")}var m="/allowlist_identifiers",g=class extends p{async getAllowlistIdentifierList(){return this.request({method:"GET",path:m})}async createAllowlistIdentifier(t){return this.request({method:"POST",path:m,bodyParams:t})}async deleteAllowlistIdentifier(t){return this.requireId(t),this.request({method:"DELETE",path:joinPaths(m,t)})}},b="/clients",v=class extends p{async getClientList(){return this.request({method:"GET",path:b})}async getClient(t){return this.requireId(t),this.request({method:"GET",path:joinPaths(b,t)})}verifyClient(t){return this.request({method:"POST",path:joinPaths(b,"verify"),bodyParams:{token:t}})}},S=class extends p{async deleteDomain(t){return this.request({method:"DELETE",path:joinPaths("/domains",t)})}},C="/email_addresses",w=class extends p{async getEmailAddress(t){return this.requireId(t),this.request({method:"GET",path:joinPaths(C,t)})}async createEmailAddress(t){return this.request({method:"POST",path:C,bodyParams:t})}async updateEmailAddress(t,r={}){return this.requireId(t),this.request({method:"PATCH",path:joinPaths(C,t),bodyParams:r})}async deleteEmailAddress(t){return this.requireId(t),this.request({method:"DELETE",path:joinPaths(C,t)})}},A=class extends p{async createEmail(t){return this.request({method:"POST",path:"/emails",bodyParams:t})}},k=class extends p{async getInterstitial(){return this.request({path:"internal/interstitial",method:"GET",headerParams:{"Content-Type":"text/html"}})}},B="/invitations",P=class extends p{async getInvitationList(t={}){return this.request({method:"GET",path:B,queryParams:t})}async createInvitation(t){return this.request({method:"POST",path:B,bodyParams:t})}async revokeInvitation(t){return this.requireId(t),this.request({method:"POST",path:joinPaths(B,t,"revoke")})}},E=__toESM(a(35788)),{default:_,RuntimeAbortController:R,RuntimeBlob:T,RuntimeFormData:O,RuntimeHeaders:I,RuntimeRequest:K,RuntimeResponse:N}=__toESM(a(86935)),U=_.bind(globalThis),D={crypto:E.default,fetch:U,AbortController:R,Blob:T,FormData:O,Headers:I,Request:K,Response:N},L="/organizations",j=class extends p{async getOrganizationList(t){return this.request({method:"GET",path:L,queryParams:t})}async createOrganization(t){return this.request({method:"POST",path:L,bodyParams:t})}async getOrganization(t){let r="organizationId"in t?t.organizationId:t.slug;return this.requireId(r),this.request({method:"GET",path:joinPaths(L,r)})}async updateOrganization(t,r){return this.requireId(t),this.request({method:"PATCH",path:joinPaths(L,t),bodyParams:r})}async updateOrganizationLogo(t,r){this.requireId(t);let a=new D.FormData;return a.append("file",r?.file),a.append("uploader_user_id",r?.uploaderUserId),this.request({method:"PUT",path:joinPaths(L,t,"logo"),formData:a})}async deleteOrganizationLogo(t){return this.requireId(t),this.request({method:"DELETE",path:joinPaths(L,t,"logo")})}async updateOrganizationMetadata(t,r){return this.requireId(t),this.request({method:"PATCH",path:joinPaths(L,t,"metadata"),bodyParams:r})}async deleteOrganization(t){return this.request({method:"DELETE",path:joinPaths(L,t)})}async getOrganizationMembershipList(t){let{organizationId:r,limit:a,offset:n}=t;return this.requireId(r),this.request({method:"GET",path:joinPaths(L,r,"memberships"),queryParams:{limit:a,offset:n}})}async createOrganizationMembership(t){let{organizationId:r,userId:a,role:n}=t;return this.requireId(r),this.request({method:"POST",path:joinPaths(L,r,"memberships"),bodyParams:{userId:a,role:n}})}async updateOrganizationMembership(t){let{organizationId:r,userId:a,role:n}=t;return this.requireId(r),this.request({method:"PATCH",path:joinPaths(L,r,"memberships",a),bodyParams:{role:n}})}async updateOrganizationMembershipMetadata(t){let{organizationId:r,userId:a,publicMetadata:n,privateMetadata:o}=t;return this.request({method:"PATCH",path:joinPaths(L,r,"memberships",a,"metadata"),bodyParams:{publicMetadata:n,privateMetadata:o}})}async deleteOrganizationMembership(t){let{organizationId:r,userId:a}=t;return this.requireId(r),this.request({method:"DELETE",path:joinPaths(L,r,"memberships",a)})}async getPendingOrganizationInvitationList(t){let{organizationId:r,limit:a,offset:n}=t;return this.requireId(r),this.request({method:"GET",path:joinPaths(L,r,"invitations","pending"),queryParams:{limit:a,offset:n}})}async createOrganizationInvitation(t){let{organizationId:r,...a}=t;return this.requireId(r),this.request({method:"POST",path:joinPaths(L,r,"invitations"),bodyParams:{...a}})}async revokeOrganizationInvitation(t){let{organizationId:r,invitationId:a,requestingUserId:n}=t;return this.requireId(r),this.request({method:"POST",path:joinPaths(L,r,"invitations",a,"revoke"),bodyParams:{requestingUserId:n}})}},q="/phone_numbers",W=class extends p{async getPhoneNumber(t){return this.requireId(t),this.request({method:"GET",path:joinPaths(q,t)})}async createPhoneNumber(t){return this.request({method:"POST",path:q,bodyParams:t})}async updatePhoneNumber(t,r={}){return this.requireId(t),this.request({method:"PATCH",path:joinPaths(q,t),bodyParams:r})}async deletePhoneNumber(t){return this.requireId(t),this.request({method:"DELETE",path:joinPaths(q,t)})}},H="/redirect_urls",M=class extends p{async getRedirectUrlList(){return this.request({method:"GET",path:H})}async getRedirectUrl(t){return this.requireId(t),this.request({method:"GET",path:joinPaths(H,t)})}async createRedirectUrl(t){return this.request({method:"POST",path:H,bodyParams:t})}async deleteRedirectUrl(t){return this.requireId(t),this.request({method:"DELETE",path:joinPaths(H,t)})}},z="/sessions",V=class extends p{async getSessionList(t){return this.request({method:"GET",path:z,queryParams:t})}async getSession(t){return this.requireId(t),this.request({method:"GET",path:joinPaths(z,t)})}async revokeSession(t){return this.requireId(t),this.request({method:"POST",path:joinPaths(z,t,"revoke")})}async verifySession(t,r){return this.requireId(t),this.request({method:"POST",path:joinPaths(z,t,"verify"),bodyParams:{token:r}})}async getToken(t,r){return this.requireId(t),(await this.request({method:"POST",path:joinPaths(z,t,"tokens",r||"")})).jwt}},F="/sign_in_tokens",$=class extends p{async createSignInToken(t){return this.request({method:"POST",path:F,bodyParams:t})}async revokeSignInToken(t){return this.requireId(t),this.request({method:"POST",path:joinPaths(F,t,"revoke")})}},J=class extends p{async createSMSMessage(t){return this.request({method:"POST",path:"/sms_messages",bodyParams:t})}},G="/users",Y=class extends p{async getUserList(t={}){return this.request({method:"GET",path:G,queryParams:t})}async getUser(t){return this.requireId(t),this.request({method:"GET",path:joinPaths(G,t)})}async createUser(t){return this.request({method:"POST",path:G,bodyParams:t})}async updateUser(t,r={}){return this.requireId(t),this.request({method:"PATCH",path:joinPaths(G,t),bodyParams:r})}async updateUserProfileImage(t,r){this.requireId(t);let a=new D.FormData;return a.append("file",r?.file),this.request({method:"POST",path:joinPaths(G,t,"profile_image"),formData:a})}async updateUserMetadata(t,r){return this.requireId(t),this.request({method:"PATCH",path:joinPaths(G,t,"metadata"),bodyParams:r})}async deleteUser(t){return this.requireId(t),this.request({method:"DELETE",path:joinPaths(G,t)})}async getCount(t={}){return this.request({method:"GET",path:joinPaths(G,"count"),queryParams:t})}async getUserOauthAccessToken(t,r){return this.requireId(t),this.request({method:"GET",path:joinPaths(G,t,"oauth_access_tokens",r)})}async disableUserMFA(t){return this.requireId(t),this.request({method:"DELETE",path:joinPaths(G,t,"mfa")})}async getOrganizationMembershipList(t){let{userId:r,limit:a,offset:n}=t;return this.requireId(r),this.request({method:"GET",path:joinPaths(G,r,"organization_memberships"),queryParams:{limit:a,offset:n}})}async verifyPassword(t){let{userId:r,password:a}=t;return this.requireId(r),this.request({method:"POST",path:joinPaths(G,r,"verify_password"),bodyParams:{password:a}})}async verifyTOTP(t){let{userId:r,code:a}=t;return this.requireId(r),this.request({method:"POST",path:joinPaths(G,r,"verify_totp"),bodyParams:{code:a}})}},Q=__toESM(a(76196)),X=__toESM(a(53918)),Z="https://api.clerk.dev",ee="@clerk/backend",et={AuthStatus:"x-clerk-auth-status",AuthReason:"x-clerk-auth-reason",AuthMessage:"x-clerk-auth-message",EnableDebug:"x-clerk-debug",ClerkRedirectTo:"x-clerk-redirect-to",Authorization:"authorization",ForwardedPort:"x-forwarded-port",ForwardedProto:"x-forwarded-proto",ForwardedHost:"x-forwarded-host",Referrer:"referer",UserAgent:"user-agent",Origin:"origin",Host:"host",ContentType:"content-type"},er={Attributes:{AuthStatus:"__clerkAuthStatus",AuthReason:"__clerkAuthReason",AuthMessage:"__clerkAuthMessage"},Cookies:{Session:"__session",ClientUat:"__client_uat"},Headers:et,SearchParams:{AuthStatus:et.AuthStatus},ContentTypes:{Json:"application/json"}};function assertValidSecretKey(t){if(!t||"string"!=typeof t)throw Error("Missing Clerk Secret Key or API Key. Go to https://dashboard.clerk.com and get your key for your instance.")}var ea=class{constructor(t,r,a,n,o){this.id=t,this.identifier=r,this.createdAt=a,this.updatedAt=n,this.invitationId=o}static fromJSON(t){return new ea(t.id,t.identifier,t.created_at,t.updated_at,t.invitation_id)}},en=class{constructor(t,r,a,n,o,i,s,l,u){this.id=t,this.clientId=r,this.userId=a,this.status=n,this.lastActiveAt=o,this.expireAt=i,this.abandonAt=s,this.createdAt=l,this.updatedAt=u}static fromJSON(t){return new en(t.id,t.client_id,t.user_id,t.status,t.last_active_at,t.expire_at,t.abandon_at,t.created_at,t.updated_at)}},eo=class{constructor(t,r,a,n,o,i,s,l){this.id=t,this.sessionIds=r,this.sessions=a,this.signInId=n,this.signUpId=o,this.lastActiveSessionId=i,this.createdAt=s,this.updatedAt=l}static fromJSON(t){return new eo(t.id,t.session_ids,t.sessions.map(t=>en.fromJSON(t)),t.sign_in_id,t.sign_up_id,t.last_active_session_id,t.created_at,t.updated_at)}},ei=class{constructor(t,r,a,n){this.object=t,this.id=r,this.slug=a,this.deleted=n}static fromJSON(t){return new ei(t.object,t.id||null,t.slug||null,t.deleted)}},es=class{constructor(t,r,a,n,o,i,s,l,u,c,d){this.id=t,this.fromEmailName=r,this.emailAddressId=a,this.toEmailAddress=n,this.subject=o,this.body=i,this.bodyPlain=s,this.status=l,this.slug=u,this.data=c,this.deliveredByClerk=d}static fromJSON(t){return new es(t.id,t.from_email_name,t.email_address_id,t.to_email_address,t.subject,t.body,t.body_plain,t.status,t.slug,t.data,t.delivered_by_clerk)}},el=class{constructor(t,r){this.id=t,this.type=r}static fromJSON(t){return new el(t.id,t.type)}},eu=class{constructor(t,r,a=null,n=null,o=null,i=null){this.status=t,this.strategy=r,this.externalVerificationRedirectURL=a,this.attempts=n,this.expireAt=o,this.nonce=i}static fromJSON(t){return new eu(t.status,t.strategy,t.external_verification_redirect_url?new URL(t.external_verification_redirect_url):null,t.attempts,t.expire_at,t.nonce)}},ec=class{constructor(t,r,a,n){this.id=t,this.emailAddress=r,this.verification=a,this.linkedTo=n}static fromJSON(t){return new ec(t.id,t.email_address,t.verification&&eu.fromJSON(t.verification),t.linked_to.map(t=>el.fromJSON(t)))}},ed=class{constructor(t,r,a,n,o,i,s,l,u,c,d,h={},p,y){this.id=t,this.provider=r,this.identificationId=a,this.externalId=n,this.approvedScopes=o,this.emailAddress=i,this.firstName=s,this.lastName=l,this.picture=u,this.imageUrl=c,this.username=d,this.publicMetadata=h,this.label=p,this.verification=y}static fromJSON(t){return new ed(t.id,t.provider,t.identification_id,t.provider_user_id,t.approved_scopes,t.email_address,t.first_name,t.last_name,t.avatar_url,t.image_url,t.username,t.public_metadata,t.label,t.verification&&eu.fromJSON(t.verification))}},eh=class{constructor(t,r,a,n,o,i,s){this.id=t,this.emailAddress=r,this.publicMetadata=a,this.createdAt=n,this.updatedAt=o,this.status=i,this.revoked=s}static fromJSON(t){return new eh(t.id,t.email_address,t.public_metadata,t.created_at,t.updated_at,t.status,t.revoked)}},ef=((n=ef||{}).AllowlistIdentifier="allowlist_identifier",n.Client="client",n.Email="email",n.EmailAddress="email_address",n.ExternalAccount="external_account",n.FacebookAccount="facebook_account",n.GoogleAccount="google_account",n.Invitation="invitation",n.OauthAccessToken="oauth_access_token",n.Organization="organization",n.OrganizationInvitation="organization_invitation",n.OrganizationMembership="organization_membership",n.PhoneNumber="phone_number",n.RedirectUrl="redirect_url",n.Session="session",n.SignInAttempt="sign_in_attempt",n.SignInToken="sign_in_token",n.SignUpAttempt="sign_up_attempt",n.SmsMessage="sms_message",n.User="user",n.Web3Wallet="web3_wallet",n.Token="token",n.TotalCount="total_count",n),ep=class{constructor(t,r,a={},n,o,i){this.provider=t,this.token=r,this.publicMetadata=a,this.label=n,this.scopes=o,this.tokenSecret=i}static fromJSON(t){return new ep(t.provider,t.token,t.public_metadata,t.label,t.scopes,t.token_secret)}},ey=class{constructor(t,r,a,n,o,i,s,l,u,c={},d={},h,p){this.id=t,this.name=r,this.slug=a,this.logoUrl=n,this.imageUrl=o,this.hasImage=i,this.createdBy=s,this.createdAt=l,this.updatedAt=u,this.publicMetadata=c,this.privateMetadata=d,this.maxAllowedMemberships=h,this.adminDeleteEnabled=p}static fromJSON(t){return new ey(t.id,t.name,t.slug,t.logo_url,t.image_url,t.has_image,t.created_by,t.created_at,t.updated_at,t.public_metadata,t.private_metadata,t.max_allowed_memberships,t.admin_delete_enabled)}},em=class{constructor(t,r,a,n,o,i,s,l={},u={}){this.id=t,this.emailAddress=r,this.role=a,this.organizationId=n,this.createdAt=o,this.updatedAt=i,this.status=s,this.publicMetadata=l,this.privateMetadata=u}static fromJSON(t){return new em(t.id,t.email_address,t.role,t.organization_id,t.created_at,t.updated_at,t.status,t.public_metadata,t.private_metadata)}},eg=class{constructor(t,r,a={},n={},o,i,s,l){this.id=t,this.role=r,this.publicMetadata=a,this.privateMetadata=n,this.createdAt=o,this.updatedAt=i,this.organization=s,this.publicUserData=l}static fromJSON(t){return new eg(t.id,t.role,t.public_metadata,t.private_metadata,t.created_at,t.updated_at,ey.fromJSON(t.organization),eb.fromJSON(t.public_user_data))}},eb=class{constructor(t,r,a,n,o,i,s){this.identifier=t,this.firstName=r,this.lastName=a,this.profileImageUrl=n,this.imageUrl=o,this.hasImage=i,this.userId=s}static fromJSON(t){return new eb(t.identifier,t.first_name,t.last_name,t.profile_image_url,t.image_url,t.has_image,t.user_id)}},ev=class{constructor(t,r,a,n,o,i){this.id=t,this.phoneNumber=r,this.reservedForSecondFactor=a,this.defaultSecondFactor=n,this.verification=o,this.linkedTo=i}static fromJSON(t){return new ev(t.id,t.phone_number,t.reserved_for_second_factor,t.default_second_factor,t.verification&&eu.fromJSON(t.verification),t.linked_to.map(t=>el.fromJSON(t)))}},eS=class{constructor(t,r,a,n){this.id=t,this.url=r,this.createdAt=a,this.updatedAt=n}static fromJSON(t){return new eS(t.id,t.url,t.created_at,t.updated_at)}},eC=class{constructor(t,r,a,n,o,i,s){this.id=t,this.userId=r,this.token=a,this.status=n,this.url=o,this.createdAt=i,this.updatedAt=s}static fromJSON(t){return new eC(t.id,t.user_id,t.token,t.status,t.url,t.created_at,t.updated_at)}},ew=class{constructor(t,r,a,n,o,i,s){this.id=t,this.fromPhoneNumber=r,this.toPhoneNumber=a,this.message=n,this.status=o,this.phoneNumberId=i,this.data=s}static fromJSON(t){return new ew(t.id,t.from_phone_number,t.to_phone_number,t.message,t.status,t.phone_number_id,t.data)}},eA=class{constructor(t){this.jwt=t}static fromJSON(t){return new eA(t.jwt)}},ek=class{constructor(t,r,a){this.id=t,this.web3Wallet=r,this.verification=a}static fromJSON(t){return new ek(t.id,t.web3_wallet,t.verification&&eu.fromJSON(t.verification))}},eB=class{constructor(t,r,a,n,o,i,s,l,u,c,d,h,p,y,m,g,b,v,S,C,w,A={},k={},B={},P=[],E=[],_=[],R=[]){this.id=t,this.passwordEnabled=r,this.totpEnabled=a,this.backupCodeEnabled=n,this.twoFactorEnabled=o,this.banned=i,this.createdAt=s,this.updatedAt=l,this.profileImageUrl=u,this.imageUrl=c,this.hasImage=d,this.gender=h,this.birthday=p,this.primaryEmailAddressId=y,this.primaryPhoneNumberId=m,this.primaryWeb3WalletId=g,this.lastSignInAt=b,this.externalId=v,this.username=S,this.firstName=C,this.lastName=w,this.publicMetadata=A,this.privateMetadata=k,this.unsafeMetadata=B,this.emailAddresses=P,this.phoneNumbers=E,this.web3Wallets=_,this.externalAccounts=R}static fromJSON(t){return new eB(t.id,t.password_enabled,t.totp_enabled,t.backup_code_enabled,t.two_factor_enabled,t.banned,t.created_at,t.updated_at,t.profile_image_url,t.image_url,t.has_image,t.gender,t.birthday,t.primary_email_address_id,t.primary_phone_number_id,t.primary_web3_wallet_id,t.last_sign_in_at,t.external_id,t.username,t.first_name,t.last_name,t.public_metadata,t.private_metadata,t.unsafe_metadata,(t.email_addresses||[]).map(t=>ec.fromJSON(t)),(t.phone_numbers||[]).map(t=>ev.fromJSON(t)),(t.web3_wallets||[]).map(t=>ek.fromJSON(t)),(t.external_accounts||[]).map(t=>ed.fromJSON(t)))}};function deserialize(t){return Array.isArray(t)?t.map(t=>jsonToObject(t)):Array.isArray(t.data)&&void 0!==t.data?t.data.map(t=>jsonToObject(t)):jsonToObject(t)}function jsonToObject(t){if("string"!=typeof t&&"object"in t&&"deleted"in t)return ei.fromJSON(t);switch(t.object){case"allowlist_identifier":return ea.fromJSON(t);case"client":return eo.fromJSON(t);case"email_address":return ec.fromJSON(t);case"email":return es.fromJSON(t);case"invitation":return eh.fromJSON(t);case"oauth_access_token":return ep.fromJSON(t);case"organization":return ey.fromJSON(t);case"organization_invitation":return em.fromJSON(t);case"organization_membership":return eg.fromJSON(t);case"phone_number":return ev.fromJSON(t);case"redirect_url":return eS.fromJSON(t);case"sign_in_token":return eC.fromJSON(t);case"session":return en.fromJSON(t);case"sms_message":return ew.fromJSON(t);case"token":return eA.fromJSON(t);case"total_count":return t.total_count;case"user":return eB.fromJSON(t);default:return t}}var withLegacyReturn=t=>async(...r)=>{let{data:a,errors:n,status:o,statusText:i}=await t(...r);if(null===n)return a;throw new eP(i||"",{data:n,status:o||""})};function parseError(t){return{code:t.code,message:t.message,longMessage:t.long_message,meta:{paramName:t?.meta?.param_name,sessionId:t?.meta?.session_id}}}var eP=class extends Error{constructor(t,{data:r,status:a}){super(t),Object.setPrototypeOf(this,eP.prototype),this.clerkError=!0,this.message=t,this.status=a,this.errors=r}};function createBackendApiClient(t){let r=function(t){let request=async r=>{let a;let{apiKey:n,secretKey:o,apiUrl:i=Z,apiVersion:s="v1",userAgent:l=ee,httpOptions:u={}}=t,{path:c,method:d,queryParams:h,headerParams:p,bodyParams:y,formData:m}=r,g=o||n;assertValidSecretKey(g);let b=joinPaths(i,s,c),v=new URL(b);if(h){let t=(0,X.default)({...h});for(let[r,a]of Object.entries(t))a&&[a].flat().forEach(t=>v.searchParams.append(r,t))}let S={Authorization:`Bearer ${g}`,"Clerk-Backend-SDK":l,...p};try{if(m)a=await D.fetch(v.href,{...u,method:d,headers:S,body:m});else{S["Content-Type"]="application/json";let t="GET"!==d&&y&&Object.keys(y).length>0,r=t?{body:JSON.stringify((0,X.default)(y,{deep:!1}))}:null;a=await D.fetch(v.href,(0,Q.default)(u,{method:d,headers:S,...r}))}let t=a?.headers&&a.headers?.get(er.Headers.ContentType)===er.ContentTypes.Json,r=await (t?a.json():a.text());if(!a.ok)throw r;return{data:deserialize(r),errors:null}}catch(t){if(t instanceof Error)return{data:null,errors:[{code:"unexpected_error",message:t.message||"Unexpected error"}]};return{data:null,errors:function(t){if(t&&"object"==typeof t&&"errors"in t){let r=t.errors;return r.length>0?r.map(parseError):[]}return[]}(t),status:a?.status,statusText:a?.statusText}}};return withLegacyReturn(request)}(t);return{allowlistIdentifiers:new g(r),clients:new v(r),emailAddresses:new w(r),emails:new A(r),interstitial:new k(r),invitations:new P(r),organizations:new j(r),phoneNumbers:new W(r),redirectUrls:new M(r),sessions:new V(r),signInTokens:new $(r),smsMessages:new J(r),users:new Y(r),domains:new S(r)}}var createDebug=t=>()=>{let r={...t};return r.apiKey=(r.apiKey||"").substring(0,7),r.secretKey=(r.secretKey||"").substring(0,7),r.jwtKey=(r.jwtKey||"").substring(0,7),{...r}};function signedInAuthObject(t,r,a){let{act:n,sid:o,org_id:i,org_role:s,org_slug:l,sub:u}=t,{apiKey:c,secretKey:d,apiUrl:h,apiVersion:p,token:y,session:m,user:g,organization:b}=r,{sessions:v}=createBackendApiClient({apiKey:c,secretKey:d,apiUrl:h,apiVersion:p}),S=createGetToken({sessionId:o,sessionToken:y,fetcher:(...t)=>v.getToken(...t)});return{actor:n,sessionClaims:t,sessionId:o,session:m,userId:u,user:g,orgId:i,orgRole:s,orgSlug:l,organization:b,getToken:S,debug:createDebug({...r,...a})}}function signedOutAuthObject(t){return{sessionClaims:null,sessionId:null,session:null,userId:null,user:null,actor:null,orgId:null,orgRole:null,orgSlug:null,organization:null,getToken:()=>Promise.resolve(null),debug:createDebug(t)}}function prunePrivateMetadata(t){return t&&(delete t.privateMetadata,delete t.private_metadata),t}function sanitizeAuthObject(t){let r=t.user?{...t.user}:t.user,a=t.organization?{...t.organization}:t.organization;return prunePrivateMetadata(r),prunePrivateMetadata(a),{...t,user:r,organization:a}}var makeAuthObjectSerializable=t=>{let{debug:r,getToken:a,...n}=t;return n},createGetToken=t=>{let{fetcher:r,sessionToken:a,sessionId:n}=t||{};return async(t={})=>n?t.template?r(n,t.template):a:null};async function callWithRetry(t,r=1,a=5){try{return await t()}catch(o){var n;if(r>=a)throw o;return await (n=2**r*100,new Promise(t=>setTimeout(t,n))),callWithRetry(t,r+1)}}function isDevelopmentFromApiKey(t){return t.startsWith("test_")||t.startsWith("sk_test_")}var{isDevOrStagingUrl:eE}=function(){let t=[".lcl.dev",".stg.dev",".lclstage.dev",".stgstage.dev",".dev.lclclerk.com",".stg.lclclerk.com",".accounts.lclclerk.com","accountsstage.dev","accounts.dev"],r=new Map;return{isDevOrStagingUrl:a=>{if(!a)return!1;let n="string"==typeof a?a:a.hostname,o=r.get(n);return void 0===o&&(o=t.some(t=>n.endsWith(t)),r.set(n,o)),o}}}(),e_="pk_live_";function parsePublishableKey(t){if(!function(t){t=t||"";let r=t.startsWith(e_)||t.startsWith("pk_test_"),a=isomorphicAtob(t.split("_")[2]||"").endsWith("$");return r&&a}(t=t||""))return null;let r=t.startsWith(e_)?"production":"development",a=isomorphicAtob(t.split("_")[2]);return a.endsWith("$")?{instanceType:r,frontendApi:a=a.slice(0,-1)}:null}var isomorphicAtob=t=>"undefined"!=typeof atob&&"function"==typeof atob?atob(t):"undefined"!=typeof globalThis&&globalThis.Buffer?new globalThis.Buffer(t,"base64").toString():t,eR=class extends Error{constructor({action:t,message:r,reason:a}){super(r),Object.setPrototypeOf(this,eR.prototype),this.reason=a,this.message=r,this.action=t}getFullMessage(){return`${[this.message,this.action].filter(t=>t).join(" ")} (reason=${this.reason}, token-carrier=${this.tokenCarrier})`}};function loadInterstitialFromLocal(t){t.frontendApi=parsePublishableKey(t.publishableKey)?.frontendApi||t.frontendApi||"";let r=eE(t.frontendApi)?"":function(t){let r;if(!t)return"";if(t.match(/^(clerk\.)+\w*$/))r=/(clerk\.)*(?=clerk\.)/;else{if(t.match(/\.clerk.accounts/))return t;r=/^(clerk\.)*/gi}let a=t.replace(r,"");return`clerk.${a}`}(t.domain),{debugData:a,frontendApi:n,pkgVersion:o,clerkJSUrl:i,clerkJSVersion:s,publishableKey:l,proxyUrl:u,isSatellite:c=!1,domain:d,signInUrl:h}=t;return`
    <head>
        <meta charset="UTF-8" />
    </head>
    <body>
        <script>
            window.__clerk_frontend_api = '${n}';
            window.__clerk_debug = ${JSON.stringify(a||{})};
            ${u?`window.__clerk_proxy_url = '${u}'`:""}
            ${d?`window.__clerk_domain = '${d}'`:""}
            window.startClerk = async () => {
                function formRedirect(){
                    const form = '<form method="get" action="" name="redirect"></form>';
                    document.body.innerHTML = document.body.innerHTML + form;

                    const searchParams = new URLSearchParams(window.location.search);
                    for (let paramTuple of searchParams) {
                        const input = document.createElement("input");
                        input.type = "hidden";
                        input.name = paramTuple[0];
                        input.value = paramTuple[1];
                        document.forms.redirect.appendChild(input);
                    }
                    const url = new URL(window.location.origin + window.location.pathname + window.location.hash);
                    window.history.pushState({}, '', url);

                    document.forms.redirect.action = window.location.pathname + window.location.hash;
                    document.forms.redirect.submit();
                }

                const Clerk = window.Clerk;
                try {
                    await Clerk.load({
                        isSatellite: ${c},
                        isInterstitial: true,
                        signInUrl: ${h?`'${h}'`:void 0}
                    });
                    if(Clerk.loaded){
                      if(window.location.href.indexOf("#") === -1){
                        window.location.href = window.location.href;
                      } else if (window.navigator.userAgent.toLowerCase().includes("firefox/")){
                          formRedirect();
                      } else {
                          window.location.reload();
                      }
                    }
                } catch (err) {
                    console.error('Clerk: ', err);
                }
            };
            (() => {
                const script = document.createElement('script');
                ${l?`script.setAttribute('data-clerk-publishable-key', '${l}');`:`script.setAttribute('data-clerk-frontend-api', '${n}');`}

                ${d?`script.setAttribute('data-clerk-domain', '${d}');`:""}
                ${u?`script.setAttribute('data-clerk-proxy-url', '${u}')`:""};
                script.async = true;
                script.src = '${i||getScriptUrl(u||r||n,{pkgVersion:o,clerkJSVersion:s})}';
                script.crossOrigin = 'anonymous';
                script.addEventListener('load', startClerk);
                document.body.appendChild(script);
            })();
        </script>
    </body>
`}async function loadInterstitialFromBAPI(t){t.frontendApi=parsePublishableKey(t.publishableKey)?.frontendApi||t.frontendApi||"";let r=buildPublicInterstitialUrl(t),a=await callWithRetry(()=>D.fetch(buildPublicInterstitialUrl(t),{method:"GET",headers:{"Clerk-Backend-SDK":t.userAgent||ee}}));if(!a.ok)throw new eR({action:"Contact support@clerk.com",message:`Error loading Clerk Interstitial from ${r} with code=${a.status}`,reason:"interstitial-remote-failed-to-load"});return a.text()}function buildPublicInterstitialUrl(t){t.frontendApi=parsePublishableKey(t.publishableKey)?.frontendApi||t.frontendApi||"";let{apiUrl:r,frontendApi:a,pkgVersion:n,clerkJSVersion:o,publishableKey:i,proxyUrl:s,isSatellite:l,domain:u,signInUrl:c}=t,d=new URL(r);return d.pathname=joinPaths(d.pathname,"v1","/public/interstitial"),d.searchParams.append("clerk_js_version",o||getClerkJsMajorVersionOrTag(a,n)),i?d.searchParams.append("publishable_key",i):d.searchParams.append("frontend_api",a),s&&d.searchParams.append("proxy_url",s),l&&d.searchParams.append("is_satellite","true"),d.searchParams.append("sign_in_url",c||""),eE(t.frontendApi)||d.searchParams.append("use_domain_for_script","true"),u&&d.searchParams.append("domain",u),d.href}var getClerkJsMajorVersionOrTag=(t,r)=>!r&&function(t){return t.endsWith(".lclstage.dev")||t.endsWith(".stgstage.dev")||t.endsWith(".clerkstage.dev")||t.endsWith(".accountsstage.dev")}(t)?"staging":r?r.includes("next")?"next":r.split(".")[0]||"latest":"latest",getScriptUrl=(t,{pkgVersion:r,clerkJSVersion:a})=>{let n=t.replace(/http(s)?:\/\//,""),o=getClerkJsMajorVersionOrTag(t,r);return`https://${n}/npm/@clerk/clerk-js@${a||o}/dist/clerk.browser.js`},eT=a(50002),createIsomorphicRequest=t=>t(D.Request,D.Headers),buildRequest2=t=>{if(!t)return{};let r=parseIsomorphicRequestCookies(t),a=getHeaderFromIsomorphicRequest(t),n=getSearchParamsFromIsomorphicRequest(t);return{cookies:r,headers:a,searchParams:n}},decode=t=>t?t.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent):t,parseIsomorphicRequestCookies=t=>{let r=t.headers&&t.headers?.get("cookie")?(0,eT.parse)(t.headers.get("cookie")):{};return t=>{let a=r?.[t];if(void 0!==a)return decode(a)}},getHeaderFromIsomorphicRequest=t=>r=>t?.headers?.get(r)||void 0,getSearchParamsFromIsomorphicRequest=t=>t?.url?new URL(t.url)?.searchParams:void 0,stripAuthorizationHeader=t=>t?.replace("Bearer ",""),eO=((o=eO||{}).SignedIn="signed-in",o.SignedOut="signed-out",o.Interstitial="interstitial",o.Unknown="unknown",o);async function signedIn(t,r){let{apiKey:a,secretKey:n,apiUrl:o,apiVersion:i,cookieToken:s,frontendApi:l,proxyUrl:u,publishableKey:c,domain:d,isSatellite:h,headerToken:p,loadSession:y,loadUser:m,loadOrganization:g,signInUrl:b,signUpUrl:v,afterSignInUrl:S,afterSignUpUrl:C}=t,{sid:w,org_id:A,sub:k}=r,{sessions:B,users:P,organizations:E}=createBackendApiClient({apiKey:a,secretKey:n,apiUrl:o,apiVersion:i}),[_,R,T]=await Promise.all([y?B.getSession(w):Promise.resolve(void 0),m?P.getUser(k):Promise.resolve(void 0),g&&A?E.getOrganization({organizationId:A}):Promise.resolve(void 0)]),O=signedInAuthObject(r,{secretKey:n,apiKey:a,apiUrl:o,apiVersion:i,token:s||p||"",session:_,user:R,organization:T},{...t,status:"signed-in"});return{status:"signed-in",reason:null,message:null,frontendApi:l,proxyUrl:u,publishableKey:c,domain:d,isSatellite:h,signInUrl:b,signUpUrl:v,afterSignInUrl:S,afterSignUpUrl:C,isSignedIn:!0,isInterstitial:!1,isUnknown:!1,toAuth:()=>O}}function signedOut(t,r,a=""){let{frontendApi:n,publishableKey:o,proxyUrl:i,isSatellite:s,domain:l,signInUrl:u,signUpUrl:c,afterSignInUrl:d,afterSignUpUrl:h}=t;return{status:"signed-out",reason:r,message:a,frontendApi:n,proxyUrl:i,publishableKey:o,isSatellite:s,domain:l,signInUrl:u,signUpUrl:c,afterSignInUrl:d,afterSignUpUrl:h,isSignedIn:!1,isInterstitial:!1,isUnknown:!1,toAuth:()=>signedOutAuthObject({...t,status:"signed-out",reason:r,message:a})}}function interstitial(t,r,a=""){let{frontendApi:n,publishableKey:o,proxyUrl:i,isSatellite:s,domain:l,signInUrl:u,signUpUrl:c,afterSignInUrl:d,afterSignUpUrl:h}=t;return{status:"interstitial",reason:r,message:a,frontendApi:n,publishableKey:o,isSatellite:s,domain:l,proxyUrl:i,signInUrl:u,signUpUrl:c,afterSignInUrl:d,afterSignUpUrl:h,isSignedIn:!1,isInterstitial:!0,isUnknown:!1,toAuth:()=>null}}var getHeader=(t,r)=>t.headers.get(r),getFirstValueFromHeader=t=>t?.split(",")[0],buildRequestUrl=(t,r)=>{let a=new URL(t.url),n=getHeader(t,er.Headers.ForwardedProto),o=getHeader(t,er.Headers.ForwardedHost),i=getHeader(t,er.Headers.Host),s=a.protocol,l=buildOrigin({protocol:s,forwardedProto:n,forwardedHost:o,host:i||a.host});return new URL(r||a.pathname,l)},buildOrigin=({protocol:t,forwardedProto:r,forwardedHost:a,host:n})=>{let o=getFirstValueFromHeader(a)??n,i=getFirstValueFromHeader(r)??t?.replace(/[:/]/,"");return o&&i?`${i}://${o}`:""};function checkCrossOrigin({originURL:t,host:r,forwardedHost:a,forwardedProto:n}){let o=buildOrigin({forwardedProto:n,forwardedHost:a,protocol:t.protocol,host:r});return o&&new URL(o).origin!==t.origin}var getErrorObjectByCode=(t,r)=>t?t.find(t=>t.code===r):null,ex={parse:(t,r)=>(function(t,r,a={}){if(!r.codes){r.codes={};for(let t=0;t<r.chars.length;++t)r.codes[r.chars[t]]=t}if(!a.loose&&t.length*r.bits&7)throw SyntaxError("Invalid padding");let n=t.length;for(;"="===t[n-1];)if(--n,!a.loose&&!((t.length-n)*r.bits&7))throw SyntaxError("Invalid padding");let o=new(a.out??Uint8Array)(n*r.bits/8|0),i=0,s=0,l=0;for(let a=0;a<n;++a){let n=r.codes[t[a]];if(void 0===n)throw SyntaxError("Invalid character "+t[a]);s=s<<r.bits|n,(i+=r.bits)>=8&&(i-=8,o[l++]=255&s>>i)}if(i>=r.bits||255&s<<8-i)throw SyntaxError("Unexpected end of data");return o})(t,eI,r),stringify:(t,r)=>(function(t,r,a={}){let{pad:n=!0}=a,o=(1<<r.bits)-1,i="",s=0,l=0;for(let a=0;a<t.length;++a)for(l=l<<8|255&t[a],s+=8;s>r.bits;)s-=r.bits,i+=r.chars[o&l>>s];if(s&&(i+=r.chars[o&l<<r.bits-s]),n)for(;i.length*r.bits&7;)i+="=";return i})(t,eI,r)},eI={chars:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bits:6},isArrayString=t=>Array.isArray(t)&&t.length>0&&t.every(t=>"string"==typeof t),assertAudienceClaim=(t,r)=>{let a=[r].flat().filter(t=>!!t),n=[t].flat().filter(t=>!!t),o=a.length>0&&n.length>0;if(o){if("string"==typeof t){if(!a.includes(t))throw new eR({action:"Make sure that this is a valid Clerk generate JWT.",reason:"token-verification-failed",message:`Invalid JWT audience claim (aud) ${JSON.stringify(t)}. Is not included in "${JSON.stringify(a)}".`})}else if(isArrayString(t)&&!t.some(t=>a.includes(t)))throw new eR({action:"Make sure that this is a valid Clerk generate JWT.",reason:"token-verification-failed",message:`Invalid JWT audience claim array (aud) ${JSON.stringify(t)}. Is not included in "${JSON.stringify(a)}".`})}},eK={RS256:"SHA-256",RS384:"SHA-384",RS512:"SHA-512",ES256:"SHA-256",ES384:"SHA-384",ES512:"SHA-512"},eN="RSASSA-PKCS1-v1_5",eU="ECDSA",eD={RS256:eN,RS384:eN,RS512:eN,ES256:eU,ES384:eU,ES512:eU},eL=Object.keys(eK);async function hasValidSignature(t,r){let{header:a,signature:n,raw:o}=t,i=new TextEncoder,s=i.encode([o.header,o.payload].join(".")),l=await D.crypto.subtle.importKey("jwk",r,{name:eD[a.alg],hash:eK[a.alg]},!1,["verify"]);return D.crypto.subtle.verify("RSASSA-PKCS1-v1_5",l,n,s)}function decodeJwt(t){let r=(t||"").toString().split(".");if(3!==r.length)throw new eR({reason:"token-invalid",message:"Invalid JWT form. A JWT consists of three parts separated by dots."});let[a,n,o]=r,i=new TextDecoder,s=JSON.parse(i.decode(ex.parse(a,{loose:!0}))),l=JSON.parse(i.decode(ex.parse(n,{loose:!0}))),u=ex.parse(o,{loose:!0});return{header:s,payload:l,signature:u,raw:{header:a,payload:n,signature:o,text:t}}}async function verifyJwt(t,{audience:r,authorizedParties:a,clockSkewInSeconds:n,clockSkewInMs:o,issuer:i,key:s}){let l;let u=o||n||5e3,c=decodeJwt(t),{header:d,payload:h}=c,{typ:p,alg:y}=d;if(void 0!==p&&"JWT"!==p)throw new eR({action:"Make sure that this is a valid Clerk generate JWT.",reason:"token-invalid",message:`Invalid JWT type ${JSON.stringify(p)}. Expected "JWT".`});if(!eK[y])throw new eR({action:"Make sure that this is a valid Clerk generate JWT.",reason:"token-invalid-algorithm",message:`Invalid JWT algorithm ${JSON.stringify(y)}. Supported: ${eL}.`});let{azp:m,sub:g,aud:b,iss:v,iat:S,exp:C,nbf:w}=h;if("string"!=typeof g)throw new eR({action:"Make sure that this is a valid Clerk generate JWT.",reason:"token-verification-failed",message:`Subject claim (sub) is required and must be a string. Received ${JSON.stringify(g)}.`});if(assertAudienceClaim([b],[r]),m&&a&&a.length>0&&!a.includes(m))throw new eR({reason:"token-invalid-authorized-parties",message:`Invalid JWT Authorized party claim (azp) ${JSON.stringify(m)}. Expected "${a}".`});if("function"!=typeof i||i(v)){if("string"==typeof i&&v&&v!==i)throw new eR({reason:"token-invalid-issuer",message:`Invalid JWT issuer claim (iss) ${JSON.stringify(c.payload.iss)}. Expected "${i}".`})}else throw new eR({reason:"token-invalid-issuer",message:"Failed JWT issuer resolver. Make sure that the resolver returns a truthy value."});if("number"!=typeof C)throw new eR({action:"Make sure that this is a valid Clerk generate JWT.",reason:"token-verification-failed",message:`Invalid JWT expiry date claim (exp) ${JSON.stringify(C)}. Expected number.`});let A=new Date(Date.now()),k=new Date(0);k.setUTCSeconds(C);let B=k.getTime()<=A.getTime()-u;if(B)throw new eR({reason:"token-expired",message:`JWT is expired. Expiry date: ${k}, Current date: ${A}.`});if(void 0!==w){if("number"!=typeof w)throw new eR({action:"Make sure that this is a valid Clerk generate JWT.",reason:"token-verification-failed",message:`Invalid JWT not before date claim (nbf) ${JSON.stringify(w)}. Expected number.`});let t=new Date(0);t.setUTCSeconds(w);let r=t.getTime()>A.getTime()+u;if(r)throw new eR({action:"Make sure your system clock is in sync (e.g. turn off and on automatic time synchronization).",reason:"token-not-active-yet",message:`JWT cannot be used prior to not before date claim (nbf). Not before date: ${t}; Current date: ${A};`})}if(void 0!==S){if("number"!=typeof S)throw new eR({action:"Make sure that this is a valid Clerk generate JWT.",reason:"token-verification-failed",message:`Invalid JWT issued at date claim (iat) ${JSON.stringify(S)}. Expected number.`});let t=new Date(0);t.setUTCSeconds(S);let r=t.getTime()>A.getTime()+u;if(r)throw new eR({reason:"token-not-active-yet",message:`JWT issued at date claim (iat) is in the future. Issued at date: ${t}; Current date: ${A};`})}try{l=await hasValidSignature(c,s)}catch(t){throw new eR({action:"Make sure that this is a valid Clerk generate JWT.",reason:"token-verification-failed",message:`Error verifying JWT signature. ${t}`})}if(!l)throw new eR({reason:"token-invalid-signature",message:"JWT signature is invalid."});return h}var ej={},eq=0;function setInCache(t,r=36e5){ej[t.kid]=t,eq=Date.now(),r>=0&&setTimeout(()=>{t?delete ej[t.kid]:ej={}},r)}var eW="local";async function loadClerkJWKFromRemote({apiKey:t,secretKey:r,apiUrl:a=Z,apiVersion:n="v1",issuer:o,kid:i,jwksCacheTtlInMs:s=36e5,skipJwksCache:l}){let u=!ej[i]&&Date.now()-eq>=3e5;if(l||u){let i;let l=r||t;if(l)i=()=>fetchJWKSFromBAPI(a,l,n);else if(o)i=()=>fetchJWKSFromFAPI(o);else throw new eR({action:"Contact support@clerk.com",message:"Failed to load JWKS from Clerk Backend or Frontend API.",reason:"jwk-remote-failed-to-load"});let{keys:u}=await callWithRetry(i);if(!u||!u.length)throw new eR({action:"Contact support@clerk.com",message:"The JWKS endpoint did not contain any signing keys. Contact support@clerk.com.",reason:"jwk-remote-failed-to-load"});u.forEach(t=>setInCache(t,s))}let c=ej[i];if(!c)throw new eR({action:"Contact support@clerk.com",message:`Unable to find a signing key in JWKS that matches the kid='${i}' of the provided session token. Please make sure that the __session cookie or the HTTP authorization header contain a Clerk-generated session JWT.`,reason:"jwk-remote-missing"});return c}async function fetchJWKSFromFAPI(t){let r=new URL(t);r.pathname=joinPaths(r.pathname,".well-known/jwks.json");let a=await D.fetch(r.href);if(!a.ok)throw new eR({action:"Contact support@clerk.com",message:`Error loading Clerk JWKS from ${r.href} with code=${a.status}`,reason:"jwk-remote-failed-to-load"});return a.json()}async function fetchJWKSFromBAPI(t,r,a){if(!r)throw new eR({action:"Set the CLERK_SECRET_KEY or CLERK_API_KEY environment variable.",message:"Missing Clerk Secret Key or API Key. Go to https://dashboard.clerk.com and get your key for your instance.",reason:"jwk-remote-failed-to-load"});let n=new URL(t);n.pathname=joinPaths(n.pathname,a,"/jwks");let o=await D.fetch(n.href,{headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}});if(!o.ok){let t=await o.json(),r=getErrorObjectByCode(t?.errors,"clerk_key_invalid");if(r)throw new eR({action:"Contact support@clerk.com",message:r.message,reason:"secret-key-invalid"});throw new eR({action:"Contact support@clerk.com",message:`Error loading Clerk JWKS from ${n.href} with code=${o.status}`,reason:"jwk-remote-failed-to-load"})}return o.json()}async function verifyToken(t,r){let a;let{apiKey:n,secretKey:o,apiUrl:i,apiVersion:s,audience:l,authorizedParties:u,clockSkewInSeconds:c,clockSkewInMs:d,issuer:h,jwksCacheTtlInMs:p,jwtKey:y,skipJwksCache:m}=r,{header:g}=decodeJwt(t),{kid:b}=g;if(y)a=function(t){if(!ej[eW]){if(!t)throw new eR({action:"Set the CLERK_JWT_KEY environment variable.",message:"Missing local JWK.",reason:"jwk-local-missing"});let r=t.replace(/(\r\n|\n|\r)/gm,"").replace("-----BEGIN PUBLIC KEY-----","").replace("-----END PUBLIC KEY-----","").replace("MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA","").replace("IDAQAB","").replace(/\+/g,"-").replace(/\//g,"_");setInCache({kid:"local",kty:"RSA",alg:"RS256",n:r,e:"AQAB"},-1)}return ej[eW]}(y);else if("string"==typeof h)a=await loadClerkJWKFromRemote({issuer:h,kid:b,jwksCacheTtlInMs:p,skipJwksCache:m});else if(n||o)a=await loadClerkJWKFromRemote({apiKey:n,secretKey:o,apiUrl:i,apiVersion:s,kid:b,jwksCacheTtlInMs:p,skipJwksCache:m});else throw new eR({action:"Set the CLERK_JWT_KEY environment variable.",message:"Failed to resolve JWK during verification.",reason:"jwk-failed-to-resolve"});return await verifyJwt(t,{audience:l,authorizedParties:u,clockSkewInSeconds:c,clockSkewInMs:d,key:a,issuer:h})}var shouldRedirectToSatelliteUrl=t=>!!t?.get("__clerk_satellite_url"),hasJustSynced=t=>t?.get("__clerk_synced")==="true",isReturningFromPrimary=t=>t?.get("__clerk_referrer_primary")==="true",eH=/^Mozilla\/|(Amazon CloudFront)/,isBrowser=t=>eH.test(t||""),nonBrowserRequestInDevRule=t=>{let{apiKey:r,secretKey:a,userAgent:n}=t,o=a||r||"";if(isDevelopmentFromApiKey(o)&&!isBrowser(n))return signedOut(t,"header-missing-non-browser")},crossOriginRequestWithoutHeader=t=>{let{origin:r,host:a,forwardedHost:n,forwardedProto:o}=t,i=r&&checkCrossOrigin({originURL:new URL(r),host:a,forwardedHost:n,forwardedProto:o});if(i)return signedOut(t,"header-missing-cors")},isPrimaryInDevAndRedirectsToSatellite=t=>{let{apiKey:r,secretKey:a,isSatellite:n,searchParams:o}=t,i=isDevelopmentFromApiKey(a||r||"");if(i&&!n&&shouldRedirectToSatelliteUrl(o))return interstitial(t,"primary-responds-to-syncing")},potentialFirstLoadInDevWhenUATMissing=t=>{let{apiKey:r,secretKey:a,clientUat:n}=t,o=isDevelopmentFromApiKey(a||r||"");if(o&&!n)return interstitial(t,"uat-missing")},potentialRequestAfterSignInOrOutFromClerkHostedUiInDev=t=>{let{apiKey:r,secretKey:a,referrer:n,host:o,forwardedHost:i,forwardedProto:s}=t,l=n&&checkCrossOrigin({originURL:new URL(n),host:o,forwardedHost:i,forwardedProto:s}),u=a||r||"";if(isDevelopmentFromApiKey(u)&&l)return interstitial(t,"cross-origin-referrer")},satelliteInDevReturningFromPrimary=t=>{let{apiKey:r,secretKey:a,isSatellite:n,searchParams:o}=t,i=a||r||"";if(n&&isReturningFromPrimary(o)&&isDevelopmentFromApiKey(i))return interstitial(t,"satellite-returns-from-primary")},potentialFirstRequestOnProductionEnvironment=t=>{let{apiKey:r,secretKey:a,clientUat:n,cookieToken:o}=t,i=a||r||"";if(function(t){return t.startsWith("live_")||t.startsWith("sk_live_")}(i)&&!n&&!o)return signedOut(t,"cookie-and-uat-missing")},isNormalSignedOutState=t=>{let{clientUat:r}=t;if("0"===r)return signedOut(t,"standard-signed-out")},hasPositiveClientUatButCookieIsMissing=t=>{let{clientUat:r,cookieToken:a}=t;if(r&&Number.parseInt(r)>0&&!a)return interstitial(t,"cookie-missing")},hasValidHeaderToken=async t=>{let{headerToken:r}=t,a=await verifyRequestState(t,r);return await signedIn(t,a)},hasValidCookieToken=async t=>{let{cookieToken:r,clientUat:a}=t,n=await verifyRequestState(t,r),o=await signedIn(t,n),i=o.toAuth().sessionClaims,s=i.iat<Number.parseInt(a);return!a||s?interstitial(t,"cookie-outdated"):o};async function runInterstitialRules(t,r){for(let a of r){let r=await a(t);if(r)return r}return signedOut(t,"unexpected-error")}async function verifyRequestState(t,r){let a;let{isSatellite:n,proxyUrl:o}=t;return a=n?null:o||(t=>t.startsWith("https://clerk.")||t.includes(".clerk.accounts")),verifyToken(r,{...t,issuer:a})}var isSatelliteAndNeedsSyncing=t=>{let{clientUat:r,isSatellite:a,searchParams:n,userAgent:o}=t,i=!r||"0"===r;return a&&i&&!isBrowser(o)?signedOut(t,"satellite-needs-syncing"):a&&i&&!hasJustSynced(n)?interstitial(t,"satellite-needs-syncing"):void 0};async function authenticateRequest(t){let{cookies:r,headers:a,searchParams:n}=buildRequest2(t?.request);async function authenticateRequestWithTokenInHeader(){try{let r=await runInterstitialRules(t,[hasValidHeaderToken]);return r}catch(t){return handleError(t,"header")}}async function authenticateRequestWithTokenInCookie(){try{let r=await runInterstitialRules(t,[crossOriginRequestWithoutHeader,nonBrowserRequestInDevRule,isSatelliteAndNeedsSyncing,satelliteInDevReturningFromPrimary,isPrimaryInDevAndRedirectsToSatellite,potentialFirstRequestOnProductionEnvironment,potentialFirstLoadInDevWhenUATMissing,potentialRequestAfterSignInOrOutFromClerkHostedUiInDev,hasPositiveClientUatButCookieIsMissing,isNormalSignedOutState,hasValidCookieToken]);return r}catch(t){return handleError(t,"cookie")}}function handleError(r,a){if(r instanceof eR){r.tokenCarrier=a;let n=["token-expired","token-not-active-yet"].includes(r.reason);return n?"header"===a?function(t,r,a=""){let{frontendApi:n,publishableKey:o,isSatellite:i,domain:s,signInUrl:l,signUpUrl:u,afterSignInUrl:c,afterSignUpUrl:d}=t;return{status:"unknown",reason:r,message:a,frontendApi:n,publishableKey:o,isSatellite:i,domain:s,signInUrl:l,signUpUrl:u,afterSignInUrl:c,afterSignUpUrl:d,isSignedIn:!1,isInterstitial:!1,isUnknown:!0,toAuth:()=>null}}(t,r.reason,r.getFullMessage()):interstitial(t,r.reason,r.getFullMessage()):signedOut(t,r.reason,r.getFullMessage())}return signedOut(t,"unexpected-error",r.message)}return(assertValidSecretKey((t={...t,frontendApi:parsePublishableKey(t.publishableKey)?.frontendApi||t.frontendApi,apiUrl:t.apiUrl||Z,apiVersion:t.apiVersion||"v1",headerToken:stripAuthorizationHeader(t.headerToken||a?.(er.Headers.Authorization)),cookieToken:t.cookieToken||r?.(er.Cookies.Session),clientUat:t.clientUat||r?.(er.Cookies.ClientUat),origin:t.origin||a?.(er.Headers.Origin),host:t.host||a?.(er.Headers.Host),forwardedHost:t.forwardedHost||a?.(er.Headers.ForwardedHost),forwardedPort:t.forwardedPort||a?.(er.Headers.ForwardedPort),forwardedProto:t.forwardedProto||a?.(er.Headers.ForwardedProto),referrer:t.referrer||a?.(er.Headers.Referrer),userAgent:t.userAgent||a?.(er.Headers.UserAgent),searchParams:t.searchParams||n||void 0}).secretKey||t.apiKey),t.isSatellite&&(function(t,r){if(!t&&isDevelopmentFromApiKey(r))throw Error("Missing signInUrl. Pass a signInUrl for dev instances if an app is satellite")}(t.signInUrl,t.secretKey||t.apiKey),function(t){if(!t)throw Error("Missing domain and proxyUrl. A satellite application needs to specify a domain or a proxyUrl")}(t.proxyUrl||t.domain)),t.headerToken)?authenticateRequestWithTokenInHeader():authenticateRequestWithTokenInCookie()}var debugRequestState=t=>{let{frontendApi:r,isSignedIn:a,proxyUrl:n,isInterstitial:o,reason:i,message:s,publishableKey:l,isSatellite:u,domain:c}=t;return{frontendApi:r,isSignedIn:a,proxyUrl:n,isInterstitial:o,reason:i,message:s,publishableKey:l,isSatellite:u,domain:c}};function createAuthenticateRequest(t){let{apiClient:r}=t,{apiKey:a="",secretKey:n="",jwtKey:o="",apiUrl:i=Z,apiVersion:s="v1",frontendApi:l="",proxyUrl:u="",publishableKey:c="",isSatellite:d=!1,domain:h="",audience:p="",userAgent:y}=t.options;return{authenticateRequest:({apiKey:t,secretKey:r,audience:y,frontendApi:m,proxyUrl:g,publishableKey:b,jwtKey:v,isSatellite:S,domain:C,searchParams:w,...A})=>authenticateRequest({...A,apiKey:t||a,secretKey:r||n,audience:y||p,apiUrl:i,apiVersion:s,frontendApi:m||l,proxyUrl:g||u,publishableKey:b||c,isSatellite:S||d,domain:C||h,jwtKey:v||o,searchParams:w}),localInterstitial:({frontendApi:t,publishableKey:r,proxyUrl:a,isSatellite:n,domain:o,...i})=>loadInterstitialFromLocal({...i,frontendApi:t||l,proxyUrl:a||u,publishableKey:r||c,isSatellite:n||d,domain:o||h}),remotePublicInterstitial:({frontendApi:t,publishableKey:r,proxyUrl:a,isSatellite:n,domain:o,userAgent:s,...p})=>loadInterstitialFromBAPI({...p,apiUrl:i,frontendApi:t||l,publishableKey:r||c,proxyUrl:a||u,isSatellite:n||d,domain:o||h,userAgent:s||y}),remotePrivateInterstitial:()=>r.interstitial.getInterstitial(),remotePublicInterstitialUrl:buildPublicInterstitialUrl,debugRequestState}}var buildUrl=(t,r)=>{let a;if(t.startsWith("http"))a=new URL(t);else{if(!r||!r.startsWith("http"))throw Error("destination url or return back url should be an absolute path url!");let n=new URL(r);a=new URL(t,n.origin)}return r&&a.searchParams.set("redirect_url",r),a.toString()},eM="Missing publishableKey. You can get your key at https://dashboard.clerk.com/last-active?path=api-keys.";function redirect({redirectAdapter:t,signUpUrl:r,signInUrl:a,frontendApi:n,publishableKey:o}){n||(n=parsePublishableKey(o)?.frontendApi);let i=function(t){if(!t)return"";let r=t.replace(/(clerk\.accountsstage\.)/,"accountsstage.").replace(/(clerk\.accounts\.|clerk\.)/,"accounts.");return`https://${r}`}(n);return{redirectToSignUp:({returnBackUrl:a}={})=>{if(!r&&!i)throw Error(eM);let n=`${i}/sign-up`;return t(buildUrl(r||n,a))},redirectToSignIn:({returnBackUrl:r}={})=>{if(!a&&!i)throw Error(eM);let n=`${i}/sign-in`;return t(buildUrl(a||n,r))}}}function Clerk(t){let r={...t},a=createBackendApiClient(r),n=createAuthenticateRequest({options:r,apiClient:a});return{...a,...n,__unstable_options:r}}},35788:(t,r,a)=>{let n;try{(n=a(6005).webcrypto)||(n=new(a(21604)).w)}catch(t){n=new(a(21604)).w}t.exports=n},86935:(t,r,a)=>{let{fetch:n,Blob:o,FormData:i,Headers:s,Request:l,Response:u,AbortController:c}=a(60013);t.exports=n,t.exports.RuntimeBlob=o,t.exports.RuntimeFormData=i,t.exports.RuntimeHeaders=s,t.exports.RuntimeRequest=l,t.exports.RuntimeResponse=u,t.exports.RuntimeAbortController=c},98620:(t,r,a)=>{a.d(r,{El:()=>esm_ClerkProvider,I8:()=>esm_auth});var n=a(53830),o=a.n(n);let mergeNextClerkPropsWithEnv=t=>({...t,frontendApi:t.frontendApi||process.env.NEXT_PUBLIC_CLERK_FRONTEND_API||"",publishableKey:t.publishableKey||"pk_test_dGhhbmtmdWwtc2Vhc25haWwtMzUuY2xlcmsuYWNjb3VudHMuZGV2JA",clerkJSUrl:t.clerkJSUrl||process.env.NEXT_PUBLIC_CLERK_JS,clerkJSVersion:t.clerkJSVersion||process.env.NEXT_PUBLIC_CLERK_JS_VERSION,proxyUrl:t.proxyUrl||process.env.NEXT_PUBLIC_CLERK_PROXY_URL||"",domain:t.domain||process.env.NEXT_PUBLIC_CLERK_DOMAIN||"",isSatellite:t.isSatellite||"true"===process.env.NEXT_PUBLIC_CLERK_IS_SATELLITE,signInUrl:t.signInUrl||"/sign-in",signUpUrl:t.signUpUrl||"/sign-up",afterSignInUrl:t.afterSignInUrl||"/dashboard",afterSignUpUrl:t.afterSignUpUrl||"/dashboard"});var i=a(17536);let s=(0,i.createProxy)(String.raw`/home/adii/Bird-AI/bird-ai/node_modules/@clerk/nextjs/dist/esm/app-router/client/ClerkProvider.js`),{__esModule:l,$$typeof:u}=s;s.default;let c=s.ClientClerkProvider,authAuthHeaderMissing=()=>"Clerk: auth() was called but it looks like you aren't using `authMiddleware` in your middleware file. Please use `authMiddleware` and make sure your middleware matcher is configured correctly and it matches this route or page. See https://clerk.com/docs/quickstarts/get-started-with-nextjs";var d=a(78912);let maskSecretKey=t=>{if(!t||"string"!=typeof t)return t;try{return(t||"").replace(/^(sk_(live|test)_)(.+?)(.{3})$/,"$1*********$4")}catch(t){return""}},logFormatter=t=>(Array.isArray(t)?t:[t]).map(t=>{if("string"==typeof t)return maskSecretKey(t);let r=Object.fromEntries(Object.entries(t).map(([t,r])=>[t,maskSecretKey(r)]));return JSON.stringify(r,null,2)}).join(", "),createDebugLogger=(t,r)=>()=>{let a=[],n=!1;return{enable:()=>{n=!0},debug:(...t)=>{n&&a.push(t.map(t=>"function"==typeof t?t():t))},commit:()=>{if(n){let n=`Clerk debug start :: ${t}
${a.map(t=>r(t)).map(t=>`-- ${t}
`).join("")}`;process.env.VERCEL?console.log(function(t,r){let a=new TextEncoder,n=new TextDecoder("utf-8"),o=a.encode(t),i=o.slice(0,4096);return n.decode(i).replace(/\uFFFD/g,"")}(n,0)):console.log(n)}}}},withLogger=(t,r)=>(...a)=>{let n="string"==typeof t?createDebugLogger(t,logFormatter):t,o=n(),i=r(o);try{let t=i(...a);if("object"==typeof t&&"then"in t&&"function"==typeof t.then)return t.then(t=>(o.commit(),t)).catch(t=>{throw o.commit(),t});return o.commit(),t}catch(t){throw o.commit(),t}};process.env.CLERK_JS_VERSION,process.env.NEXT_PUBLIC_CLERK_JS_VERSION,process.env.NEXT_PUBLIC_CLERK_JS;let h=process.env.CLERK_API_URL||"https://api.clerk.dev",p=process.env.CLERK_API_VERSION||"v1",y=process.env.CLERK_API_KEY||"",m=process.env.CLERK_SECRET_KEY||"",g=process.env.NEXT_PUBLIC_CLERK_FRONTEND_API||"",b=process.env.NEXT_PUBLIC_CLERK_DOMAIN||"",v=process.env.NEXT_PUBLIC_CLERK_PROXY_URL||"",S="true"===process.env.NEXT_PUBLIC_CLERK_IS_SATELLITE;(0,d.Clerk)({apiKey:y,secretKey:m,apiUrl:h,apiVersion:p,userAgent:"@clerk/nextjs",proxyUrl:v,domain:b,isSatellite:S});var C=a(66886);function getAuthKeyFromRequest(t,r){var a;return((a=d.constants.Attributes[r])in t?t[a]:void 0)||getHeader(t,d.constants.Headers[r])||("AuthStatus"===r?function(t,r){let a;if(isNextRequest(t))return t.nextUrl.searchParams.get(r);if("query"in t&&(a=t.query[r]),!a){let n=(t.url||"").split("?")[1];a=new URLSearchParams(n).get(r)}return a}(t,d.constants.SearchParams.AuthStatus):void 0)}function getHeader(t,r){return isNextRequest(t)?t.headers.get(r):t.headers[r]||t.headers[r.toLowerCase()]||t.socket?._httpMessage?.getHeader(r)}function isNextRequest(t){try{let{headers:r,nextUrl:a,cookies:n}=t||{};return"function"==typeof r?.get&&"function"==typeof a?.searchParams.get&&"function"==typeof n?.get}catch(t){return!1}}let injectSSRStateIntoObject=(t,r)=>{let a={...r};return{...t,__clerk_ssr_state:a}},createGetAuth=({debugLoggerName:t,noAuthStatusMessage:r})=>withLogger(t,t=>(a,n)=>{let o="true"===getHeader(a,d.constants.Headers.EnableDebug);o&&t.enable();let i=getAuthKeyFromRequest(a,"AuthStatus"),s=getAuthKeyFromRequest(a,"AuthMessage"),l=getAuthKeyFromRequest(a,"AuthReason");if(t.debug("Headers debug",{authStatus:i,authMessage:s,authReason:l}),!i)throw Error(r);let u={apiKey:n?.apiKey||y,secretKey:n?.secretKey||m,apiUrl:h,apiVersion:p,authStatus:i,authMessage:s,authReason:l};if(t.debug("Options debug",u),i!==d.AuthStatus.SignedIn)return(0,d.signedOutAuthObject)(u);let c=parseJwt(a);return t.debug("JWT debug",c.raw.text),(0,d.signedInAuthObject)(c.payload,{...u,token:c.raw.text})});createGetAuth({debugLoggerName:"getAuth()",noAuthStatusMessage:'You need to use "authMiddleware" (or the deprecated "withClerkMiddleware") in your Next.js middleware file. You also need to make sure that your middleware matcher is configured correctly and matches this route or page. See https://clerk.com/docs/quickstarts/get-started-with-nextjs'});let buildClerkProps=(t,r={})=>{let a;let n=getAuthKeyFromRequest(t,"AuthStatus"),o=getAuthKeyFromRequest(t,"AuthMessage"),i=getAuthKeyFromRequest(t,"AuthReason"),s={apiKey:y,secretKey:m,apiUrl:h,apiVersion:p,authStatus:n,authMessage:o,authReason:i};if(n&&n===d.AuthStatus.SignedIn){let{payload:r,raw:n}=parseJwt(t);a=(0,d.signedInAuthObject)(r,{...s,token:n.text})}else a=(0,d.signedOutAuthObject)(s);let l=(0,d.makeAuthObjectSerializable)((0,d.sanitizeAuthObject)({...a,...r}));return injectSSRStateIntoObject({},l)},parseJwt=t=>{let r=function(t,r){if(isNextRequest(t)){let a=t.cookies.get(r);if(!a)return;return"string"==typeof a?a:a.value}return t.cookies[r]}(t,d.constants.Cookies.Session),a=getHeader(t,"authorization")?.replace("Bearer ","");return(0,d.decodeJwt)(r||a||"")};var w=a(32160);let buildRequestLike=()=>{try{let{headers:t}=a(59859);return new w.Z("https://placeholder.com",{headers:t()})}catch(t){if(t&&"message"in t&&"string"==typeof t.message&&t.message.toLowerCase().includes("dynamic server usage"))throw t;throw Error(`Clerk: auth() and currentUser() are only supported in App Router (/app directory).
If you're using /pages, try getAuth() instead.
Original error: ${t}`)}},initialState=()=>buildClerkProps(buildRequestLike()),setHeader=(t,r,a)=>(t.headers.set(r,a),t);a(18624);let{redirectToSignIn:A,redirectToSignUp:k}=(0,d.redirect)({redirectAdapter:t=>{let r=C.Z.redirect(t);return setHeader(r,d.constants.Headers.ClerkRedirectTo,"true")},signInUrl:"/sign-in",signUpUrl:"/sign-up",publishableKey:"pk_test_dGhhbmtmdWwtc2Vhc25haWwtMzUuY2xlcmsuYWNjb3VudHMuZGV2JA",frontendApi:g}),esm_ClerkProvider=function(t){let{children:r,...a}=t,n=initialState()?.__clerk_ssr_state;return o().createElement(c,{...mergeNextClerkPropsWithEnv(a),initialState:n},r)},esm_auth=()=>createGetAuth({debugLoggerName:"auth()",noAuthStatusMessage:authAuthHeaderMissing()})(buildRequestLike())},5213:(t,r,a)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.AsnConvert=void 0;let n=a(94549),o=a(81648),i=a(14969),s=a(67631);let AsnConvert=class AsnConvert{static serialize(t){return s.AsnSerializer.serialize(t)}static parse(t,r){return i.AsnParser.parse(t,r)}static toString(t){let r=o.BufferSourceConverter.isBufferSource(t)?o.BufferSourceConverter.toArrayBuffer(t):AsnConvert.serialize(t),a=n.fromBER(r);if(-1===a.offset)throw Error(`Cannot decode ASN.1 data. ${a.result.error}`);return a.result.toString()}};r.AsnConvert=AsnConvert},16954:(t,r,a)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.defaultConverter=r.AsnNullConverter=r.AsnGeneralizedTimeConverter=r.AsnUTCTimeConverter=r.AsnCharacterStringConverter=r.AsnGeneralStringConverter=r.AsnVisibleStringConverter=r.AsnGraphicStringConverter=r.AsnIA5StringConverter=r.AsnVideotexStringConverter=r.AsnTeletexStringConverter=r.AsnPrintableStringConverter=r.AsnNumericStringConverter=r.AsnUniversalStringConverter=r.AsnBmpStringConverter=r.AsnUtf8StringConverter=r.AsnConstructedOctetStringConverter=r.AsnOctetStringConverter=r.AsnBooleanConverter=r.AsnObjectIdentifierConverter=r.AsnBitStringConverter=r.AsnIntegerBigIntConverter=r.AsnIntegerArrayBufferConverter=r.AsnEnumeratedConverter=r.AsnIntegerConverter=r.AsnAnyConverter=void 0;let n=a(94549),o=a(36348),i=a(38525);function createStringConverter(t){return{fromASN:t=>t.valueBlock.value,toASN:r=>new t({value:r})}}r.AsnAnyConverter={fromASN:t=>t instanceof n.Null?null:t.valueBeforeDecodeView,toASN:t=>{if(null===t)return new n.Null;let r=n.fromBER(t);if(r.result.error)throw Error(r.result.error);return r.result}},r.AsnIntegerConverter={fromASN:t=>t.valueBlock.valueHexView.byteLength>=4?t.valueBlock.toString():t.valueBlock.valueDec,toASN:t=>new n.Integer({value:+t})},r.AsnEnumeratedConverter={fromASN:t=>t.valueBlock.valueDec,toASN:t=>new n.Enumerated({value:t})},r.AsnIntegerArrayBufferConverter={fromASN:t=>t.valueBlock.valueHexView,toASN:t=>new n.Integer({valueHex:t})},r.AsnIntegerBigIntConverter={fromASN:t=>t.toBigInt(),toASN:t=>n.Integer.fromBigInt(t)},r.AsnBitStringConverter={fromASN:t=>t.valueBlock.valueHexView,toASN:t=>new n.BitString({valueHex:t})},r.AsnObjectIdentifierConverter={fromASN:t=>t.valueBlock.toString(),toASN:t=>new n.ObjectIdentifier({value:t})},r.AsnBooleanConverter={fromASN:t=>t.valueBlock.value,toASN:t=>new n.Boolean({value:t})},r.AsnOctetStringConverter={fromASN:t=>t.valueBlock.valueHexView,toASN:t=>new n.OctetString({valueHex:t})},r.AsnConstructedOctetStringConverter={fromASN:t=>new i.OctetString(t.getValue()),toASN:t=>t.toASN()},r.AsnUtf8StringConverter=createStringConverter(n.Utf8String),r.AsnBmpStringConverter=createStringConverter(n.BmpString),r.AsnUniversalStringConverter=createStringConverter(n.UniversalString),r.AsnNumericStringConverter=createStringConverter(n.NumericString),r.AsnPrintableStringConverter=createStringConverter(n.PrintableString),r.AsnTeletexStringConverter=createStringConverter(n.TeletexString),r.AsnVideotexStringConverter=createStringConverter(n.VideotexString),r.AsnIA5StringConverter=createStringConverter(n.IA5String),r.AsnGraphicStringConverter=createStringConverter(n.GraphicString),r.AsnVisibleStringConverter=createStringConverter(n.VisibleString),r.AsnGeneralStringConverter=createStringConverter(n.GeneralString),r.AsnCharacterStringConverter=createStringConverter(n.CharacterString),r.AsnUTCTimeConverter={fromASN:t=>t.toDate(),toASN:t=>new n.UTCTime({valueDate:t})},r.AsnGeneralizedTimeConverter={fromASN:t=>t.toDate(),toASN:t=>new n.GeneralizedTime({valueDate:t})},r.AsnNullConverter={fromASN:()=>null,toASN:()=>new n.Null},r.defaultConverter=function(t){switch(t){case o.AsnPropTypes.Any:return r.AsnAnyConverter;case o.AsnPropTypes.BitString:return r.AsnBitStringConverter;case o.AsnPropTypes.BmpString:return r.AsnBmpStringConverter;case o.AsnPropTypes.Boolean:return r.AsnBooleanConverter;case o.AsnPropTypes.CharacterString:return r.AsnCharacterStringConverter;case o.AsnPropTypes.Enumerated:return r.AsnEnumeratedConverter;case o.AsnPropTypes.GeneralString:return r.AsnGeneralStringConverter;case o.AsnPropTypes.GeneralizedTime:return r.AsnGeneralizedTimeConverter;case o.AsnPropTypes.GraphicString:return r.AsnGraphicStringConverter;case o.AsnPropTypes.IA5String:return r.AsnIA5StringConverter;case o.AsnPropTypes.Integer:return r.AsnIntegerConverter;case o.AsnPropTypes.Null:return r.AsnNullConverter;case o.AsnPropTypes.NumericString:return r.AsnNumericStringConverter;case o.AsnPropTypes.ObjectIdentifier:return r.AsnObjectIdentifierConverter;case o.AsnPropTypes.OctetString:return r.AsnOctetStringConverter;case o.AsnPropTypes.PrintableString:return r.AsnPrintableStringConverter;case o.AsnPropTypes.TeletexString:return r.AsnTeletexStringConverter;case o.AsnPropTypes.UTCTime:return r.AsnUTCTimeConverter;case o.AsnPropTypes.UniversalString:return r.AsnUniversalStringConverter;case o.AsnPropTypes.Utf8String:return r.AsnUtf8StringConverter;case o.AsnPropTypes.VideotexString:return r.AsnVideotexStringConverter;case o.AsnPropTypes.VisibleString:return r.AsnVisibleStringConverter;default:return null}}},34629:(t,r,a)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.AsnProp=r.AsnSequenceType=r.AsnSetType=r.AsnChoiceType=r.AsnType=void 0;let n=a(16954),o=a(36348),i=a(39457);r.AsnType=t=>r=>{let a;i.schemaStorage.has(r)?a=i.schemaStorage.get(r):(a=i.schemaStorage.createDefault(r),i.schemaStorage.set(r,a)),Object.assign(a,t)},r.AsnChoiceType=()=>(0,r.AsnType)({type:o.AsnTypeTypes.Choice}),r.AsnSetType=t=>(0,r.AsnType)({type:o.AsnTypeTypes.Set,...t}),r.AsnSequenceType=t=>(0,r.AsnType)({type:o.AsnTypeTypes.Sequence,...t}),r.AsnProp=t=>(r,a)=>{let o;i.schemaStorage.has(r.constructor)?o=i.schemaStorage.get(r.constructor):(o=i.schemaStorage.createDefault(r.constructor),i.schemaStorage.set(r.constructor,o));let s=Object.assign({},t);if("number"==typeof s.type&&!s.converter){let o=n.defaultConverter(t.type);if(!o)throw Error(`Cannot get default converter for property '${a}' of ${r.constructor.name}`);s.converter=o}o.items[a]=s}},36348:(t,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.AsnPropTypes=r.AsnTypeTypes=void 0,function(t){t[t.Sequence=0]="Sequence",t[t.Set=1]="Set",t[t.Choice=2]="Choice"}(r.AsnTypeTypes||(r.AsnTypeTypes={})),function(t){t[t.Any=1]="Any",t[t.Boolean=2]="Boolean",t[t.OctetString=3]="OctetString",t[t.BitString=4]="BitString",t[t.Integer=5]="Integer",t[t.Enumerated=6]="Enumerated",t[t.ObjectIdentifier=7]="ObjectIdentifier",t[t.Utf8String=8]="Utf8String",t[t.BmpString=9]="BmpString",t[t.UniversalString=10]="UniversalString",t[t.NumericString=11]="NumericString",t[t.PrintableString=12]="PrintableString",t[t.TeletexString=13]="TeletexString",t[t.VideotexString=14]="VideotexString",t[t.IA5String=15]="IA5String",t[t.GraphicString=16]="GraphicString",t[t.VisibleString=17]="VisibleString",t[t.GeneralString=18]="GeneralString",t[t.CharacterString=19]="CharacterString",t[t.UTCTime=20]="UTCTime",t[t.GeneralizedTime=21]="GeneralizedTime",t[t.DATE=22]="DATE",t[t.TimeOfDay=23]="TimeOfDay",t[t.DateTime=24]="DateTime",t[t.Duration=25]="Duration",t[t.TIME=26]="TIME",t[t.Null=27]="Null"}(r.AsnPropTypes||(r.AsnPropTypes={}))},66374:(t,r,a)=>{Object.defineProperty(r,"__esModule",{value:!0});let n=a(15803);n.__exportStar(a(38042),r)},38042:(t,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.AsnSchemaValidationError=void 0,r.AsnSchemaValidationError=class extends Error{constructor(){super(...arguments),this.schemas=[]}}},52174:(t,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.isArrayEqual=r.isTypeOfArray=r.isConvertible=void 0,r.isConvertible=function isConvertible(t){return"function"==typeof t&&t.prototype?!!t.prototype.toASN&&!!t.prototype.fromASN||isConvertible(t.prototype):!!(t&&"object"==typeof t&&"toASN"in t&&"fromASN"in t)},r.isTypeOfArray=function isTypeOfArray(t){var r;if(t){let a=Object.getPrototypeOf(t);return(null===(r=null==a?void 0:a.prototype)||void 0===r?void 0:r.constructor)===Array||isTypeOfArray(a)}return!1},r.isArrayEqual=function(t,r){if(!(t&&r)||t.byteLength!==r.byteLength)return!1;let a=new Uint8Array(t),n=new Uint8Array(r);for(let r=0;r<t.byteLength;r++)if(a[r]!==n[r])return!1;return!0}},98763:(t,r,a)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.AsnSerializer=r.AsnParser=r.AsnPropTypes=r.AsnTypeTypes=r.AsnSetType=r.AsnSequenceType=r.AsnChoiceType=r.AsnType=r.AsnProp=void 0;let n=a(15803);n.__exportStar(a(16954),r),n.__exportStar(a(38525),r);var o=a(34629);Object.defineProperty(r,"AsnProp",{enumerable:!0,get:function(){return o.AsnProp}}),Object.defineProperty(r,"AsnType",{enumerable:!0,get:function(){return o.AsnType}}),Object.defineProperty(r,"AsnChoiceType",{enumerable:!0,get:function(){return o.AsnChoiceType}}),Object.defineProperty(r,"AsnSequenceType",{enumerable:!0,get:function(){return o.AsnSequenceType}}),Object.defineProperty(r,"AsnSetType",{enumerable:!0,get:function(){return o.AsnSetType}});var i=a(36348);Object.defineProperty(r,"AsnTypeTypes",{enumerable:!0,get:function(){return i.AsnTypeTypes}}),Object.defineProperty(r,"AsnPropTypes",{enumerable:!0,get:function(){return i.AsnPropTypes}});var s=a(14969);Object.defineProperty(r,"AsnParser",{enumerable:!0,get:function(){return s.AsnParser}});var l=a(67631);Object.defineProperty(r,"AsnSerializer",{enumerable:!0,get:function(){return l.AsnSerializer}}),n.__exportStar(a(66374),r),n.__exportStar(a(67656),r),n.__exportStar(a(5213),r)},67656:(t,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.AsnArray=void 0,r.AsnArray=class extends Array{constructor(t=[]){if("number"==typeof t)super(t);else for(let r of(super(),t))this.push(r)}}},14969:(t,r,a)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.AsnParser=void 0;let n=a(94549),o=a(36348),i=a(16954),s=a(66374),l=a(52174),u=a(39457);r.AsnParser=class{static parse(t,r){let a=n.fromBER(t);if(a.result.error)throw Error(a.result.error);let o=this.fromASN(a.result,r);return o}static fromASN(t,r){var a;try{if((0,l.isConvertible)(r)){let a=new r;return a.fromASN(t)}let c=u.schemaStorage.get(r);u.schemaStorage.cache(r);let d=c.schema;if(t.constructor===n.Constructed&&c.type!==o.AsnTypeTypes.Choice)for(let r in d=new n.Constructed({idBlock:{tagClass:3,tagNumber:t.idBlock.tagNumber},value:c.schema.valueBlock.value}),c.items)delete t[r];let h=n.compareSchema({},t,d);if(!h.verified)throw new s.AsnSchemaValidationError(`Data does not match to ${r.name} ASN1 schema. ${h.result.error}`);let p=new r;if((0,l.isTypeOfArray)(r)){if(!("value"in t.valueBlock&&Array.isArray(t.valueBlock.value)))throw Error("Cannot get items from the ASN.1 parsed value. ASN.1 object is not constructed.");let a=c.itemType;if("number"!=typeof a)return r.from(t.valueBlock.value,t=>this.fromASN(t,a));{let n=i.defaultConverter(a);if(!n)throw Error(`Cannot get default converter for array item of ${r.name} ASN1 schema`);return r.from(t.valueBlock.value,t=>n.fromASN(t))}}for(let t in c.items){let r=h.result[t];if(!r)continue;let i=c.items[t],s=i.type;if("number"==typeof s||(0,l.isConvertible)(s)){let u=null!==(a=i.converter)&&void 0!==a?a:(0,l.isConvertible)(s)?new s:null;if(!u)throw Error("Converter is empty");if(i.repeated){if(i.implicit){let a="sequence"===i.repeated?n.Sequence:n.Set,o=new a;o.valueBlock=r.valueBlock;let s=n.fromBER(o.toBER(!1));if(-1===s.offset)throw Error(`Cannot parse the child item. ${s.result.error}`);if(!("value"in s.result.valueBlock&&Array.isArray(s.result.valueBlock.value)))throw Error("Cannot get items from the ASN.1 parsed value. ASN.1 object is not constructed.");let l=s.result.valueBlock.value;p[t]=Array.from(l,t=>u.fromASN(t))}else p[t]=Array.from(r,t=>u.fromASN(t))}else{let a=r;if(i.implicit){let t;if((0,l.isConvertible)(s))t=new s().toSchema("");else{let r=o.AsnPropTypes[s],a=n[r];if(!a)throw Error(`Cannot get '${r}' class from asn1js module`);t=new a}t.valueBlock=a.valueBlock,a=n.fromBER(t.toBER(!1)).result}p[t]=u.fromASN(a)}}else if(i.repeated){if(!Array.isArray(r))throw Error("Cannot get list of items from the ASN.1 parsed value. ASN.1 value should be iterable.");p[t]=Array.from(r,t=>this.fromASN(t,s))}else p[t]=this.fromASN(r,s)}return p}catch(t){throw t instanceof s.AsnSchemaValidationError&&t.schemas.push(r.name),t}}}},43659:(t,r,a)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.AsnSchemaStorage=void 0;let n=a(94549),o=a(36348),i=a(52174);r.AsnSchemaStorage=class{constructor(){this.items=new WeakMap}has(t){return this.items.has(t)}get(t,r=!1){let a=this.items.get(t);if(!a)throw Error(`Cannot get schema for '${t.prototype.constructor.name}' target`);if(r&&!a.schema)throw Error(`Schema '${t.prototype.constructor.name}' doesn't contain ASN.1 schema. Call 'AsnSchemaStorage.cache'.`);return a}cache(t){let r=this.get(t);r.schema||(r.schema=this.create(t,!0))}createDefault(t){let r={type:o.AsnTypeTypes.Sequence,items:{}},a=this.findParentSchema(t);return a&&(Object.assign(r,a),r.items=Object.assign({},r.items,a.items)),r}create(t,r){let a=this.items.get(t)||this.createDefault(t),s=[];for(let t in a.items){let l;let u=a.items[t],c=r?t:"";if("number"==typeof u.type){let t=o.AsnPropTypes[u.type],r=n[t];if(!r)throw Error(`Cannot get ASN1 class by name '${t}'`);l=new r({name:c})}else if((0,i.isConvertible)(u.type)){let t=new u.type;l=t.toSchema(c)}else if(u.optional){let t=this.get(u.type);t.type===o.AsnTypeTypes.Choice?l=new n.Any({name:c}):(l=this.create(u.type,!1)).name=c}else l=new n.Any({name:c});let d=!!u.optional||void 0!==u.defaultValue;if(u.repeated){l.name="";let t="set"===u.repeated?n.Set:n.Sequence;l=new t({name:"",value:[new n.Repeated({name:c,value:l})]})}if(null!==u.context&&void 0!==u.context){if(u.implicit){if("number"==typeof u.type||(0,i.isConvertible)(u.type)){let t=u.repeated?n.Constructed:n.Primitive;s.push(new t({name:c,optional:d,idBlock:{tagClass:3,tagNumber:u.context}}))}else{this.cache(u.type);let t=!!u.repeated,r=t?l:this.get(u.type,!0).schema;r="valueBlock"in r?r.valueBlock.value:r.value,s.push(new n.Constructed({name:t?"":c,optional:d,idBlock:{tagClass:3,tagNumber:u.context},value:r}))}}else s.push(new n.Constructed({optional:d,idBlock:{tagClass:3,tagNumber:u.context},value:[l]}))}else l.optional=d,s.push(l)}switch(a.type){case o.AsnTypeTypes.Sequence:return new n.Sequence({value:s,name:""});case o.AsnTypeTypes.Set:return new n.Set({value:s,name:""});case o.AsnTypeTypes.Choice:return new n.Choice({value:s,name:""});default:throw Error("Unsupported ASN1 type in use")}}set(t,r){return this.items.set(t,r),this}findParentSchema(t){let r=Object.getPrototypeOf(t);if(r){let t=this.items.get(r);return t||this.findParentSchema(r)}return null}}},67631:(t,r,a)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.AsnSerializer=void 0;let n=a(94549),o=a(16954),i=a(36348),s=a(52174),l=a(39457);let AsnSerializer=class AsnSerializer{static serialize(t){return t instanceof n.BaseBlock?t.toBER(!1):this.toASN(t).toBER(!1)}static toASN(t){let r;if(t&&"object"==typeof t&&(0,s.isConvertible)(t))return t.toASN();if(!(t&&"object"==typeof t))throw TypeError("Parameter 1 should be type of Object.");let a=t.constructor,u=l.schemaStorage.get(a);l.schemaStorage.cache(a);let c=[];if(u.itemType){if(!Array.isArray(t))throw TypeError("Parameter 1 should be type of Array.");if("number"==typeof u.itemType){let r=o.defaultConverter(u.itemType);if(!r)throw Error(`Cannot get default converter for array item of ${a.name} ASN1 schema`);c=t.map(t=>r.toASN(t))}else c=t.map(t=>this.toAsnItem({type:u.itemType},"[]",a,t))}else for(let r in u.items){let o=u.items[r],i=t[r];if(void 0===i||o.defaultValue===i||"object"==typeof o.defaultValue&&"object"==typeof i&&(0,s.isArrayEqual)(this.serialize(o.defaultValue),this.serialize(i)))continue;let l=AsnSerializer.toAsnItem(o,r,a,i);if("number"==typeof o.context){if(o.implicit){if(!o.repeated&&("number"==typeof o.type||(0,s.isConvertible)(o.type))){let t={};t.valueHex=l instanceof n.Null?l.valueBeforeDecodeView:l.valueBlock.toBER(),c.push(new n.Primitive({optional:o.optional,idBlock:{tagClass:3,tagNumber:o.context},...t}))}else c.push(new n.Constructed({optional:o.optional,idBlock:{tagClass:3,tagNumber:o.context},value:l.valueBlock.value}))}else c.push(new n.Constructed({optional:o.optional,idBlock:{tagClass:3,tagNumber:o.context},value:[l]}))}else o.repeated?c=c.concat(l):c.push(l)}switch(u.type){case i.AsnTypeTypes.Sequence:r=new n.Sequence({value:c});break;case i.AsnTypeTypes.Set:r=new n.Set({value:c});break;case i.AsnTypeTypes.Choice:if(!c[0])throw Error(`Schema '${a.name}' has wrong data. Choice cannot be empty.`);r=c[0]}return r}static toAsnItem(t,r,a,o){let s;if("number"==typeof t.type){let l=t.converter;if(!l)throw Error(`Property '${r}' doesn't have converter for type ${i.AsnPropTypes[t.type]} in schema '${a.name}'`);if(t.repeated){if(!Array.isArray(o))throw TypeError("Parameter 'objProp' should be type of Array.");let r=Array.from(o,t=>l.toASN(t)),a="sequence"===t.repeated?n.Sequence:n.Set;s=new a({value:r})}else s=l.toASN(o)}else if(t.repeated){if(!Array.isArray(o))throw TypeError("Parameter 'objProp' should be type of Array.");let r=Array.from(o,t=>this.toASN(t)),a="sequence"===t.repeated?n.Sequence:n.Set;s=new a({value:r})}else s=this.toASN(o);return s}};r.AsnSerializer=AsnSerializer},39457:(t,r,a)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.schemaStorage=void 0;let n=a(43659);r.schemaStorage=new n.AsnSchemaStorage},98107:(t,r,a)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.BitString=void 0;let n=a(94549),o=a(81648);r.BitString=class{constructor(t,r=0){if(this.unusedBits=0,this.value=new ArrayBuffer(0),t){if("number"==typeof t)this.fromNumber(t);else if(o.BufferSourceConverter.isBufferSource(t))this.unusedBits=r,this.value=o.BufferSourceConverter.toArrayBuffer(t);else throw TypeError("Unsupported type of 'params' argument for BitString")}}fromASN(t){if(!(t instanceof n.BitString))throw TypeError("Argument 'asn' is not instance of ASN.1 BitString");return this.unusedBits=t.valueBlock.unusedBits,this.value=t.valueBlock.valueHex,this}toASN(){return new n.BitString({unusedBits:this.unusedBits,valueHex:this.value})}toSchema(t){return new n.BitString({name:t})}toNumber(){let t="",r=new Uint8Array(this.value);for(let a of r)t+=a.toString(2).padStart(8,"0");return t=t.split("").reverse().join(""),this.unusedBits&&(t=t.slice(this.unusedBits).padStart(this.unusedBits,"0")),parseInt(t,2)}fromNumber(t){let r=t.toString(2),a=r.length+7>>3;this.unusedBits=(a<<3)-r.length;let n=new Uint8Array(a);r=r.padStart(a<<3,"0").split("").reverse().join("");let o=0;for(;o<a;)n[o]=parseInt(r.slice(o<<3,(o<<3)+8),2),o++;this.value=n.buffer}}},38525:(t,r,a)=>{Object.defineProperty(r,"__esModule",{value:!0});let n=a(15803);n.__exportStar(a(98107),r),n.__exportStar(a(10095),r)},10095:(t,r,a)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.OctetString=void 0;let n=a(94549),o=a(81648);r.OctetString=class{constructor(t){"number"==typeof t?this.buffer=new ArrayBuffer(t):o.BufferSourceConverter.isBufferSource(t)?this.buffer=o.BufferSourceConverter.toArrayBuffer(t):Array.isArray(t)?this.buffer=new Uint8Array(t):this.buffer=new ArrayBuffer(0)}get byteLength(){return this.buffer.byteLength}get byteOffset(){return 0}fromASN(t){if(!(t instanceof n.OctetString))throw TypeError("Argument 'asn' is not instance of ASN.1 OctetString");return this.buffer=t.valueBlock.valueHex,this}toASN(){return new n.OctetString({valueHex:this.buffer})}toSchema(t){return new n.OctetString({name:t})}}},55632:(t,r)=>{Object.defineProperty(r,"__esModule",{value:!0});let JsonError=class JsonError extends Error{constructor(t,r){super(r?`${t}. See the inner exception for more details.`:t),this.message=t,this.innerError=r}};let TransformError=class TransformError extends JsonError{constructor(t,r,a){super(r,a),this.schema=t}};let ParserError=class ParserError extends TransformError{constructor(t,r,a){super(t,`JSON doesn't match to '${t.target.name}' schema. ${r}`,a)}};let ValidationError=class ValidationError extends JsonError{};let SerializerError=class SerializerError extends JsonError{constructor(t,r,a){super(`Cannot serialize by '${t}' schema. ${r}`,a),this.schemaName=t}};let KeyError=class KeyError extends ParserError{constructor(t,r,a={}){super(t,"Some keys doesn't match to schema"),this.keys=r,this.errors=a}};function throwIfTypeIsWrong(t,a){if(!function(t,a){switch(a){case r.JsonPropTypes.Boolean:return"boolean"==typeof t;case r.JsonPropTypes.Number:return"number"==typeof t;case r.JsonPropTypes.String:return"string"==typeof t}return!0}(t,a))throw TypeError(`Value must be ${r.JsonPropTypes[a]}`)}function isConvertible(t){return t&&t.prototype?!!t.prototype.toJSON&&!!t.prototype.fromJSON||isConvertible(t.prototype):!!(t&&t.toJSON&&t.fromJSON)}!function(t){t[t.Any=0]="Any",t[t.Boolean=1]="Boolean",t[t.Number=2]="Number",t[t.String=3]="String"}(r.JsonPropTypes||(r.JsonPropTypes={}));let a="default",n=new class{constructor(){this.items=new Map}has(t){return this.items.has(t)||!!this.findParentSchema(t)}get(t){let r=this.items.get(t)||this.findParentSchema(t);if(!r)throw Error("Cannot get schema for current target");return r}create(t){let r={names:{}},a=this.findParentSchema(t);if(a)for(let t in Object.assign(r,a),r.names={},a.names)r.names[t]=Object.assign({},a.names[t]);return r.target=t,r}set(t,r){return this.items.set(t,r),this}findParentSchema(t){let r=t.__proto__;if(r){let t=this.items.get(r);return t||this.findParentSchema(r)}return null}};let PatternValidation=class PatternValidation{constructor(t){this.pattern=new RegExp(t)}validate(t){let r=new RegExp(this.pattern.source,this.pattern.flags);if("string"!=typeof t)throw new ValidationError("Incoming value must be string");if(!r.exec(t))throw new ValidationError(`Value doesn't match to pattern '${r.toString()}'`)}};let InclusiveValidation=class InclusiveValidation{constructor(t=Number.MIN_VALUE,r=Number.MAX_VALUE){this.min=t,this.max=r}validate(t){if(throwIfTypeIsWrong(t,r.JsonPropTypes.Number),!(this.min<=t&&t<=this.max)){let t=this.min===Number.MIN_VALUE?"MIN":this.min,r=this.max===Number.MAX_VALUE?"MAX":this.max;throw new ValidationError(`Value doesn't match to diapason [${t},${r}]`)}}};let ExclusiveValidation=class ExclusiveValidation{constructor(t=Number.MIN_VALUE,r=Number.MAX_VALUE){this.min=t,this.max=r}validate(t){if(throwIfTypeIsWrong(t,r.JsonPropTypes.Number),!(this.min<t&&t<this.max)){let t=this.min===Number.MIN_VALUE?"MIN":this.min,r=this.max===Number.MAX_VALUE?"MAX":this.max;throw new ValidationError(`Value doesn't match to diapason (${t},${r})`)}}};let LengthValidation=class LengthValidation{constructor(t,r,a){this.length=t,this.minLength=r,this.maxLength=a}validate(t){if(void 0!==this.length){if(t.length!==this.length)throw new ValidationError(`Value length must be exactly ${this.length}.`);return}if(void 0!==this.minLength&&t.length<this.minLength)throw new ValidationError(`Value length must be more than ${this.minLength}.`);if(void 0!==this.maxLength&&t.length>this.maxLength)throw new ValidationError(`Value length must be less than ${this.maxLength}.`)}};let EnumerationValidation=class EnumerationValidation{constructor(t){this.enumeration=t}validate(t){if(throwIfTypeIsWrong(t,r.JsonPropTypes.String),!this.enumeration.includes(t))throw new ValidationError(`Value must be one of ${this.enumeration.map(t=>`'${t}'`).join(", ")}`)}};let JsonTransform=class JsonTransform{static checkValues(t,r){let a=Array.isArray(t)?t:[t];for(let n of a)for(let a of r.validations)a instanceof LengthValidation&&r.repeated?a.validate(t):a.validate(n)}static checkTypes(t,r){if(r.repeated&&!Array.isArray(t))throw TypeError("Value must be Array");if("number"==typeof r.type){let a=Array.isArray(t)?t:[t];for(let t of a)throwIfTypeIsWrong(t,r.type)}}static getSchemaByName(t,r=a){return{...t.names[a],...t.names[r]}}};let JsonParser=class JsonParser extends JsonTransform{static parse(t,r){let a=JSON.parse(t);return this.fromJSON(a,r)}static fromJSON(t,r){let o=r.targetSchema,i=r.schemaName||a,s=new o;if(isConvertible(s))return s.fromJSON(t);let l=n.get(o),u=this.getSchemaByName(l,i),c={};for(let a in r.strictProperty&&!Array.isArray(t)&&JsonParser.checkStrictProperty(t,u,l),u)try{let n=u[a],o=n.name||a,c=t[o];if(void 0===c&&(n.optional||void 0!==n.defaultValue))continue;if(!n.optional&&void 0===c)throw new ParserError(l,`Property '${o}' is required.`);if(this.checkTypes(c,n),this.checkValues(c,n),"number"==typeof n.type)n.converter?n.repeated?s[a]=c.map(t=>n.converter.fromJSON(t,s)):s[a]=n.converter.fromJSON(c,s):s[a]=c;else{let t={...r,targetSchema:n.type,schemaName:i};n.repeated?s[a]=c.map(r=>this.fromJSON(r,t)):s[a]=this.fromJSON(c,t)}}catch(t){if(t instanceof ParserError||(t=new ParserError(l,`Property '${a}' is wrong. ${t.message}`,t)),r.strictAllKeys)c[a]=t;else throw t}let d=Object.keys(c);if(d.length)throw new KeyError(l,d,c);return s}static checkStrictProperty(t,r,a){let n=Object.keys(t),o=Object.keys(r),i=[];for(let t of n)-1===o.indexOf(t)&&i.push(t);if(i.length)throw new KeyError(a,i)}};r.JsonError=JsonError,r.JsonParser=JsonParser,r.JsonProp=(t={})=>(o,i)=>{let s;let l=`Cannot set type for ${i} property of ${o.constructor.name} schema`;n.has(o.constructor)?(s=n.get(o.constructor)).target!==o.constructor&&(s=n.create(o.constructor),n.set(o.constructor,s)):(s=n.create(o.constructor),n.set(o.constructor,s));let u={type:r.JsonPropTypes.Any,validations:[]},c=Object.assign(u,t);if(c.validations=function(t){let a=[];return t.pattern&&a.push(new PatternValidation(t.pattern)),(t.type===r.JsonPropTypes.Number||t.type===r.JsonPropTypes.Any)&&((void 0!==t.minInclusive||void 0!==t.maxInclusive)&&a.push(new InclusiveValidation(t.minInclusive,t.maxInclusive)),(void 0!==t.minExclusive||void 0!==t.maxExclusive)&&a.push(new ExclusiveValidation(t.minExclusive,t.maxExclusive)),void 0!==t.enumeration&&a.push(new EnumerationValidation(t.enumeration))),(t.type===r.JsonPropTypes.String||t.repeated||t.type===r.JsonPropTypes.Any)&&(void 0!==t.length||void 0!==t.minLength||void 0!==t.maxLength)&&a.push(new LengthValidation(t.length,t.minLength,t.maxLength)),a}(c),"number"!=typeof c.type&&!n.has(c.type)&&!isConvertible(c.type))throw Error(`${l}. Assigning type doesn't have schema.`);for(let r of Array.isArray(t.schema)?t.schema:[t.schema||a]){s.names[r]||(s.names[r]={});let t=s.names[r];t[i]=c}},r.JsonSerializer=class extends JsonTransform{static serialize(t,r,a,n){let o=this.toJSON(t,r);return JSON.stringify(o,a,n)}static toJSON(t,r={}){let o;let i=r.targetSchema,s=r.schemaName||a;if(isConvertible(t))return t.toJSON();if(Array.isArray(t))for(let a of(o=[],t))o.push(this.toJSON(a,r));else if("object"==typeof t){if(i&&!n.has(i))throw new JsonError("Cannot get schema for `targetSchema` param");if(i=i||t.constructor,n.has(i)){let r=n.get(i);o={};let a=this.getSchemaByName(r,s);for(let n in a)try{let r;let l=a[n],u=t[n];if(l.optional&&void 0===u||void 0!==l.defaultValue&&u===l.defaultValue)continue;if(!l.optional&&void 0===u)throw new SerializerError(i.name,`Property '${n}' is required.`);r="number"==typeof l.type?l.converter?l.repeated?u.map(r=>l.converter.toJSON(r,t)):l.converter.toJSON(u,t):u:l.repeated?u.map(t=>this.toJSON(t,{schemaName:s})):this.toJSON(u,{schemaName:s}),this.checkTypes(r,l),this.checkValues(r,l),o[l.name||n]=r}catch(t){if(t instanceof SerializerError)throw t;throw new SerializerError(r.target.name,`Property '${n}' is wrong. ${t.message}`,t)}}else for(let r in o={},t)o[r]=this.toJSON(t[r],{schemaName:s})}else o=t;return o}},r.KeyError=KeyError,r.ParserError=ParserError,r.SerializerError=SerializerError,r.TransformError=TransformError,r.ValidationError=ValidationError},21604:(t,r,a)=>{/*!
 Copyright (c) Peculiar Ventures, LLC
*/var n=a(87713),o=a(6113),i=a(77282),s=a(15803),l=a(55632),u=a(81648),c=a(98763);function _interopNamespaceDefault(t){var r=Object.create(null);return t&&Object.keys(t).forEach(function(a){if("default"!==a){var n=Object.getOwnPropertyDescriptor(t,a);Object.defineProperty(r,a,n.get?n:{enumerable:!0,get:function(){return t[a]}})}}),r.default=t,Object.freeze(r)}var d=_interopNamespaceDefault(n),h=_interopNamespaceDefault(o),p=_interopNamespaceDefault(i);let y={fromJSON:t=>Buffer.from(u.Convert.FromBase64Url(t)),toJSON:t=>u.Convert.ToBase64Url(t)};let CryptoKey=class CryptoKey extends d.CryptoKey{constructor(){super(...arguments),this.data=Buffer.alloc(0),this.algorithm={name:""},this.extractable=!1,this.type="secret",this.usages=[],this.kty="oct",this.alg=""}};s.__decorate([l.JsonProp({name:"ext",type:l.JsonPropTypes.Boolean,optional:!0})],CryptoKey.prototype,"extractable",void 0),s.__decorate([l.JsonProp({name:"key_ops",type:l.JsonPropTypes.String,repeated:!0,optional:!0})],CryptoKey.prototype,"usages",void 0),s.__decorate([l.JsonProp({type:l.JsonPropTypes.String})],CryptoKey.prototype,"kty",void 0),s.__decorate([l.JsonProp({type:l.JsonPropTypes.String,optional:!0})],CryptoKey.prototype,"alg",void 0);let SymmetricKey=class SymmetricKey extends CryptoKey{constructor(){super(...arguments),this.kty="oct",this.type="secret"}};let AsymmetricKey=class AsymmetricKey extends CryptoKey{};let AesCryptoKey=class AesCryptoKey extends SymmetricKey{get alg(){switch(this.algorithm.name.toUpperCase()){case"AES-CBC":return`A${this.algorithm.length}CBC`;case"AES-CTR":return`A${this.algorithm.length}CTR`;case"AES-GCM":return`A${this.algorithm.length}GCM`;case"AES-KW":return`A${this.algorithm.length}KW`;case"AES-CMAC":return`A${this.algorithm.length}CMAC`;case"AES-ECB":return`A${this.algorithm.length}ECB`;default:throw new d.AlgorithmError("Unsupported algorithm name")}}set alg(t){}};s.__decorate([l.JsonProp({name:"k",converter:y})],AesCryptoKey.prototype,"data",void 0);let m=new WeakMap;function getCryptoKey(t){let r=m.get(t);if(!r)throw new d.OperationError("Cannot get CryptoKey from secure storage");return r}function setCryptoKey(t){let r=d.CryptoKey.create(t.algorithm,t.type,t.extractable,t.usages);return Object.freeze(r),m.set(r,t),r}let AesCrypto=class AesCrypto{static async generateKey(t,r,a){let n=new AesCryptoKey;return n.algorithm=t,n.extractable=r,n.usages=a,n.data=o.randomBytes(t.length>>3),n}static async exportKey(t,r){if(!(r instanceof AesCryptoKey))throw Error("key: Is not AesCryptoKey");switch(t.toLowerCase()){case"jwk":return l.JsonSerializer.toJSON(r);case"raw":return new Uint8Array(r.data).buffer;default:throw new d.OperationError("format: Must be 'jwk' or 'raw'")}}static async importKey(t,r,a,n,o){let i;switch(t.toLowerCase()){case"jwk":i=l.JsonParser.fromJSON(r,{targetSchema:AesCryptoKey});break;case"raw":(i=new AesCryptoKey).data=Buffer.from(r);break;default:throw new d.OperationError("format: Must be 'jwk' or 'raw'")}switch(i.algorithm=a,i.algorithm.length=i.data.length<<3,i.extractable=n,i.usages=o,i.algorithm.length){case 128:case 192:case 256:break;default:throw new d.OperationError("keyData: Is wrong key length")}return i}static async encrypt(t,r,a){switch(t.name.toUpperCase()){case"AES-CBC":return this.encryptAesCBC(t,r,Buffer.from(a));case"AES-CTR":return this.encryptAesCTR(t,r,Buffer.from(a));case"AES-GCM":return this.encryptAesGCM(t,r,Buffer.from(a));case"AES-KW":return this.encryptAesKW(t,r,Buffer.from(a));case"AES-ECB":return this.encryptAesECB(t,r,Buffer.from(a));default:throw new d.OperationError("algorithm: Is not recognized")}}static async decrypt(t,r,a){if(!(r instanceof AesCryptoKey))throw Error("key: Is not AesCryptoKey");switch(t.name.toUpperCase()){case"AES-CBC":return this.decryptAesCBC(t,r,Buffer.from(a));case"AES-CTR":return this.decryptAesCTR(t,r,Buffer.from(a));case"AES-GCM":return this.decryptAesGCM(t,r,Buffer.from(a));case"AES-KW":return this.decryptAesKW(t,r,Buffer.from(a));case"AES-ECB":return this.decryptAesECB(t,r,Buffer.from(a));default:throw new d.OperationError("algorithm: Is not recognized")}}static async encryptAesCBC(t,r,a){let n=o.createCipheriv(`aes-${r.algorithm.length}-cbc`,r.data,new Uint8Array(t.iv)),i=n.update(a);i=Buffer.concat([i,n.final()]);let s=new Uint8Array(i).buffer;return s}static async decryptAesCBC(t,r,a){let n=o.createDecipheriv(`aes-${r.algorithm.length}-cbc`,r.data,new Uint8Array(t.iv)),i=n.update(a);return i=Buffer.concat([i,n.final()]),new Uint8Array(i).buffer}static async encryptAesCTR(t,r,a){let n=o.createCipheriv(`aes-${r.algorithm.length}-ctr`,r.data,Buffer.from(t.counter)),i=n.update(a);i=Buffer.concat([i,n.final()]);let s=new Uint8Array(i).buffer;return s}static async decryptAesCTR(t,r,a){let n=o.createDecipheriv(`aes-${r.algorithm.length}-ctr`,r.data,new Uint8Array(t.counter)),i=n.update(a);return i=Buffer.concat([i,n.final()]),new Uint8Array(i).buffer}static async encryptAesGCM(t,r,a){let n=o.createCipheriv(`aes-${r.algorithm.length}-gcm`,r.data,Buffer.from(t.iv),{authTagLength:(t.tagLength||128)>>3});t.additionalData&&n.setAAD(Buffer.from(t.additionalData));let i=n.update(a);i=Buffer.concat([i,n.final(),n.getAuthTag()]);let s=new Uint8Array(i).buffer;return s}static async decryptAesGCM(t,r,a){let n=o.createDecipheriv(`aes-${r.algorithm.length}-gcm`,r.data,new Uint8Array(t.iv)),i=(t.tagLength||128)>>3,s=a.slice(0,a.length-i),l=a.slice(a.length-i);t.additionalData&&n.setAAD(Buffer.from(t.additionalData)),n.setAuthTag(l);let u=n.update(s);return u=Buffer.concat([u,n.final()]),new Uint8Array(u).buffer}static async encryptAesKW(t,r,a){let n=o.createCipheriv(`id-aes${r.algorithm.length}-wrap`,r.data,this.AES_KW_IV),i=n.update(a);return i=Buffer.concat([i,n.final()]),new Uint8Array(i).buffer}static async decryptAesKW(t,r,a){let n=o.createDecipheriv(`id-aes${r.algorithm.length}-wrap`,r.data,this.AES_KW_IV),i=n.update(a);return i=Buffer.concat([i,n.final()]),new Uint8Array(i).buffer}static async encryptAesECB(t,r,a){let n=o.createCipheriv(`aes-${r.algorithm.length}-ecb`,r.data,new Uint8Array(0)),i=n.update(a);i=Buffer.concat([i,n.final()]);let s=new Uint8Array(i).buffer;return s}static async decryptAesECB(t,r,a){let n=o.createDecipheriv(`aes-${r.algorithm.length}-ecb`,r.data,new Uint8Array(0)),i=n.update(a);return i=Buffer.concat([i,n.final()]),new Uint8Array(i).buffer}};AesCrypto.AES_KW_IV=Buffer.from("A6A6A6A6A6A6A6A6","hex");let AesCbcProvider=class AesCbcProvider extends d.AesCbcProvider{async onGenerateKey(t,r,a){let n=await AesCrypto.generateKey({name:this.name,length:t.length},r,a);return setCryptoKey(n)}async onEncrypt(t,r,a){return AesCrypto.encrypt(t,getCryptoKey(r),new Uint8Array(a))}async onDecrypt(t,r,a){return AesCrypto.decrypt(t,getCryptoKey(r),new Uint8Array(a))}async onExportKey(t,r){return AesCrypto.exportKey(t,getCryptoKey(r))}async onImportKey(t,r,a,n,o){let i=await AesCrypto.importKey(t,r,{name:a.name},n,o);return setCryptoKey(i)}checkCryptoKey(t,r){if(super.checkCryptoKey(t,r),!(getCryptoKey(t) instanceof AesCryptoKey))throw TypeError("key: Is not a AesCryptoKey")}};let g=Buffer.from([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),b=Buffer.from([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,135]);function bitShiftLeft(t){let r=Buffer.alloc(t.length),a=t.length-1;for(let n=0;n<a;n++)r[n]=t[n]<<1,128&t[n+1]&&(r[n]+=1);return r[a]=t[a]<<1,r}function xor(t,r){let a=Math.min(t.length,r.length),n=Buffer.alloc(a);for(let o=0;o<a;o++)n[o]=t[o]^r[o];return n}function aes(t,r){let a=h.createCipheriv(`aes${t.length<<3}`,t,g),n=a.update(r);return a.final(),n}function getMessageBlock(t,r){let a=Buffer.alloc(16),n=16*r,o=n+16;return t.copy(a,0,n,o),a}let AesCmacProvider=class AesCmacProvider extends d.AesCmacProvider{async onGenerateKey(t,r,a){let n=await AesCrypto.generateKey({name:this.name,length:t.length},r,a);return setCryptoKey(n)}async onSign(t,r,a){let n=function(t,r){let a,n;let o=function(t){let r=aes(t,g),a=bitShiftLeft(r);128&r[0]&&(a=xor(a,b));let n=bitShiftLeft(a);return 128&a[0]&&(n=xor(n,b)),{subkey1:a,subkey2:n}}(t),i=Math.ceil(r.length/16);0===i?(i=1,a=!1):a=r.length%16==0;let s=i-1;n=a?xor(getMessageBlock(r,s),o.subkey1):xor(function(t,r){let a=Buffer.alloc(16),n=16*r,o=t.length;return a.fill(0),t.copy(a,0,n,o),a[o-n]=128,a}(r,s),o.subkey2);let l=g;for(let a=0;a<s;a++)l=aes(t,xor(l,getMessageBlock(r,a)));return aes(t,xor(n,l))}(getCryptoKey(r).data,Buffer.from(a));return new Uint8Array(n).buffer}async onVerify(t,r,a,n){let o=await this.sign(t,r,n);return 0===Buffer.from(a).compare(Buffer.from(o))}async onExportKey(t,r){return AesCrypto.exportKey(t,getCryptoKey(r))}async onImportKey(t,r,a,n,o){let i=await AesCrypto.importKey(t,r,{name:a.name},n,o);return setCryptoKey(i)}checkCryptoKey(t,r){if(super.checkCryptoKey(t,r),!(getCryptoKey(t) instanceof AesCryptoKey))throw TypeError("key: Is not a AesCryptoKey")}};let AesCtrProvider=class AesCtrProvider extends d.AesCtrProvider{async onGenerateKey(t,r,a){let n=await AesCrypto.generateKey({name:this.name,length:t.length},r,a);return setCryptoKey(n)}async onEncrypt(t,r,a){return AesCrypto.encrypt(t,getCryptoKey(r),new Uint8Array(a))}async onDecrypt(t,r,a){return AesCrypto.decrypt(t,getCryptoKey(r),new Uint8Array(a))}async onExportKey(t,r){return AesCrypto.exportKey(t,getCryptoKey(r))}async onImportKey(t,r,a,n,o){let i=await AesCrypto.importKey(t,r,{name:a.name},n,o);return setCryptoKey(i)}checkCryptoKey(t,r){if(super.checkCryptoKey(t,r),!(getCryptoKey(t) instanceof AesCryptoKey))throw TypeError("key: Is not a AesCryptoKey")}};let AesGcmProvider=class AesGcmProvider extends d.AesGcmProvider{async onGenerateKey(t,r,a){let n=await AesCrypto.generateKey({name:this.name,length:t.length},r,a);return setCryptoKey(n)}async onEncrypt(t,r,a){return AesCrypto.encrypt(t,getCryptoKey(r),new Uint8Array(a))}async onDecrypt(t,r,a){return AesCrypto.decrypt(t,getCryptoKey(r),new Uint8Array(a))}async onExportKey(t,r){return AesCrypto.exportKey(t,getCryptoKey(r))}async onImportKey(t,r,a,n,o){let i=await AesCrypto.importKey(t,r,{name:a.name},n,o);return setCryptoKey(i)}checkCryptoKey(t,r){if(super.checkCryptoKey(t,r),!(getCryptoKey(t) instanceof AesCryptoKey))throw TypeError("key: Is not a AesCryptoKey")}};let AesKwProvider=class AesKwProvider extends d.AesKwProvider{async onGenerateKey(t,r,a){let n=await AesCrypto.generateKey({name:this.name,length:t.length},r,a);return setCryptoKey(n)}async onExportKey(t,r){return AesCrypto.exportKey(t,getCryptoKey(r))}async onImportKey(t,r,a,n,o){let i=await AesCrypto.importKey(t,r,{name:a.name},n,o);return setCryptoKey(i)}async onEncrypt(t,r,a){return AesCrypto.encrypt(t,getCryptoKey(r),new Uint8Array(a))}async onDecrypt(t,r,a){return AesCrypto.decrypt(t,getCryptoKey(r),new Uint8Array(a))}checkCryptoKey(t,r){if(super.checkCryptoKey(t,r),!(getCryptoKey(t) instanceof AesCryptoKey))throw TypeError("key: Is not a AesCryptoKey")}};let AesEcbProvider=class AesEcbProvider extends d.AesEcbProvider{async onGenerateKey(t,r,a){let n=await AesCrypto.generateKey({name:this.name,length:t.length},r,a);return setCryptoKey(n)}async onEncrypt(t,r,a){return AesCrypto.encrypt(t,getCryptoKey(r),new Uint8Array(a))}async onDecrypt(t,r,a){return AesCrypto.decrypt(t,getCryptoKey(r),new Uint8Array(a))}async onExportKey(t,r){return AesCrypto.exportKey(t,getCryptoKey(r))}async onImportKey(t,r,a,n,o){let i=await AesCrypto.importKey(t,r,{name:a.name},n,o);return setCryptoKey(i)}checkCryptoKey(t,r){if(super.checkCryptoKey(t,r),!(getCryptoKey(t) instanceof AesCryptoKey))throw TypeError("key: Is not a AesCryptoKey")}};let DesCryptoKey=class DesCryptoKey extends SymmetricKey{get alg(){switch(this.algorithm.name.toUpperCase()){case"DES-CBC":return"DES-CBC";case"DES-EDE3-CBC":return"3DES-CBC";default:throw new d.AlgorithmError("Unsupported algorithm name")}}set alg(t){}};s.__decorate([l.JsonProp({name:"k",converter:y})],DesCryptoKey.prototype,"data",void 0);let DesCrypto=class DesCrypto{static async generateKey(t,r,a){let n=new DesCryptoKey;return n.algorithm=t,n.extractable=r,n.usages=a,n.data=o.randomBytes(t.length>>3),n}static async exportKey(t,r){switch(t.toLowerCase()){case"jwk":return l.JsonSerializer.toJSON(r);case"raw":return new Uint8Array(r.data).buffer;default:throw new d.OperationError("format: Must be 'jwk' or 'raw'")}}static async importKey(t,r,a,n,o){let i;switch(t.toLowerCase()){case"jwk":i=l.JsonParser.fromJSON(r,{targetSchema:DesCryptoKey});break;case"raw":(i=new DesCryptoKey).data=Buffer.from(r);break;default:throw new d.OperationError("format: Must be 'jwk' or 'raw'")}return i.algorithm=a,i.extractable=n,i.usages=o,i}static async encrypt(t,r,a){switch(t.name.toUpperCase()){case"DES-CBC":return this.encryptDesCBC(t,r,Buffer.from(a));case"DES-EDE3-CBC":return this.encryptDesEDE3CBC(t,r,Buffer.from(a));default:throw new d.OperationError("algorithm: Is not recognized")}}static async decrypt(t,r,a){if(!(r instanceof DesCryptoKey))throw Error("key: Is not DesCryptoKey");switch(t.name.toUpperCase()){case"DES-CBC":return this.decryptDesCBC(t,r,Buffer.from(a));case"DES-EDE3-CBC":return this.decryptDesEDE3CBC(t,r,Buffer.from(a));default:throw new d.OperationError("algorithm: Is not recognized")}}static async encryptDesCBC(t,r,a){let n=o.createCipheriv("des-cbc",r.data,new Uint8Array(t.iv)),i=n.update(a);i=Buffer.concat([i,n.final()]);let s=new Uint8Array(i).buffer;return s}static async decryptDesCBC(t,r,a){let n=o.createDecipheriv("des-cbc",r.data,new Uint8Array(t.iv)),i=n.update(a);return i=Buffer.concat([i,n.final()]),new Uint8Array(i).buffer}static async encryptDesEDE3CBC(t,r,a){let n=o.createCipheriv("des-ede3-cbc",r.data,Buffer.from(t.iv)),i=n.update(a);i=Buffer.concat([i,n.final()]);let s=new Uint8Array(i).buffer;return s}static async decryptDesEDE3CBC(t,r,a){let n=o.createDecipheriv("des-ede3-cbc",r.data,new Uint8Array(t.iv)),i=n.update(a);return i=Buffer.concat([i,n.final()]),new Uint8Array(i).buffer}};let DesCbcProvider=class DesCbcProvider extends d.DesProvider{constructor(){super(...arguments),this.keySizeBits=64,this.ivSize=8,this.name="DES-CBC"}async onGenerateKey(t,r,a){let n=await DesCrypto.generateKey({name:this.name,length:this.keySizeBits},r,a);return setCryptoKey(n)}async onEncrypt(t,r,a){return DesCrypto.encrypt(t,getCryptoKey(r),new Uint8Array(a))}async onDecrypt(t,r,a){return DesCrypto.decrypt(t,getCryptoKey(r),new Uint8Array(a))}async onExportKey(t,r){return DesCrypto.exportKey(t,getCryptoKey(r))}async onImportKey(t,r,a,n,o){let i=await DesCrypto.importKey(t,r,{name:this.name,length:this.keySizeBits},n,o);if(i.data.length!==this.keySizeBits>>3)throw new d.OperationError("keyData: Wrong key size");return setCryptoKey(i)}checkCryptoKey(t,r){if(super.checkCryptoKey(t,r),!(getCryptoKey(t) instanceof DesCryptoKey))throw TypeError("key: Is not a DesCryptoKey")}};let DesEde3CbcProvider=class DesEde3CbcProvider extends d.DesProvider{constructor(){super(...arguments),this.keySizeBits=192,this.ivSize=8,this.name="DES-EDE3-CBC"}async onGenerateKey(t,r,a){let n=await DesCrypto.generateKey({name:this.name,length:this.keySizeBits},r,a);return setCryptoKey(n)}async onEncrypt(t,r,a){return DesCrypto.encrypt(t,getCryptoKey(r),new Uint8Array(a))}async onDecrypt(t,r,a){return DesCrypto.decrypt(t,getCryptoKey(r),new Uint8Array(a))}async onExportKey(t,r){return DesCrypto.exportKey(t,getCryptoKey(r))}async onImportKey(t,r,a,n,o){let i=await DesCrypto.importKey(t,r,{name:this.name,length:this.keySizeBits},n,o);if(i.data.length!==this.keySizeBits>>3)throw new d.OperationError("keyData: Wrong key size");return setCryptoKey(i)}checkCryptoKey(t,r){if(super.checkCryptoKey(t,r),!(getCryptoKey(t) instanceof DesCryptoKey))throw TypeError("key: Is not a DesCryptoKey")}};function getJwkAlgorithm(t){switch(t.name.toUpperCase()){case"RSA-OAEP":{let r=/(\d+)$/.exec(t.hash.name)[1];return`RSA-OAEP${"1"!==r?`-${r}`:""}`}case"RSASSA-PKCS1-V1_5":return`RS${/(\d+)$/.exec(t.hash.name)[1]}`;case"RSA-PSS":return`PS${/(\d+)$/.exec(t.hash.name)[1]}`;case"RSA-PKCS1":return"RS1";default:throw new d.OperationError("algorithm: Is not recognized")}}let RsaPrivateKey=class RsaPrivateKey extends AsymmetricKey{constructor(){super(...arguments),this.type="private"}getKey(){let t=c.AsnParser.parse(this.data,d.asn1.PrivateKeyInfo);return c.AsnParser.parse(t.privateKey,d.asn1.RsaPrivateKey)}toJSON(){let t=this.getKey(),r={kty:"RSA",alg:getJwkAlgorithm(this.algorithm),key_ops:this.usages,ext:this.extractable};return Object.assign(r,l.JsonSerializer.toJSON(t))}fromJSON(t){let r=l.JsonParser.fromJSON(t,{targetSchema:d.asn1.RsaPrivateKey}),a=new d.asn1.PrivateKeyInfo;a.privateKeyAlgorithm.algorithm="1.2.840.113549.1.1.1",a.privateKeyAlgorithm.parameters=null,a.privateKey=c.AsnSerializer.serialize(r),this.data=Buffer.from(c.AsnSerializer.serialize(a))}};let RsaPublicKey=class RsaPublicKey extends AsymmetricKey{constructor(){super(...arguments),this.type="public"}getKey(){let t=c.AsnParser.parse(this.data,d.asn1.PublicKeyInfo);return c.AsnParser.parse(t.publicKey,d.asn1.RsaPublicKey)}toJSON(){let t=this.getKey(),r={kty:"RSA",alg:getJwkAlgorithm(this.algorithm),key_ops:this.usages,ext:this.extractable};return Object.assign(r,l.JsonSerializer.toJSON(t))}fromJSON(t){let r=l.JsonParser.fromJSON(t,{targetSchema:d.asn1.RsaPublicKey}),a=new d.asn1.PublicKeyInfo;a.publicKeyAlgorithm.algorithm="1.2.840.113549.1.1.1",a.publicKeyAlgorithm.parameters=null,a.publicKey=c.AsnSerializer.serialize(r),this.data=Buffer.from(c.AsnSerializer.serialize(a))}};let RsaCrypto=class RsaCrypto{static async generateKey(t,r,a){let n=new RsaPrivateKey;n.algorithm=t,n.extractable=r,n.usages=a.filter(t=>-1!==this.privateKeyUsages.indexOf(t));let i=new RsaPublicKey;i.algorithm=t,i.extractable=!0,i.usages=a.filter(t=>-1!==this.publicKeyUsages.indexOf(t));let s=Buffer.concat([Buffer.alloc(4-t.publicExponent.byteLength,0),Buffer.from(t.publicExponent)]).readInt32BE(0),l=o.generateKeyPairSync("rsa",{modulusLength:t.modulusLength,publicExponent:s,publicKeyEncoding:{format:"der",type:"spki"},privateKeyEncoding:{format:"der",type:"pkcs8"}});return n.data=l.privateKey,i.data=l.publicKey,{privateKey:n,publicKey:i}}static async exportKey(t,r){switch(t.toLowerCase()){case"jwk":return l.JsonSerializer.toJSON(r);case"pkcs8":case"spki":return new Uint8Array(r.data).buffer;default:throw new d.OperationError("format: Must be 'jwk', 'pkcs8' or 'spki'")}}static async importKey(t,r,a,n,o){switch(t.toLowerCase()){case"jwk":if(r.d){let t=l.JsonParser.fromJSON(r,{targetSchema:d.asn1.RsaPrivateKey});return this.importPrivateKey(t,a,n,o)}{let t=l.JsonParser.fromJSON(r,{targetSchema:d.asn1.RsaPublicKey});return this.importPublicKey(t,a,n,o)}case"spki":{let t=c.AsnParser.parse(new Uint8Array(r),d.asn1.PublicKeyInfo),i=c.AsnParser.parse(t.publicKey,d.asn1.RsaPublicKey);return this.importPublicKey(i,a,n,o)}case"pkcs8":{let t=c.AsnParser.parse(new Uint8Array(r),d.asn1.PrivateKeyInfo),i=c.AsnParser.parse(t.privateKey,d.asn1.RsaPrivateKey);return this.importPrivateKey(i,a,n,o)}default:throw new d.OperationError("format: Must be 'jwk', 'pkcs8' or 'spki'")}}static async sign(t,r,a){switch(t.name.toUpperCase()){case"RSA-PSS":case"RSASSA-PKCS1-V1_5":return this.signRsa(t,r,a);default:throw new d.OperationError("algorithm: Is not recognized")}}static async verify(t,r,a,n){switch(t.name.toUpperCase()){case"RSA-PSS":case"RSASSA-PKCS1-V1_5":return this.verifySSA(t,r,n,a);default:throw new d.OperationError("algorithm: Is not recognized")}}static async encrypt(t,r,a){if("RSA-OAEP"===t.name.toUpperCase())return this.encryptOAEP(t,r,a);throw new d.OperationError("algorithm: Is not recognized")}static async decrypt(t,r,a){if("RSA-OAEP"===t.name.toUpperCase())return this.decryptOAEP(t,r,a);throw new d.OperationError("algorithm: Is not recognized")}static importPrivateKey(t,r,a,n){let o=new d.asn1.PrivateKeyInfo;o.privateKeyAlgorithm.algorithm="1.2.840.113549.1.1.1",o.privateKeyAlgorithm.parameters=null,o.privateKey=c.AsnSerializer.serialize(t);let i=new RsaPrivateKey;return i.data=Buffer.from(c.AsnSerializer.serialize(o)),i.algorithm=Object.assign({},r),i.algorithm.publicExponent=new Uint8Array(t.publicExponent),i.algorithm.modulusLength=t.modulus.byteLength<<3,i.extractable=a,i.usages=n,i}static importPublicKey(t,r,a,n){let o=new d.asn1.PublicKeyInfo;o.publicKeyAlgorithm.algorithm="1.2.840.113549.1.1.1",o.publicKeyAlgorithm.parameters=null,o.publicKey=c.AsnSerializer.serialize(t);let i=new RsaPublicKey;return i.data=Buffer.from(c.AsnSerializer.serialize(o)),i.algorithm=Object.assign({},r),i.algorithm.publicExponent=new Uint8Array(t.publicExponent),i.algorithm.modulusLength=t.modulus.byteLength<<3,i.extractable=a,i.usages=n,i}static getCryptoAlgorithm(t){switch(t.hash.name.toUpperCase()){case"SHA-1":return"RSA-SHA1";case"SHA-256":return"RSA-SHA256";case"SHA-384":return"RSA-SHA384";case"SHA-512":return"RSA-SHA512";case"SHA3-256":return"RSA-SHA3-256";case"SHA3-384":return"RSA-SHA3-384";case"SHA3-512":return"RSA-SHA3-512";default:throw new d.OperationError("algorithm.hash: Is not recognized")}}static signRsa(t,r,a){let n=this.getCryptoAlgorithm(r.algorithm),i=o.createSign(n);i.update(Buffer.from(a)),r.pem||(r.pem=`-----BEGIN PRIVATE KEY-----
${r.data.toString("base64")}
-----END PRIVATE KEY-----`);let s={key:r.pem};"RSA-PSS"===t.name.toUpperCase()&&(s.padding=o.constants.RSA_PKCS1_PSS_PADDING,s.saltLength=t.saltLength);let l=i.sign(s);return new Uint8Array(l).buffer}static verifySSA(t,r,a,n){let i=this.getCryptoAlgorithm(r.algorithm),s=o.createVerify(i);s.update(Buffer.from(a)),r.pem||(r.pem=`-----BEGIN PUBLIC KEY-----
${r.data.toString("base64")}
-----END PUBLIC KEY-----`);let l={key:r.pem};"RSA-PSS"===t.name.toUpperCase()&&(l.padding=o.constants.RSA_PKCS1_PSS_PADDING,l.saltLength=t.saltLength);let u=s.verify(l,n);return u}static encryptOAEP(t,r,a){let n={key:`-----BEGIN PUBLIC KEY-----
${r.data.toString("base64")}
-----END PUBLIC KEY-----`,padding:o.constants.RSA_PKCS1_OAEP_PADDING};return t.label,new Uint8Array(o.publicEncrypt(n,a)).buffer}static decryptOAEP(t,r,a){let n={key:`-----BEGIN PRIVATE KEY-----
${r.data.toString("base64")}
-----END PRIVATE KEY-----`,padding:o.constants.RSA_PKCS1_OAEP_PADDING};return t.label,new Uint8Array(o.privateDecrypt(n,a)).buffer}};RsaCrypto.publicKeyUsages=["verify","encrypt","wrapKey"],RsaCrypto.privateKeyUsages=["sign","decrypt","unwrapKey"];let RsaSsaProvider=class RsaSsaProvider extends d.RsaSsaProvider{constructor(){super(...arguments),this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512","shake128","shake256","SHA3-256","SHA3-384","SHA3-512"]}async onGenerateKey(t,r,a){let n=await RsaCrypto.generateKey({...t,name:this.name},r,a);return{privateKey:setCryptoKey(n.privateKey),publicKey:setCryptoKey(n.publicKey)}}async onSign(t,r,a){return RsaCrypto.sign(t,getCryptoKey(r),new Uint8Array(a))}async onVerify(t,r,a,n){return RsaCrypto.verify(t,getCryptoKey(r),new Uint8Array(a),new Uint8Array(n))}async onExportKey(t,r){return RsaCrypto.exportKey(t,getCryptoKey(r))}async onImportKey(t,r,a,n,o){let i=await RsaCrypto.importKey(t,r,{...a,name:this.name},n,o);return setCryptoKey(i)}checkCryptoKey(t,r){super.checkCryptoKey(t,r);let a=getCryptoKey(t);if(!(a instanceof RsaPrivateKey||a instanceof RsaPublicKey))throw TypeError("key: Is not RSA CryptoKey")}};let RsaPssProvider=class RsaPssProvider extends d.RsaPssProvider{constructor(){super(...arguments),this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512","shake128","shake256","SHA3-256","SHA3-384","SHA3-512"]}async onGenerateKey(t,r,a){let n=await RsaCrypto.generateKey({...t,name:this.name},r,a);return{privateKey:setCryptoKey(n.privateKey),publicKey:setCryptoKey(n.publicKey)}}async onSign(t,r,a){return RsaCrypto.sign(t,getCryptoKey(r),new Uint8Array(a))}async onVerify(t,r,a,n){return RsaCrypto.verify(t,getCryptoKey(r),new Uint8Array(a),new Uint8Array(n))}async onExportKey(t,r){return RsaCrypto.exportKey(t,getCryptoKey(r))}async onImportKey(t,r,a,n,o){let i=await RsaCrypto.importKey(t,r,{...a,name:this.name},n,o);return setCryptoKey(i)}checkCryptoKey(t,r){super.checkCryptoKey(t,r);let a=getCryptoKey(t);if(!(a instanceof RsaPrivateKey||a instanceof RsaPublicKey))throw TypeError("key: Is not RSA CryptoKey")}};let ShaCrypto=class ShaCrypto{static size(t){switch(t.name.toUpperCase()){case"SHA-1":return 160;case"SHA-256":case"SHA3-256":return 256;case"SHA-384":case"SHA3-384":return 384;case"SHA-512":case"SHA3-512":return 512;default:throw Error("Unrecognized name")}}static getAlgorithmName(t){switch(t.name.toUpperCase()){case"SHA-1":return"sha1";case"SHA-256":return"sha256";case"SHA-384":return"sha384";case"SHA-512":return"sha512";case"SHA3-256":return"sha3-256";case"SHA3-384":return"sha3-384";case"SHA3-512":return"sha3-512";default:throw Error("Unrecognized name")}}static digest(t,r){let a=this.getAlgorithmName(t),n=o.createHash(a).update(Buffer.from(r)).digest();return new Uint8Array(n).buffer}};let RsaOaepProvider=class RsaOaepProvider extends d.RsaOaepProvider{async onGenerateKey(t,r,a){let n=await RsaCrypto.generateKey({...t,name:this.name},r,a);return{privateKey:setCryptoKey(n.privateKey),publicKey:setCryptoKey(n.publicKey)}}async onEncrypt(t,r,a){let n=getCryptoKey(r),i=new Uint8Array(a),s=Math.ceil(n.algorithm.modulusLength>>3),l=ShaCrypto.size(n.algorithm.hash)>>3,u=i.byteLength,c=s-u-2*l-2;if(u>s-2*l-2)throw Error("Data too large");let h=new Uint8Array(s),p=h.subarray(1,l+1),y=h.subarray(l+1);y.set(i,l+c+1);let m=o.createHash(n.algorithm.hash.name.replace("-","")).update(d.BufferSourceConverter.toUint8Array(t.label||new Uint8Array(0))).digest();y.set(m,0),y[l+c]=1,o.randomFillSync(p);let g=this.mgf1(n.algorithm.hash,p,y.length);for(let t=0;t<y.length;t++)y[t]^=g[t];let b=this.mgf1(n.algorithm.hash,y,p.length);for(let t=0;t<p.length;t++)p[t]^=b[t];n.pem||(n.pem=`-----BEGIN PUBLIC KEY-----
${n.data.toString("base64")}
-----END PUBLIC KEY-----`);let v=o.publicEncrypt({key:n.pem,padding:o.constants.RSA_NO_PADDING},Buffer.from(h));return new Uint8Array(v).buffer}async onDecrypt(t,r,a){let n=getCryptoKey(r),i=Math.ceil(n.algorithm.modulusLength>>3),s=ShaCrypto.size(n.algorithm.hash)>>3,l=a.byteLength;if(l!==i)throw Error("Bad data");n.pem||(n.pem=`-----BEGIN PRIVATE KEY-----
${n.data.toString("base64")}
-----END PRIVATE KEY-----`);let u=o.privateDecrypt({key:n.pem,padding:o.constants.RSA_NO_PADDING},Buffer.from(a)),c=u[0],h=u.subarray(1,s+1),p=u.subarray(s+1);if(0!==c)throw Error("Decryption failed");let y=this.mgf1(n.algorithm.hash,p,h.length);for(let t=0;t<h.length;t++)h[t]^=y[t];let m=this.mgf1(n.algorithm.hash,h,p.length);for(let t=0;t<p.length;t++)p[t]^=m[t];let g=o.createHash(n.algorithm.hash.name.replace("-","")).update(d.BufferSourceConverter.toUint8Array(t.label||new Uint8Array(0))).digest();for(let t=0;t<s;t++)if(g[t]!==p[t])throw Error("Decryption failed");let b=s;for(;b<p.length;b++){let t=p[b];if(1===t)break;if(0!==t)throw Error("Decryption failed")}if(b===p.length)throw Error("Decryption failed");return u=p.subarray(b+1),new Uint8Array(u).buffer}async onExportKey(t,r){return RsaCrypto.exportKey(t,getCryptoKey(r))}async onImportKey(t,r,a,n,o){let i=await RsaCrypto.importKey(t,r,{...a,name:this.name},n,o);return setCryptoKey(i)}checkCryptoKey(t,r){super.checkCryptoKey(t,r);let a=getCryptoKey(t);if(!(a instanceof RsaPrivateKey||a instanceof RsaPublicKey))throw TypeError("key: Is not RSA CryptoKey")}mgf1(t,r,a=0){let n=ShaCrypto.size(t)>>3,i=new Uint8Array(a),s=new Uint8Array(4),l=Math.ceil(a/n);for(let a=0;a<l;a++){s[0]=a>>>24,s[1]=a>>>16&255,s[2]=a>>>8&255,s[3]=255&a;let l=i.subarray(a*n),u=o.createHash(t.name.replace("-","")).update(r).update(s).digest();u.length>l.length&&(u=u.subarray(0,l.length)),l.set(u)}return i}};let RsaEsProvider=class RsaEsProvider extends d.ProviderCrypto{constructor(){super(...arguments),this.name="RSAES-PKCS1-v1_5",this.usages={publicKey:["encrypt","wrapKey"],privateKey:["decrypt","unwrapKey"]}}async onGenerateKey(t,r,a){let n=await RsaCrypto.generateKey({...t,name:this.name},r,a);return{privateKey:setCryptoKey(n.privateKey),publicKey:setCryptoKey(n.publicKey)}}checkGenerateKeyParams(t){if(this.checkRequiredProperty(t,"publicExponent"),!(t.publicExponent&&t.publicExponent instanceof Uint8Array))throw TypeError("publicExponent: Missing or not a Uint8Array");let r=u.Convert.ToBase64(t.publicExponent);if(!("Aw=="===r||"AQAB"===r))throw TypeError("publicExponent: Must be [3] or [1,0,1]");switch(this.checkRequiredProperty(t,"modulusLength"),t.modulusLength){case 1024:case 2048:case 4096:break;default:throw TypeError("modulusLength: Must be 1024, 2048, or 4096")}}async onEncrypt(t,r,a){let n=this.toCryptoOptions(r),o=h.publicEncrypt(n,new Uint8Array(a));return new Uint8Array(o).buffer}async onDecrypt(t,r,a){let n=this.toCryptoOptions(r),o=h.privateDecrypt(n,new Uint8Array(a));return new Uint8Array(o).buffer}async onExportKey(t,r){return RsaCrypto.exportKey(t,getCryptoKey(r))}async onImportKey(t,r,a,n,o){let i=await RsaCrypto.importKey(t,r,{...a,name:this.name},n,o);return setCryptoKey(i)}checkCryptoKey(t,r){super.checkCryptoKey(t,r);let a=getCryptoKey(t);if(!(a instanceof RsaPrivateKey||a instanceof RsaPublicKey))throw TypeError("key: Is not RSA CryptoKey")}toCryptoOptions(t){let r=t.type.toUpperCase();return{key:`-----BEGIN ${r} KEY-----
${getCryptoKey(t).data.toString("base64")}
-----END ${r} KEY-----`,padding:h.constants.RSA_PKCS1_PADDING}}};let v={"1.2.840.10045.3.1.7":"P-256","P-256":"1.2.840.10045.3.1.7","1.3.132.0.34":"P-384","P-384":"1.3.132.0.34","1.3.132.0.35":"P-521","P-521":"1.3.132.0.35","1.3.132.0.10":"K-256","K-256":"1.3.132.0.10",brainpoolP160r1:"1.3.36.3.3.2.8.1.1.1","1.3.36.3.3.2.8.1.1.1":"brainpoolP160r1",brainpoolP160t1:"1.3.36.3.3.2.8.1.1.2","1.3.36.3.3.2.8.1.1.2":"brainpoolP160t1",brainpoolP192r1:"1.3.36.3.3.2.8.1.1.3","1.3.36.3.3.2.8.1.1.3":"brainpoolP192r1",brainpoolP192t1:"1.3.36.3.3.2.8.1.1.4","1.3.36.3.3.2.8.1.1.4":"brainpoolP192t1",brainpoolP224r1:"1.3.36.3.3.2.8.1.1.5","1.3.36.3.3.2.8.1.1.5":"brainpoolP224r1",brainpoolP224t1:"1.3.36.3.3.2.8.1.1.6","1.3.36.3.3.2.8.1.1.6":"brainpoolP224t1",brainpoolP256r1:"1.3.36.3.3.2.8.1.1.7","1.3.36.3.3.2.8.1.1.7":"brainpoolP256r1",brainpoolP256t1:"1.3.36.3.3.2.8.1.1.8","1.3.36.3.3.2.8.1.1.8":"brainpoolP256t1",brainpoolP320r1:"1.3.36.3.3.2.8.1.1.9","1.3.36.3.3.2.8.1.1.9":"brainpoolP320r1",brainpoolP320t1:"1.3.36.3.3.2.8.1.1.10","1.3.36.3.3.2.8.1.1.10":"brainpoolP320t1",brainpoolP384r1:"1.3.36.3.3.2.8.1.1.11","1.3.36.3.3.2.8.1.1.11":"brainpoolP384r1",brainpoolP384t1:"1.3.36.3.3.2.8.1.1.12","1.3.36.3.3.2.8.1.1.12":"brainpoolP384t1",brainpoolP512r1:"1.3.36.3.3.2.8.1.1.13","1.3.36.3.3.2.8.1.1.13":"brainpoolP512r1",brainpoolP512t1:"1.3.36.3.3.2.8.1.1.14","1.3.36.3.3.2.8.1.1.14":"brainpoolP512t1"};function getOidByNamedCurve$1(t){let r=v[t];if(!r)throw new d.OperationError(`Cannot convert WebCrypto named curve '${t}' to OID`);return r}let EcPrivateKey=class EcPrivateKey extends AsymmetricKey{constructor(){super(...arguments),this.type="private"}getKey(){let t=c.AsnParser.parse(this.data,d.asn1.PrivateKeyInfo);return c.AsnParser.parse(t.privateKey,d.asn1.EcPrivateKey)}toJSON(){let t=this.getKey(),r={kty:"EC",crv:this.algorithm.namedCurve,key_ops:this.usages,ext:this.extractable};return Object.assign(r,l.JsonSerializer.toJSON(t))}fromJSON(t){if(!t.crv)throw new d.OperationError("Cannot get named curve from JWK. Property 'crv' is required");let r=new d.asn1.PrivateKeyInfo;r.privateKeyAlgorithm.algorithm="1.2.840.10045.2.1",r.privateKeyAlgorithm.parameters=c.AsnSerializer.serialize(new d.asn1.ObjectIdentifier(getOidByNamedCurve$1(t.crv)));let a=l.JsonParser.fromJSON(t,{targetSchema:d.asn1.EcPrivateKey});return r.privateKey=c.AsnSerializer.serialize(a),this.data=Buffer.from(c.AsnSerializer.serialize(r)),this}};let EcPublicKey=class EcPublicKey extends AsymmetricKey{constructor(){super(...arguments),this.type="public"}getKey(){let t=c.AsnParser.parse(this.data,d.asn1.PublicKeyInfo);return new d.asn1.EcPublicKey(t.publicKey)}toJSON(){let t=this.getKey(),r={kty:"EC",crv:this.algorithm.namedCurve,key_ops:this.usages,ext:this.extractable};return Object.assign(r,l.JsonSerializer.toJSON(t))}fromJSON(t){if(!t.crv)throw new d.OperationError("Cannot get named curve from JWK. Property 'crv' is required");let r=l.JsonParser.fromJSON(t,{targetSchema:d.asn1.EcPublicKey}),a=new d.asn1.PublicKeyInfo;return a.publicKeyAlgorithm.algorithm="1.2.840.10045.2.1",a.publicKeyAlgorithm.parameters=c.AsnSerializer.serialize(new d.asn1.ObjectIdentifier(getOidByNamedCurve$1(t.crv))),a.publicKey=c.AsnSerializer.toASN(r).valueHex,this.data=Buffer.from(c.AsnSerializer.serialize(a)),this}};let Sha1Provider=class Sha1Provider extends d.ProviderCrypto{constructor(){super(...arguments),this.name="SHA-1",this.usages=[]}async onDigest(t,r){return ShaCrypto.digest(t,r)}};let Sha256Provider=class Sha256Provider extends d.ProviderCrypto{constructor(){super(...arguments),this.name="SHA-256",this.usages=[]}async onDigest(t,r){return ShaCrypto.digest(t,r)}};let Sha384Provider=class Sha384Provider extends d.ProviderCrypto{constructor(){super(...arguments),this.name="SHA-384",this.usages=[]}async onDigest(t,r){return ShaCrypto.digest(t,r)}};let Sha512Provider=class Sha512Provider extends d.ProviderCrypto{constructor(){super(...arguments),this.name="SHA-512",this.usages=[]}async onDigest(t,r){return ShaCrypto.digest(t,r)}};let Sha3256Provider=class Sha3256Provider extends d.ProviderCrypto{constructor(){super(...arguments),this.name="SHA3-256",this.usages=[]}async onDigest(t,r){return ShaCrypto.digest(t,r)}};let Sha3384Provider=class Sha3384Provider extends d.ProviderCrypto{constructor(){super(...arguments),this.name="SHA3-384",this.usages=[]}async onDigest(t,r){return ShaCrypto.digest(t,r)}};let Sha3512Provider=class Sha3512Provider extends d.ProviderCrypto{constructor(){super(...arguments),this.name="SHA3-512",this.usages=[]}async onDigest(t,r){return ShaCrypto.digest(t,r)}};let EcCrypto=class EcCrypto{static async generateKey(t,r,a){let n=new EcPrivateKey;n.algorithm=t,n.extractable=r,n.usages=a.filter(t=>-1!==this.privateKeyUsages.indexOf(t));let i=new EcPublicKey;i.algorithm=t,i.extractable=!0,i.usages=a.filter(t=>-1!==this.publicKeyUsages.indexOf(t));let s=o.generateKeyPairSync("ec",{namedCurve:this.getOpenSSLNamedCurve(t.namedCurve),publicKeyEncoding:{format:"der",type:"spki"},privateKeyEncoding:{format:"der",type:"pkcs8"}});return n.data=s.privateKey,i.data=s.publicKey,{privateKey:n,publicKey:i}}static async sign(t,r,a){let n=ShaCrypto.getAlgorithmName(t.hash),i=o.createSign(n);i.update(Buffer.from(a)),r.pem||(r.pem=`-----BEGIN PRIVATE KEY-----
${r.data.toString("base64")}
-----END PRIVATE KEY-----`);let s={key:r.pem},l=i.sign(s),u=c.AsnParser.parse(l,d.asn1.EcDsaSignature),h=d.EcUtils.encodeSignature(u,d.EcCurves.get(r.algorithm.namedCurve).size);return h.buffer}static async verify(t,r,a,n){let i=ShaCrypto.getAlgorithmName(t.hash),s=o.createVerify(i);s.update(Buffer.from(n)),r.pem||(r.pem=`-----BEGIN PUBLIC KEY-----
${r.data.toString("base64")}
-----END PUBLIC KEY-----`);let l={key:r.pem},h=new d.asn1.EcDsaSignature,p=d.EcCurves.get(r.algorithm.namedCurve),y=d.EcUtils.decodeSignature(a,p.size);h.r=u.BufferSourceConverter.toArrayBuffer(y.r),h.s=u.BufferSourceConverter.toArrayBuffer(y.s);let m=Buffer.from(c.AsnSerializer.serialize(h)),g=s.verify(l,m);return g}static async deriveBits(t,r,a){let n=this.getOpenSSLNamedCurve(r.algorithm.namedCurve),i=o.createECDH(n),s=c.AsnParser.parse(r.data,d.asn1.PrivateKeyInfo),l=c.AsnParser.parse(s.privateKey,d.asn1.EcPrivateKey);i.setPrivateKey(Buffer.from(l.privateKey));let u=c.AsnParser.parse(t.public.data,d.asn1.PublicKeyInfo),h=i.computeSecret(Buffer.from(u.publicKey));return null===a?h:new Uint8Array(h).buffer.slice(0,a>>3)}static async exportKey(t,r){switch(t.toLowerCase()){case"jwk":return l.JsonSerializer.toJSON(r);case"pkcs8":case"spki":return new Uint8Array(r.data).buffer;case"raw":{let t=c.AsnParser.parse(r.data,d.asn1.PublicKeyInfo);return t.publicKey}default:throw new d.OperationError("format: Must be 'jwk', 'raw', pkcs8' or 'spki'")}}static async importKey(t,r,a,n,o){switch(t.toLowerCase()){case"jwk":if(r.d){let t=l.JsonParser.fromJSON(r,{targetSchema:d.asn1.EcPrivateKey});return this.importPrivateKey(t,a,n,o)}{let t=l.JsonParser.fromJSON(r,{targetSchema:d.asn1.EcPublicKey});return this.importPublicKey(t,a,n,o)}case"raw":{let t=new d.asn1.EcPublicKey(r);return this.importPublicKey(t,a,n,o)}case"spki":{let t=c.AsnParser.parse(new Uint8Array(r),d.asn1.PublicKeyInfo),i=new d.asn1.EcPublicKey(t.publicKey);return this.assertKeyParameters(t.publicKeyAlgorithm.parameters,a.namedCurve),this.importPublicKey(i,a,n,o)}case"pkcs8":{let t=c.AsnParser.parse(new Uint8Array(r),d.asn1.PrivateKeyInfo),i=c.AsnParser.parse(t.privateKey,d.asn1.EcPrivateKey);return this.assertKeyParameters(t.privateKeyAlgorithm.parameters,a.namedCurve),this.importPrivateKey(i,a,n,o)}default:throw new d.OperationError("format: Must be 'jwk', 'raw', 'pkcs8' or 'spki'")}}static assertKeyParameters(t,r){if(!t)throw new d.CryptoError("Key info doesn't have required parameters");let a="";try{a=c.AsnParser.parse(t,d.asn1.ObjectIdentifier).value}catch(t){throw new d.CryptoError("Cannot read key info parameters")}if(getOidByNamedCurve$1(r)!==a)throw new d.CryptoError("Key info parameter doesn't match to named curve")}static async importPrivateKey(t,r,a,n){let o=new d.asn1.PrivateKeyInfo;o.privateKeyAlgorithm.algorithm="1.2.840.10045.2.1",o.privateKeyAlgorithm.parameters=c.AsnSerializer.serialize(new d.asn1.ObjectIdentifier(getOidByNamedCurve$1(r.namedCurve))),o.privateKey=c.AsnSerializer.serialize(t);let i=new EcPrivateKey;return i.data=Buffer.from(c.AsnSerializer.serialize(o)),i.algorithm=Object.assign({},r),i.extractable=a,i.usages=n,i}static async importPublicKey(t,r,a,n){let o=new d.asn1.PublicKeyInfo;o.publicKeyAlgorithm.algorithm="1.2.840.10045.2.1";let i=getOidByNamedCurve$1(r.namedCurve);o.publicKeyAlgorithm.parameters=c.AsnSerializer.serialize(new d.asn1.ObjectIdentifier(i)),o.publicKey=t.value;let s=new EcPublicKey;return s.data=Buffer.from(c.AsnSerializer.serialize(o)),s.algorithm=Object.assign({},r),s.extractable=a,s.usages=n,s}static getOpenSSLNamedCurve(t){switch(t.toUpperCase()){case"P-256":return"prime256v1";case"K-256":return"secp256k1";case"P-384":return"secp384r1";case"P-521":return"secp521r1";default:return t}}};EcCrypto.publicKeyUsages=["verify"],EcCrypto.privateKeyUsages=["sign","deriveKey","deriveBits"];let EcdsaProvider=class EcdsaProvider extends d.EcdsaProvider{constructor(){super(...arguments),this.namedCurves=d.EcCurves.names,this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512","shake128","shake256","SHA3-256","SHA3-384","SHA3-512"]}async onGenerateKey(t,r,a){let n=await EcCrypto.generateKey({...t,name:this.name},r,a);return{privateKey:setCryptoKey(n.privateKey),publicKey:setCryptoKey(n.publicKey)}}async onSign(t,r,a){return EcCrypto.sign(t,getCryptoKey(r),new Uint8Array(a))}async onVerify(t,r,a,n){return EcCrypto.verify(t,getCryptoKey(r),new Uint8Array(a),new Uint8Array(n))}async onExportKey(t,r){return EcCrypto.exportKey(t,getCryptoKey(r))}async onImportKey(t,r,a,n,o){let i=await EcCrypto.importKey(t,r,{...a,name:this.name},n,o);return setCryptoKey(i)}checkCryptoKey(t,r){super.checkCryptoKey(t,r);let a=getCryptoKey(t);if(!(a instanceof EcPrivateKey||a instanceof EcPublicKey))throw TypeError("key: Is not EC CryptoKey")}};let EcdhProvider=class EcdhProvider extends d.EcdhProvider{constructor(){super(...arguments),this.namedCurves=d.EcCurves.names}async onGenerateKey(t,r,a){let n=await EcCrypto.generateKey({...t,name:this.name},r,a);return{privateKey:setCryptoKey(n.privateKey),publicKey:setCryptoKey(n.publicKey)}}async onExportKey(t,r){return EcCrypto.exportKey(t,getCryptoKey(r))}async onImportKey(t,r,a,n,o){let i=await EcCrypto.importKey(t,r,{...a,name:this.name},n,o);return setCryptoKey(i)}checkCryptoKey(t,r){super.checkCryptoKey(t,r);let a=getCryptoKey(t);if(!(a instanceof EcPrivateKey||a instanceof EcPublicKey))throw TypeError("key: Is not EC CryptoKey")}async onDeriveBits(t,r,a){let n=await EcCrypto.deriveBits({...t,public:getCryptoKey(t.public)},getCryptoKey(r),a);return n}};let S={[d.asn1.idEd448]:"Ed448",ed448:d.asn1.idEd448,[d.asn1.idX448]:"X448",x448:d.asn1.idX448,[d.asn1.idEd25519]:"Ed25519",ed25519:d.asn1.idEd25519,[d.asn1.idX25519]:"X25519",x25519:d.asn1.idX25519};function getOidByNamedCurve(t){let r=S[t.toLowerCase()];if(!r)throw new d.OperationError(`Cannot convert WebCrypto named curve '${t}' to OID`);return r}let EdPrivateKey=class EdPrivateKey extends AsymmetricKey{constructor(){super(...arguments),this.type="private"}getKey(){let t=c.AsnParser.parse(this.data,d.asn1.PrivateKeyInfo);return c.AsnParser.parse(t.privateKey,d.asn1.CurvePrivateKey)}toJSON(){let t=this.getKey(),r={kty:"OKP",crv:this.algorithm.namedCurve,key_ops:this.usages,ext:this.extractable};return Object.assign(r,l.JsonSerializer.toJSON(t))}fromJSON(t){if(!t.crv)throw new d.OperationError("Cannot get named curve from JWK. Property 'crv' is required");let r=new d.asn1.PrivateKeyInfo;r.privateKeyAlgorithm.algorithm=getOidByNamedCurve(t.crv);let a=l.JsonParser.fromJSON(t,{targetSchema:d.asn1.CurvePrivateKey});return r.privateKey=c.AsnSerializer.serialize(a),this.data=Buffer.from(c.AsnSerializer.serialize(r)),this}};let EdPublicKey=class EdPublicKey extends AsymmetricKey{constructor(){super(...arguments),this.type="public"}getKey(){let t=c.AsnParser.parse(this.data,d.asn1.PublicKeyInfo);return t.publicKey}toJSON(){let t=this.getKey(),r={kty:"OKP",crv:this.algorithm.namedCurve,key_ops:this.usages,ext:this.extractable};return Object.assign(r,{x:u.Convert.ToBase64Url(t)})}fromJSON(t){if(!t.crv)throw new d.OperationError("Cannot get named curve from JWK. Property 'crv' is required");if(!t.x)throw new d.OperationError("Cannot get property from JWK. Property 'x' is required");let r=new d.asn1.PublicKeyInfo;return r.publicKeyAlgorithm.algorithm=getOidByNamedCurve(t.crv),r.publicKey=u.Convert.FromBase64Url(t.x),this.data=Buffer.from(c.AsnSerializer.serialize(r)),this}};let EdCrypto=class EdCrypto{static async generateKey(t,r,a){let n=new EdPrivateKey;n.algorithm=t,n.extractable=r,n.usages=a.filter(t=>-1!==this.privateKeyUsages.indexOf(t));let i=new EdPublicKey;i.algorithm=t,i.extractable=!0,i.usages=a.filter(t=>-1!==this.publicKeyUsages.indexOf(t));let s=t.namedCurve.toLowerCase(),l=o.generateKeyPairSync(s,{publicKeyEncoding:{format:"der",type:"spki"},privateKeyEncoding:{format:"der",type:"pkcs8"}});return n.data=l.privateKey,i.data=l.publicKey,{privateKey:n,publicKey:i}}static async sign(t,r,a){r.pem||(r.pem=`-----BEGIN PRIVATE KEY-----
${r.data.toString("base64")}
-----END PRIVATE KEY-----`);let n={key:r.pem},i=o.sign(null,Buffer.from(a),n);return d.BufferSourceConverter.toArrayBuffer(i)}static async verify(t,r,a,n){r.pem||(r.pem=`-----BEGIN PUBLIC KEY-----
${r.data.toString("base64")}
-----END PUBLIC KEY-----`);let i={key:r.pem},s=o.verify(null,Buffer.from(n),i,Buffer.from(a));return s}static async deriveBits(t,r,a){let n=o.createPublicKey({key:t.public.data,format:"der",type:"spki"}),i=o.createPrivateKey({key:r.data,format:"der",type:"pkcs8"}),s=o.diffieHellman({publicKey:n,privateKey:i});return new Uint8Array(s).buffer.slice(0,a>>3)}static async exportKey(t,r){switch(t.toLowerCase()){case"jwk":return l.JsonSerializer.toJSON(r);case"pkcs8":case"spki":return new Uint8Array(r.data).buffer;case"raw":{let t=c.AsnParser.parse(r.data,d.asn1.PublicKeyInfo);return t.publicKey}default:throw new d.OperationError("format: Must be 'jwk', 'raw', pkcs8' or 'spki'")}}static async importKey(t,r,a,n,o){switch(t.toLowerCase()){case"jwk":if(r.d){let t=l.JsonParser.fromJSON(r,{targetSchema:d.asn1.CurvePrivateKey});return this.importPrivateKey(t,a,n,o)}if(!r.x)throw TypeError("keyData: Cannot get required 'x' filed");return this.importPublicKey(u.Convert.FromBase64Url(r.x),a,n,o);case"raw":return this.importPublicKey(r,a,n,o);case"spki":{let t=c.AsnParser.parse(new Uint8Array(r),d.asn1.PublicKeyInfo);return this.importPublicKey(t.publicKey,a,n,o)}case"pkcs8":{let t=c.AsnParser.parse(new Uint8Array(r),d.asn1.PrivateKeyInfo),i=c.AsnParser.parse(t.privateKey,d.asn1.CurvePrivateKey);return this.importPrivateKey(i,a,n,o)}default:throw new d.OperationError("format: Must be 'jwk', 'raw', 'pkcs8' or 'spki'")}}static importPrivateKey(t,r,a,n){let o=new EdPrivateKey;return o.fromJSON({crv:r.namedCurve,d:u.Convert.ToBase64Url(t.d)}),o.algorithm=Object.assign({},r),o.extractable=a,o.usages=n,o}static async importPublicKey(t,r,a,n){let o=new EdPublicKey;return o.fromJSON({crv:r.namedCurve,x:u.Convert.ToBase64Url(t)}),o.algorithm=Object.assign({},r),o.extractable=a,o.usages=n,o}};EdCrypto.publicKeyUsages=["verify"],EdCrypto.privateKeyUsages=["sign","deriveKey","deriveBits"];let EdDsaProvider=class EdDsaProvider extends d.EdDsaProvider{async onGenerateKey(t,r,a){let n=await EdCrypto.generateKey({name:this.name,namedCurve:t.namedCurve.replace(/^ed/i,"Ed")},r,a);return{privateKey:setCryptoKey(n.privateKey),publicKey:setCryptoKey(n.publicKey)}}async onSign(t,r,a){return EdCrypto.sign(t,getCryptoKey(r),new Uint8Array(a))}async onVerify(t,r,a,n){return EdCrypto.verify(t,getCryptoKey(r),new Uint8Array(a),new Uint8Array(n))}async onExportKey(t,r){return EdCrypto.exportKey(t,getCryptoKey(r))}async onImportKey(t,r,a,n,o){let i=await EdCrypto.importKey(t,r,{...a,name:this.name},n,o);return setCryptoKey(i)}};let EcdhEsProvider=class EcdhEsProvider extends d.EcdhEsProvider{async onGenerateKey(t,r,a){let n=await EdCrypto.generateKey({name:this.name,namedCurve:t.namedCurve.toUpperCase()},r,a);return{privateKey:setCryptoKey(n.privateKey),publicKey:setCryptoKey(n.publicKey)}}async onDeriveBits(t,r,a){let n=await EdCrypto.deriveBits({...t,public:getCryptoKey(t.public)},getCryptoKey(r),a);return n}async onExportKey(t,r){return EdCrypto.exportKey(t,getCryptoKey(r))}async onImportKey(t,r,a,n,o){let i=await EdCrypto.importKey(t,r,{...a,name:this.name},n,o);return setCryptoKey(i)}};let PbkdfCryptoKey=class PbkdfCryptoKey extends CryptoKey{};let Pbkdf2Provider=class Pbkdf2Provider extends d.Pbkdf2Provider{async onDeriveBits(t,r,a){return new Promise((n,i)=>{let s=d.BufferSourceConverter.toArrayBuffer(t.salt),l=t.hash.name.replace("-","");o.pbkdf2(getCryptoKey(r).data,Buffer.from(s),t.iterations,a>>3,l,(t,r)=>{t?i(t):n(new Uint8Array(r).buffer)})})}async onImportKey(t,r,a,n,o){if("raw"===t){let t=new PbkdfCryptoKey;return t.data=Buffer.from(r),t.algorithm={name:this.name},t.extractable=!1,t.usages=o,setCryptoKey(t)}throw new d.OperationError("format: Must be 'raw'")}checkCryptoKey(t,r){if(super.checkCryptoKey(t,r),!(getCryptoKey(t) instanceof PbkdfCryptoKey))throw TypeError("key: Is not PBKDF CryptoKey")}};let HmacCryptoKey=class HmacCryptoKey extends CryptoKey{get alg(){let t=this.algorithm.hash.name.toUpperCase();return`HS${t.replace("SHA-","")}`}set alg(t){}};s.__decorate([l.JsonProp({name:"k",converter:y})],HmacCryptoKey.prototype,"data",void 0);let HmacProvider=class HmacProvider extends d.HmacProvider{async onGenerateKey(t,r,a){let n=(t.length||this.getDefaultLength(t.hash.name))>>3<<3,i=new HmacCryptoKey;return i.algorithm={...t,length:n,name:this.name},i.extractable=r,i.usages=a,i.data=o.randomBytes(n>>3),setCryptoKey(i)}async onSign(t,r,a){let n=ShaCrypto.getAlgorithmName(r.algorithm.hash),i=o.createHmac(n,getCryptoKey(r).data).update(Buffer.from(a)).digest();return new Uint8Array(i).buffer}async onVerify(t,r,a,n){let i=ShaCrypto.getAlgorithmName(r.algorithm.hash),s=o.createHmac(i,getCryptoKey(r).data).update(Buffer.from(n)).digest();return 0===s.compare(Buffer.from(a))}async onImportKey(t,r,a,n,o){let i;switch(t.toLowerCase()){case"jwk":i=l.JsonParser.fromJSON(r,{targetSchema:HmacCryptoKey});break;case"raw":(i=new HmacCryptoKey).data=Buffer.from(r);break;default:throw new d.OperationError("format: Must be 'jwk' or 'raw'")}return i.algorithm={hash:{name:a.hash.name},name:this.name,length:i.data.length<<3},i.extractable=n,i.usages=o,setCryptoKey(i)}async onExportKey(t,r){switch(t.toLowerCase()){case"jwk":return l.JsonSerializer.toJSON(getCryptoKey(r));case"raw":return new Uint8Array(getCryptoKey(r).data).buffer;default:throw new d.OperationError("format: Must be 'jwk' or 'raw'")}}checkCryptoKey(t,r){if(super.checkCryptoKey(t,r),!(getCryptoKey(t) instanceof HmacCryptoKey))throw TypeError("key: Is not HMAC CryptoKey")}};let HkdfCryptoKey=class HkdfCryptoKey extends CryptoKey{};let HkdfProvider=class HkdfProvider extends d.HkdfProvider{async onImportKey(t,r,a,n,o){if("raw"!==t.toLowerCase())throw new d.OperationError("Operation not supported");let i=new HkdfCryptoKey;return i.data=Buffer.from(r),i.algorithm={name:this.name},i.extractable=n,i.usages=o,setCryptoKey(i)}async onDeriveBits(t,r,a){let i=t.hash.name.replace("-",""),s=o.createHash(i).digest().length,l=a/8,u=n.BufferSourceConverter.toUint8Array(t.info),c=o.createHmac(i,n.BufferSourceConverter.toUint8Array(t.salt)).update(n.BufferSourceConverter.toUint8Array(getCryptoKey(r).data)).digest(),d=[Buffer.alloc(0)],h=Math.ceil(l/s)+1;for(let t=1;t<h;++t)d.push(o.createHmac(i,c).update(Buffer.concat([d[t-1],u,Buffer.from([t])])).digest());return Buffer.concat(d).slice(0,l)}checkCryptoKey(t,r){if(super.checkCryptoKey(t,r),!(getCryptoKey(t) instanceof HkdfCryptoKey))throw TypeError("key: Is not HKDF CryptoKey")}};let ShakeCrypto=class ShakeCrypto{static digest(t,r){let a=o.createHash(t.name.toLowerCase(),{outputLength:t.length}).update(Buffer.from(r)).digest();return new Uint8Array(a).buffer}};let Shake128Provider=class Shake128Provider extends d.Shake128Provider{async onDigest(t,r){return ShakeCrypto.digest(t,r)}};let Shake256Provider=class Shake256Provider extends d.Shake256Provider{async onDigest(t,r){return ShakeCrypto.digest(t,r)}};let SubtleCrypto=class SubtleCrypto extends d.SubtleCrypto{constructor(){var t;super(),this.providers.set(new AesCbcProvider),this.providers.set(new AesCtrProvider),this.providers.set(new AesGcmProvider),this.providers.set(new AesCmacProvider),this.providers.set(new AesKwProvider),this.providers.set(new AesEcbProvider),this.providers.set(new DesCbcProvider),this.providers.set(new DesEde3CbcProvider),this.providers.set(new RsaSsaProvider),this.providers.set(new RsaPssProvider),this.providers.set(new RsaOaepProvider),this.providers.set(new RsaEsProvider),this.providers.set(new EcdsaProvider),this.providers.set(new EcdhProvider),this.providers.set(new Sha1Provider),this.providers.set(new Sha256Provider),this.providers.set(new Sha384Provider),this.providers.set(new Sha512Provider),this.providers.set(new Pbkdf2Provider),this.providers.set(new HmacProvider),this.providers.set(new HkdfProvider);let r=null===(t=/^v(\d+)/.exec(p.version))||void 0===t?void 0:t[1];r&&parseInt(r,10)>=12&&(this.providers.set(new Shake128Provider),this.providers.set(new Shake256Provider));let a=h.getHashes();a.includes("sha3-256")&&this.providers.set(new Sha3256Provider),a.includes("sha3-384")&&this.providers.set(new Sha3384Provider),a.includes("sha3-512")&&this.providers.set(new Sha3512Provider),r&&parseInt(r,10)>=14&&(this.providers.set(new EdDsaProvider),this.providers.set(new EcdhEsProvider))}};let Crypto=class Crypto extends d.Crypto{constructor(){super(...arguments),this.subtle=new SubtleCrypto}getRandomValues(t){if(!ArrayBuffer.isView(t))throw TypeError("Failed to execute 'getRandomValues' on 'Crypto': parameter 1 is not of type 'ArrayBufferView'");let r=Buffer.from(t.buffer,t.byteOffset,t.byteLength);return o.randomFillSync(r),t}};r.w=Crypto},94549:(t,r,a)=>{/*!
 * Copyright (c) 2014, GMO GlobalSign
 * Copyright (c) 2015-2022, Peculiar Ventures
 * All rights reserved.
 * 
 * Author 2014-2019, Yury Strozhevsky
 * 
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 * 
 * * Redistributions of source code must retain the above copyright notice, this
 *   list of conditions and the following disclaimer.
 * 
 * * Redistributions in binary form must reproduce the above copyright notice, this
 *   list of conditions and the following disclaimer in the documentation and/or
 *   other materials provided with the distribution.
 * 
 * * Neither the name of the copyright holder nor the names of its
 *   contributors may be used to endorse or promote products derived from
 *   this software without specific prior written permission.
 * 
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR
 * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
 * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 * 
 */Object.defineProperty(r,"__esModule",{value:!0});var n=a(81648),o=a(47162);function _interopNamespace(t){if(t&&t.__esModule)return t;var r=Object.create(null);return t&&Object.keys(t).forEach(function(a){if("default"!==a){var n=Object.getOwnPropertyDescriptor(t,a);Object.defineProperty(r,a,n.get?n:{enumerable:!0,get:function(){return t[a]}})}}),r.default=t,Object.freeze(r)}var i=_interopNamespace(n),s=_interopNamespace(o);function assertBigInt(){if("undefined"==typeof BigInt)throw Error("BigInt is not defined. Your environment doesn't implement BigInt.")}function concat(t){let r=0,a=0;for(let a=0;a<t.length;a++){let n=t[a];r+=n.byteLength}let n=new Uint8Array(r);for(let r=0;r<t.length;r++){let o=t[r];n.set(new Uint8Array(o),a),a+=o.byteLength}return n.buffer}function checkBufferParams(t,r,a,n){return r instanceof Uint8Array?r.byteLength?a<0?(t.error="Wrong parameter: inputOffset less than zero",!1):n<0?(t.error="Wrong parameter: inputLength less than zero",!1):!(r.byteLength-a-n<0)||(t.error="End of input reached before message was fully decoded (inconsistent offset and length values)",!1):(t.error="Wrong parameter: inputBuffer has zero length",!1):(t.error="Wrong parameter: inputBuffer must be 'Uint8Array'",!1)}let ViewWriter=class ViewWriter{constructor(){this.items=[]}write(t){this.items.push(t)}final(){return concat(this.items)}};let l=[new Uint8Array([1])],u="0123456789",c="name",d="valueHexView",h=new ArrayBuffer(0),p=new Uint8Array(0),y="EndOfContent",m="OCTET STRING",g="BIT STRING";function HexBlock(t){var r;return(r=class extends t{constructor(...t){var r;super(...t);let a=t[0]||{};this.isHexOnly=null!==(r=a.isHexOnly)&&void 0!==r&&r,this.valueHexView=a.valueHex?i.BufferSourceConverter.toUint8Array(a.valueHex):p}get valueHex(){return this.valueHexView.slice().buffer}set valueHex(t){this.valueHexView=new Uint8Array(t)}fromBER(t,r,a){let n=t instanceof ArrayBuffer?new Uint8Array(t):t;if(!checkBufferParams(this,n,r,a))return -1;let o=r+a;return(this.valueHexView=n.subarray(r,o),this.valueHexView.length)?(this.blockLength=a,o):(this.warnings.push("Zero buffer length"),r)}toBER(t=!1){return this.isHexOnly?t?new ArrayBuffer(this.valueHexView.byteLength):this.valueHexView.byteLength===this.valueHexView.buffer.byteLength?this.valueHexView.buffer:this.valueHexView.slice().buffer:(this.error="Flag 'isHexOnly' is not set, abort",h)}toJSON(){return{...super.toJSON(),isHexOnly:this.isHexOnly,valueHex:i.Convert.ToHex(this.valueHexView)}}}).NAME="hexBlock",r}let LocalBaseBlock=class LocalBaseBlock{constructor({blockLength:t=0,error:r="",warnings:a=[],valueBeforeDecode:n=p}={}){this.blockLength=t,this.error=r,this.warnings=a,this.valueBeforeDecodeView=i.BufferSourceConverter.toUint8Array(n)}static blockName(){return this.NAME}get valueBeforeDecode(){return this.valueBeforeDecodeView.slice().buffer}set valueBeforeDecode(t){this.valueBeforeDecodeView=new Uint8Array(t)}toJSON(){return{blockName:this.constructor.NAME,blockLength:this.blockLength,error:this.error,warnings:this.warnings,valueBeforeDecode:i.Convert.ToHex(this.valueBeforeDecodeView)}}};LocalBaseBlock.NAME="baseBlock";let ValueBlock=class ValueBlock extends LocalBaseBlock{fromBER(t,r,a){throw TypeError("User need to make a specific function in a class which extends 'ValueBlock'")}toBER(t,r){throw TypeError("User need to make a specific function in a class which extends 'ValueBlock'")}};ValueBlock.NAME="valueBlock";let LocalIdentificationBlock=class LocalIdentificationBlock extends HexBlock(LocalBaseBlock){constructor({idBlock:t={}}={}){var r,a,n,o;super(),t?(this.isHexOnly=null!==(r=t.isHexOnly)&&void 0!==r&&r,this.valueHexView=t.valueHex?i.BufferSourceConverter.toUint8Array(t.valueHex):p,this.tagClass=null!==(a=t.tagClass)&&void 0!==a?a:-1,this.tagNumber=null!==(n=t.tagNumber)&&void 0!==n?n:-1,this.isConstructed=null!==(o=t.isConstructed)&&void 0!==o&&o):(this.tagClass=-1,this.tagNumber=-1,this.isConstructed=!1)}toBER(t=!1){let r=0;switch(this.tagClass){case 1:r|=0;break;case 2:r|=64;break;case 3:r|=128;break;case 4:r|=192;break;default:return this.error="Unknown tag class",h}if(this.isConstructed&&(r|=32),this.tagNumber<31&&!this.isHexOnly){let a=new Uint8Array(1);if(!t){let t=this.tagNumber;t&=31,r|=t,a[0]=r}return a.buffer}if(!this.isHexOnly){let a=s.utilToBase(this.tagNumber,7),n=new Uint8Array(a),o=a.byteLength,i=new Uint8Array(o+1);if(i[0]=31|r,!t){for(let t=0;t<o-1;t++)i[t+1]=128|n[t];i[o]=n[o-1]}return i.buffer}let a=new Uint8Array(this.valueHexView.byteLength+1);if(a[0]=31|r,!t){let t=this.valueHexView;for(let r=0;r<t.length-1;r++)a[r+1]=128|t[r];a[this.valueHexView.byteLength]=t[t.length-1]}return a.buffer}fromBER(t,r,a){let n=i.BufferSourceConverter.toUint8Array(t);if(!checkBufferParams(this,n,r,a))return -1;let o=n.subarray(r,r+a);if(0===o.length)return this.error="Zero buffer length",-1;let l=192&o[0];switch(l){case 0:this.tagClass=1;break;case 64:this.tagClass=2;break;case 128:this.tagClass=3;break;case 192:this.tagClass=4;break;default:return this.error="Unknown tag class",-1}this.isConstructed=(32&o[0])==32,this.isHexOnly=!1;let u=31&o[0];if(31!==u)this.tagNumber=u,this.blockLength=1;else{let t=1,r=this.valueHexView=new Uint8Array(255),a=255;for(;128&o[t];){if(r[t-1]=127&o[t],++t>=o.length)return this.error="End of input reached before message was fully decoded",-1;if(t===a){a+=255;let t=new Uint8Array(a);for(let a=0;a<r.length;a++)t[a]=r[a];r=this.valueHexView=new Uint8Array(a)}}this.blockLength=t+1,r[t-1]=127&o[t];let n=new Uint8Array(t);for(let a=0;a<t;a++)n[a]=r[a];(r=this.valueHexView=new Uint8Array(t)).set(n),this.blockLength<=9?this.tagNumber=s.utilFromBase(r,7):(this.isHexOnly=!0,this.warnings.push("Tag too long, represented as hex-coded"))}if(1===this.tagClass&&this.isConstructed)switch(this.tagNumber){case 1:case 2:case 5:case 6:case 9:case 13:case 14:case 23:case 24:case 31:case 32:case 33:case 34:return this.error="Constructed encoding used for primitive type",-1}return r+this.blockLength}toJSON(){return{...super.toJSON(),tagClass:this.tagClass,tagNumber:this.tagNumber,isConstructed:this.isConstructed}}};LocalIdentificationBlock.NAME="identificationBlock";let LocalLengthBlock=class LocalLengthBlock extends LocalBaseBlock{constructor({lenBlock:t={}}={}){var r,a,n;super(),this.isIndefiniteForm=null!==(r=t.isIndefiniteForm)&&void 0!==r&&r,this.longFormUsed=null!==(a=t.longFormUsed)&&void 0!==a&&a,this.length=null!==(n=t.length)&&void 0!==n?n:0}fromBER(t,r,a){let n=i.BufferSourceConverter.toUint8Array(t);if(!checkBufferParams(this,n,r,a))return -1;let o=n.subarray(r,r+a);if(0===o.length)return this.error="Zero buffer length",-1;if(255===o[0])return this.error="Length block 0xFF is reserved by standard",-1;if(this.isIndefiniteForm=128===o[0],this.isIndefiniteForm)return this.blockLength=1,r+this.blockLength;if(this.longFormUsed=!!(128&o[0]),!1===this.longFormUsed)return this.length=o[0],this.blockLength=1,r+this.blockLength;let l=127&o[0];if(l>8)return this.error="Too big integer",-1;if(l+1>o.length)return this.error="End of input reached before message was fully decoded",-1;let u=r+1,c=n.subarray(u,u+l);return 0===c[l-1]&&this.warnings.push("Needlessly long encoded length"),this.length=s.utilFromBase(c,8),this.longFormUsed&&this.length<=127&&this.warnings.push("Unnecessary usage of long length form"),this.blockLength=l+1,r+this.blockLength}toBER(t=!1){let r,a;if(this.length>127&&(this.longFormUsed=!0),this.isIndefiniteForm)return r=new ArrayBuffer(1),!1===t&&((a=new Uint8Array(r))[0]=128),r;if(this.longFormUsed){let n=s.utilToBase(this.length,8);if(n.byteLength>127)return this.error="Too big length",h;if(r=new ArrayBuffer(n.byteLength+1),t)return r;let o=new Uint8Array(n);(a=new Uint8Array(r))[0]=128|n.byteLength;for(let t=0;t<n.byteLength;t++)a[t+1]=o[t];return r}return r=new ArrayBuffer(1),!1===t&&((a=new Uint8Array(r))[0]=this.length),r}toJSON(){return{...super.toJSON(),isIndefiniteForm:this.isIndefiniteForm,longFormUsed:this.longFormUsed,length:this.length}}};LocalLengthBlock.NAME="lengthBlock";let b={};let BaseBlock=class BaseBlock extends LocalBaseBlock{constructor({name:t="",optional:r=!1,primitiveSchema:a,...n}={},o){super(n),this.name=t,this.optional=r,a&&(this.primitiveSchema=a),this.idBlock=new LocalIdentificationBlock(n),this.lenBlock=new LocalLengthBlock(n),this.valueBlock=o?new o(n):new ValueBlock(n)}fromBER(t,r,a){let n=this.valueBlock.fromBER(t,r,this.lenBlock.isIndefiniteForm?a:this.lenBlock.length);return -1===n?this.error=this.valueBlock.error:(this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength)),n}toBER(t,r){let a=r||new ViewWriter;r||function prepareIndefiniteForm(t){if(t instanceof b.Constructed)for(let r of t.valueBlock.value)prepareIndefiniteForm(r)&&(t.lenBlock.isIndefiniteForm=!0);return!!t.lenBlock.isIndefiniteForm}(this);let n=this.idBlock.toBER(t);if(a.write(n),this.lenBlock.isIndefiniteForm)a.write(new Uint8Array([128]).buffer),this.valueBlock.toBER(t,a),a.write(new ArrayBuffer(2));else{let r=this.valueBlock.toBER(t);this.lenBlock.length=r.byteLength;let n=this.lenBlock.toBER(t);a.write(n),a.write(r)}return r?h:a.final()}toJSON(){let t={...super.toJSON(),idBlock:this.idBlock.toJSON(),lenBlock:this.lenBlock.toJSON(),valueBlock:this.valueBlock.toJSON(),name:this.name,optional:this.optional};return this.primitiveSchema&&(t.primitiveSchema=this.primitiveSchema.toJSON()),t}toString(t="ascii"){return"ascii"===t?this.onAsciiEncoding():i.Convert.ToHex(this.toBER())}onAsciiEncoding(){return`${this.constructor.NAME} : ${i.Convert.ToHex(this.valueBlock.valueBeforeDecodeView)}`}isEqual(t){if(this===t)return!0;if(!(t instanceof this.constructor))return!1;let r=this.toBER(),a=t.toBER();return s.isEqualBuffer(r,a)}};BaseBlock.NAME="BaseBlock";let BaseStringBlock=class BaseStringBlock extends BaseBlock{constructor({value:t="",...r}={},a){super(r,a),t&&this.fromString(t)}getValue(){return this.valueBlock.value}setValue(t){this.valueBlock.value=t}fromBER(t,r,a){let n=this.valueBlock.fromBER(t,r,this.lenBlock.isIndefiniteForm?a:this.lenBlock.length);return -1===n?this.error=this.valueBlock.error:(this.fromBuffer(this.valueBlock.valueHexView),this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength)),n}onAsciiEncoding(){return`${this.constructor.NAME} : '${this.valueBlock.value}'`}};BaseStringBlock.NAME="BaseStringBlock";let LocalPrimitiveValueBlock=class LocalPrimitiveValueBlock extends HexBlock(ValueBlock){constructor({isHexOnly:t=!0,...r}={}){super(r),this.isHexOnly=t}};LocalPrimitiveValueBlock.NAME="PrimitiveValueBlock";let Primitive=class Primitive extends BaseBlock{constructor(t={}){super(t,LocalPrimitiveValueBlock),this.idBlock.isConstructed=!1}};function localFromBER(t,r=0,a=t.length){let n=r,o=new BaseBlock({},ValueBlock),i=new LocalBaseBlock;if(!checkBufferParams(i,t,r,a))return o.error=i.error,{offset:-1,result:o};let s=t.subarray(r,r+a);if(!s.length)return o.error="Zero buffer length",{offset:-1,result:o};let l=o.idBlock.fromBER(t,r,a);if(o.idBlock.warnings.length&&o.warnings.concat(o.idBlock.warnings),-1===l)return o.error=o.idBlock.error,{offset:-1,result:o};if(r=l,a-=o.idBlock.blockLength,l=o.lenBlock.fromBER(t,r,a),o.lenBlock.warnings.length&&o.warnings.concat(o.lenBlock.warnings),-1===l)return o.error=o.lenBlock.error,{offset:-1,result:o};if(r=l,a-=o.lenBlock.blockLength,!o.idBlock.isConstructed&&o.lenBlock.isIndefiniteForm)return o.error="Indefinite length form used for primitive encoding form",{offset:-1,result:o};let u=BaseBlock;if(1===o.idBlock.tagClass){if(o.idBlock.tagNumber>=37&&!1===o.idBlock.isHexOnly)return o.error="UNIVERSAL 37 and upper tags are reserved by ASN.1 standard",{offset:-1,result:o};switch(o.idBlock.tagNumber){case 0:if(o.idBlock.isConstructed&&o.lenBlock.length>0)return o.error="Type [UNIVERSAL 0] is reserved",{offset:-1,result:o};u=b.EndOfContent;break;case 1:u=b.Boolean;break;case 2:u=b.Integer;break;case 3:u=b.BitString;break;case 4:u=b.OctetString;break;case 5:u=b.Null;break;case 6:u=b.ObjectIdentifier;break;case 10:u=b.Enumerated;break;case 12:u=b.Utf8String;break;case 13:u=b.RelativeObjectIdentifier;break;case 14:u=b.TIME;break;case 15:return o.error="[UNIVERSAL 15] is reserved by ASN.1 standard",{offset:-1,result:o};case 16:u=b.Sequence;break;case 17:u=b.Set;break;case 18:u=b.NumericString;break;case 19:u=b.PrintableString;break;case 20:u=b.TeletexString;break;case 21:u=b.VideotexString;break;case 22:u=b.IA5String;break;case 23:u=b.UTCTime;break;case 24:u=b.GeneralizedTime;break;case 25:u=b.GraphicString;break;case 26:u=b.VisibleString;break;case 27:u=b.GeneralString;break;case 28:u=b.UniversalString;break;case 29:u=b.CharacterString;break;case 30:u=b.BmpString;break;case 31:u=b.DATE;break;case 32:u=b.TimeOfDay;break;case 33:u=b.DateTime;break;case 34:u=b.Duration;break;default:{let t=o.idBlock.isConstructed?new b.Constructed:new b.Primitive;t.idBlock=o.idBlock,t.lenBlock=o.lenBlock,t.warnings=o.warnings,o=t}}}else u=o.idBlock.isConstructed?b.Constructed:b.Primitive;return l=(o=function(t,r){if(t instanceof r)return t;let a=new r;return a.idBlock=t.idBlock,a.lenBlock=t.lenBlock,a.warnings=t.warnings,a.valueBeforeDecodeView=t.valueBeforeDecodeView,a}(o,u)).fromBER(t,r,o.lenBlock.isIndefiniteForm?a:o.lenBlock.length),o.valueBeforeDecodeView=t.subarray(n,n+o.blockLength),{offset:l,result:o}}b.Primitive=Primitive,Primitive.NAME="PRIMITIVE";let LocalConstructedValueBlock=class LocalConstructedValueBlock extends ValueBlock{constructor({value:t=[],isIndefiniteForm:r=!1,...a}={}){super(a),this.value=t,this.isIndefiniteForm=r}fromBER(t,r,a){var n,o;let s=i.BufferSourceConverter.toUint8Array(t);if(!checkBufferParams(this,s,r,a))return -1;if(this.valueBeforeDecodeView=s.subarray(r,r+a),0===this.valueBeforeDecodeView.length)return this.warnings.push("Zero buffer length"),r;let l=r;for(;n=this.isIndefiniteForm,o=a,(n?1:o)>0;){let t=localFromBER(s,l,a);if(-1===t.offset)return this.error=t.result.error,this.warnings.concat(t.result.warnings),-1;if(l=t.offset,this.blockLength+=t.result.blockLength,a-=t.result.blockLength,this.value.push(t.result),this.isIndefiniteForm&&t.result.constructor.NAME===y)break}return this.isIndefiniteForm&&(this.value[this.value.length-1].constructor.NAME===y?this.value.pop():this.warnings.push("No EndOfContent block encoded")),l}toBER(t,r){let a=r||new ViewWriter;for(let r=0;r<this.value.length;r++)this.value[r].toBER(t,a);return r?h:a.final()}toJSON(){let t={...super.toJSON(),isIndefiniteForm:this.isIndefiniteForm,value:[]};for(let r of this.value)t.value.push(r.toJSON());return t}};LocalConstructedValueBlock.NAME="ConstructedValueBlock";let Constructed=class Constructed extends BaseBlock{constructor(t={}){super(t,LocalConstructedValueBlock),this.idBlock.isConstructed=!0}fromBER(t,r,a){this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm;let n=this.valueBlock.fromBER(t,r,this.lenBlock.isIndefiniteForm?a:this.lenBlock.length);return -1===n?this.error=this.valueBlock.error:(this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength)),n}onAsciiEncoding(){let t=[];for(let r of this.valueBlock.value)t.push(r.toString("ascii").split("\n").map(t=>`  ${t}`).join("\n"));let r=3===this.idBlock.tagClass?`[${this.idBlock.tagNumber}]`:this.constructor.NAME;return t.length?`${r} :
${t.join("\n")}`:`${r} :`}};b.Constructed=Constructed,Constructed.NAME="CONSTRUCTED";let LocalEndOfContentValueBlock=class LocalEndOfContentValueBlock extends ValueBlock{fromBER(t,r,a){return r}toBER(t){return h}};LocalEndOfContentValueBlock.override="EndOfContentValueBlock";let EndOfContent=class EndOfContent extends BaseBlock{constructor(t={}){super(t,LocalEndOfContentValueBlock),this.idBlock.tagClass=1,this.idBlock.tagNumber=0}};b.EndOfContent=EndOfContent,EndOfContent.NAME=y;let Null=class Null extends BaseBlock{constructor(t={}){super(t,ValueBlock),this.idBlock.tagClass=1,this.idBlock.tagNumber=5}fromBER(t,r,a){return(this.lenBlock.length>0&&this.warnings.push("Non-zero length of value block for Null type"),this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.blockLength+=a,r+a>t.byteLength)?(this.error="End of input reached before message was fully decoded (inconsistent offset and length values)",-1):r+a}toBER(t,r){let a=new ArrayBuffer(2);if(!t){let t=new Uint8Array(a);t[0]=5,t[1]=0}return r&&r.write(a),a}onAsciiEncoding(){return`${this.constructor.NAME}`}};b.Null=Null,Null.NAME="NULL";let LocalBooleanValueBlock=class LocalBooleanValueBlock extends HexBlock(ValueBlock){constructor({value:t,...r}={}){super(r),r.valueHex?this.valueHexView=i.BufferSourceConverter.toUint8Array(r.valueHex):this.valueHexView=new Uint8Array(1),t&&(this.value=t)}get value(){for(let t of this.valueHexView)if(t>0)return!0;return!1}set value(t){this.valueHexView[0]=t?255:0}fromBER(t,r,a){let n=i.BufferSourceConverter.toUint8Array(t);return checkBufferParams(this,n,r,a)?(this.valueHexView=n.subarray(r,r+a),a>1&&this.warnings.push("Boolean value encoded in more then 1 octet"),this.isHexOnly=!0,s.utilDecodeTC.call(this),this.blockLength=a,r+a):-1}toBER(){return this.valueHexView.slice()}toJSON(){return{...super.toJSON(),value:this.value}}};LocalBooleanValueBlock.NAME="BooleanValueBlock";let Boolean=class Boolean extends BaseBlock{constructor(t={}){super(t,LocalBooleanValueBlock),this.idBlock.tagClass=1,this.idBlock.tagNumber=1}getValue(){return this.valueBlock.value}setValue(t){this.valueBlock.value=t}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.getValue}`}};b.Boolean=Boolean,Boolean.NAME="BOOLEAN";let LocalOctetStringValueBlock=class LocalOctetStringValueBlock extends HexBlock(LocalConstructedValueBlock){constructor({isConstructed:t=!1,...r}={}){super(r),this.isConstructed=t}fromBER(t,r,a){let n=0;if(this.isConstructed){if(this.isHexOnly=!1,-1===(n=LocalConstructedValueBlock.prototype.fromBER.call(this,t,r,a)))return n;for(let t=0;t<this.value.length;t++){let r=this.value[t].constructor.NAME;if(r===y){if(!this.isIndefiniteForm)return this.error="EndOfContent is unexpected, OCTET STRING may consists of OCTET STRINGs only",-1;break}if(r!==m)return this.error="OCTET STRING may consists of OCTET STRINGs only",-1}}else this.isHexOnly=!0,n=super.fromBER(t,r,a),this.blockLength=a;return n}toBER(t,r){return this.isConstructed?LocalConstructedValueBlock.prototype.toBER.call(this,t,r):t?new ArrayBuffer(this.valueHexView.byteLength):this.valueHexView.slice().buffer}toJSON(){return{...super.toJSON(),isConstructed:this.isConstructed}}};LocalOctetStringValueBlock.NAME="OctetStringValueBlock";let OctetString=class OctetString extends BaseBlock{constructor({idBlock:t={},lenBlock:r={},...a}={}){var n,o;null!==(n=a.isConstructed)&&void 0!==n||(a.isConstructed=!!(null===(o=a.value)||void 0===o?void 0:o.length)),super({idBlock:{isConstructed:a.isConstructed,...t},lenBlock:{...r,isIndefiniteForm:!!a.isIndefiniteForm},...a},LocalOctetStringValueBlock),this.idBlock.tagClass=1,this.idBlock.tagNumber=4}fromBER(t,r,a){if(this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,0===a)return 0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),r;if(!this.valueBlock.isConstructed){let n=t instanceof ArrayBuffer?new Uint8Array(t):t,o=n.subarray(r,r+a);try{if(o.byteLength){let t=localFromBER(o,0,o.byteLength);-1!==t.offset&&t.offset===a&&(this.valueBlock.value=[t.result])}}catch(t){}}return super.fromBER(t,r,a)}onAsciiEncoding(){return this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length?Constructed.prototype.onAsciiEncoding.call(this):`${this.constructor.NAME} : ${i.Convert.ToHex(this.valueBlock.valueHexView)}`}getValue(){if(!this.idBlock.isConstructed)return this.valueBlock.valueHexView.slice().buffer;let t=[];for(let r of this.valueBlock.value)r instanceof OctetString&&t.push(r.valueBlock.valueHexView);return i.BufferSourceConverter.concat(t)}};b.OctetString=OctetString,OctetString.NAME=m;let LocalBitStringValueBlock=class LocalBitStringValueBlock extends HexBlock(LocalConstructedValueBlock){constructor({unusedBits:t=0,isConstructed:r=!1,...a}={}){super(a),this.unusedBits=t,this.isConstructed=r,this.blockLength=this.valueHexView.byteLength}fromBER(t,r,a){if(!a)return r;let n=-1;if(this.isConstructed){if(-1===(n=LocalConstructedValueBlock.prototype.fromBER.call(this,t,r,a)))return n;for(let t of this.value){let r=t.constructor.NAME;if(r===y){if(!this.isIndefiniteForm)return this.error="EndOfContent is unexpected, BIT STRING may consists of BIT STRINGs only",-1;break}if(r!==g)return this.error="BIT STRING may consists of BIT STRINGs only",-1;let a=t.valueBlock;if(this.unusedBits>0&&a.unusedBits>0)return this.error='Using of "unused bits" inside constructive BIT STRING allowed for least one only',-1;this.unusedBits=a.unusedBits}return n}let o=i.BufferSourceConverter.toUint8Array(t);if(!checkBufferParams(this,o,r,a))return -1;let s=o.subarray(r,r+a);if(this.unusedBits=s[0],this.unusedBits>7)return this.error="Unused bits for BitString must be in range 0-7",-1;if(!this.unusedBits){let t=s.subarray(1);try{if(t.byteLength){let r=localFromBER(t,0,t.byteLength);-1!==r.offset&&r.offset===a-1&&(this.value=[r.result])}}catch(t){}}return this.valueHexView=s.subarray(1),this.blockLength=s.length,r+a}toBER(t,r){if(this.isConstructed)return LocalConstructedValueBlock.prototype.toBER.call(this,t,r);if(t)return new ArrayBuffer(this.valueHexView.byteLength+1);if(!this.valueHexView.byteLength)return h;let a=new Uint8Array(this.valueHexView.length+1);return a[0]=this.unusedBits,a.set(this.valueHexView,1),a.buffer}toJSON(){return{...super.toJSON(),unusedBits:this.unusedBits,isConstructed:this.isConstructed}}};LocalBitStringValueBlock.NAME="BitStringValueBlock";let BitString=class BitString extends BaseBlock{constructor({idBlock:t={},lenBlock:r={},...a}={}){var n,o;null!==(n=a.isConstructed)&&void 0!==n||(a.isConstructed=!!(null===(o=a.value)||void 0===o?void 0:o.length)),super({idBlock:{isConstructed:a.isConstructed,...t},lenBlock:{...r,isIndefiniteForm:!!a.isIndefiniteForm},...a},LocalBitStringValueBlock),this.idBlock.tagClass=1,this.idBlock.tagNumber=3}fromBER(t,r,a){return this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,super.fromBER(t,r,a)}onAsciiEncoding(){if(this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length)return Constructed.prototype.onAsciiEncoding.call(this);{let t=[],r=this.valueBlock.valueHexView;for(let a of r)t.push(a.toString(2).padStart(8,"0"));let a=t.join("");return`${this.constructor.NAME} : ${a.substring(0,a.length-this.valueBlock.unusedBits)}`}}};function power2(t){if(t>=l.length)for(let r=l.length;r<=t;r++){let t=new Uint8Array([0]),a=l[r-1].slice(0);for(let r=a.length-1;r>=0;r--){let n=new Uint8Array([(a[r]<<1)+t[0]]);t[0]=n[0]/10,a[r]=n[0]%10}t[0]>0&&(a=s.utilConcatView(t,a)),l.push(a)}return l[t]}b.BitString=BitString,BitString.NAME=g;let LocalIntegerValueBlock=class LocalIntegerValueBlock extends HexBlock(ValueBlock){constructor({value:t,...r}={}){super(r),this._valueDec=0,r.valueHex&&this.setValueHex(),void 0!==t&&(this.valueDec=t)}setValueHex(){this.valueHexView.length>=4?(this.warnings.push("Too big Integer for decoding, hex only"),this.isHexOnly=!0,this._valueDec=0):(this.isHexOnly=!1,this.valueHexView.length>0&&(this._valueDec=s.utilDecodeTC.call(this)))}set valueDec(t){this._valueDec=t,this.isHexOnly=!1,this.valueHexView=new Uint8Array(s.utilEncodeTC(t))}get valueDec(){return this._valueDec}fromDER(t,r,a,n=0){let o=this.fromBER(t,r,a);if(-1===o)return o;let i=this.valueHexView;return 0===i[0]&&(128&i[1])!=0?this.valueHexView=i.subarray(1):0!==n&&i.length<n&&(n-i.length>1&&(n=i.length+1),this.valueHexView=i.subarray(n-i.length)),o}toDER(t=!1){let r=this.valueHexView;switch(!0){case(128&r[0])!=0:{let t=new Uint8Array(this.valueHexView.length+1);t[0]=0,t.set(r,1),this.valueHexView=t}break;case 0===r[0]&&(128&r[1])==0:this.valueHexView=this.valueHexView.subarray(1)}return this.toBER(t)}fromBER(t,r,a){let n=super.fromBER(t,r,a);return -1===n||this.setValueHex(),n}toBER(t){return t?new ArrayBuffer(this.valueHexView.length):this.valueHexView.slice().buffer}toJSON(){return{...super.toJSON(),valueDec:this.valueDec}}toString(){let t;let r=8*this.valueHexView.length-1,a=new Uint8Array(8*this.valueHexView.length/3),n=0,o=this.valueHexView,i="",l=!1;for(let l=o.byteLength-1;l>=0;l--){t=o[l];for(let o=0;o<8;o++)(1&t)==1&&(n===r?(a=function(t,r){let a,n=0,o=new Uint8Array(t),i=new Uint8Array(r),s=o.slice(0),l=s.length-1,u=i.slice(0),c=u.length-1,d=0;for(let t=c;t>=0;t--,d++)!0==(a=s[l-d]-u[c-d]-n)<0?(n=1,s[l-d]=a+10):(n=0,s[l-d]=a);if(n>0)for(let t=l-c+1;t>=0;t--,d++)if((a=s[l-d]-n)<0)n=1,s[l-d]=a+10;else{n=0,s[l-d]=a;break}return s.slice()}(power2(n),a),i="-"):a=function(t,r){let a=new Uint8Array([0]),n=new Uint8Array(t),o=new Uint8Array(r),i=n.slice(0),l=i.length-1,u=o.slice(0),c=u.length-1,d=0,h=c<l?l:c,p=0;for(let t=h;t>=0;t--,p++)d=!0==p<u.length?i[l-p]+u[c-p]+a[0]:i[l-p]+a[0],(a[0]=d/10,!0==p>=i.length)?i=s.utilConcatView(new Uint8Array([d%10]),i):i[l-p]=d%10;return a[0]>0&&(i=s.utilConcatView(a,i)),i}(a,power2(n))),n++,t>>=1}for(let t=0;t<a.length;t++)a[t]&&(l=!0),l&&(i+=u.charAt(a[t]));return!1===l&&(i+=u.charAt(0)),i}};LocalIntegerValueBlock.NAME="IntegerValueBlock",Object.defineProperty(LocalIntegerValueBlock.prototype,"valueHex",{set:function(t){this.valueHexView=new Uint8Array(t),this.setValueHex()},get:function(){return this.valueHexView.slice().buffer}});let Integer=class Integer extends BaseBlock{constructor(t={}){super(t,LocalIntegerValueBlock),this.idBlock.tagClass=1,this.idBlock.tagNumber=2}toBigInt(){return assertBigInt(),BigInt(this.valueBlock.toString())}static fromBigInt(t){assertBigInt();let r=BigInt(t),a=new ViewWriter,n=r.toString(16).replace(/^-/,""),o=new Uint8Array(i.Convert.FromHex(n));if(r<0){let t=new Uint8Array(o.length+(128&o[0]?1:0));t[0]|=128;let n=BigInt(`0x${i.Convert.ToHex(t)}`),s=i.BufferSourceConverter.toUint8Array(i.Convert.FromHex((n+r).toString(16)));s[0]|=128,a.write(s)}else 128&o[0]&&a.write(new Uint8Array([0])),a.write(o);let s=new Integer({valueHex:a.final()});return s}convertToDER(){let t=new Integer({valueHex:this.valueBlock.valueHexView});return t.valueBlock.toDER(),t}convertFromDER(){return new Integer({valueHex:0===this.valueBlock.valueHexView[0]?this.valueBlock.valueHexView.subarray(1):this.valueBlock.valueHexView})}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()}`}};b.Integer=Integer,Integer.NAME="INTEGER";let Enumerated=class Enumerated extends Integer{constructor(t={}){super(t),this.idBlock.tagClass=1,this.idBlock.tagNumber=10}};b.Enumerated=Enumerated,Enumerated.NAME="ENUMERATED";let LocalSidValueBlock=class LocalSidValueBlock extends HexBlock(ValueBlock){constructor({valueDec:t=-1,isFirstSid:r=!1,...a}={}){super(a),this.valueDec=t,this.isFirstSid=r}fromBER(t,r,a){if(!a)return r;let n=i.BufferSourceConverter.toUint8Array(t);if(!checkBufferParams(this,n,r,a))return -1;let o=n.subarray(r,r+a);this.valueHexView=new Uint8Array(a);for(let t=0;t<a&&(this.valueHexView[t]=127&o[t],this.blockLength++,(128&o[t])!=0);t++);let l=new Uint8Array(this.blockLength);for(let t=0;t<this.blockLength;t++)l[t]=this.valueHexView[t];return(this.valueHexView=l,(128&o[this.blockLength-1])!=0)?(this.error="End of input reached before message was fully decoded",-1):(0===this.valueHexView[0]&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=s.utilFromBase(this.valueHexView,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),r+this.blockLength)}set valueBigInt(t){assertBigInt();let r=BigInt(t).toString(2);for(;r.length%7;)r="0"+r;let a=new Uint8Array(r.length/7);for(let t=0;t<a.length;t++)a[t]=parseInt(r.slice(7*t,7*t+7),2)+(t+1<a.length?128:0);this.fromBER(a.buffer,0,a.length)}toBER(t){if(this.isHexOnly){if(t)return new ArrayBuffer(this.valueHexView.byteLength);let r=this.valueHexView,a=new Uint8Array(this.blockLength);for(let t=0;t<this.blockLength-1;t++)a[t]=128|r[t];return a[this.blockLength-1]=r[this.blockLength-1],a.buffer}let r=s.utilToBase(this.valueDec,7);if(0===r.byteLength)return this.error="Error during encoding SID value",h;let a=new Uint8Array(r.byteLength);if(!t){let t=new Uint8Array(r),n=r.byteLength-1;for(let r=0;r<n;r++)a[r]=128|t[r];a[n]=t[n]}return a}toString(){let t="";if(this.isHexOnly)t=i.Convert.ToHex(this.valueHexView);else if(this.isFirstSid){let r=this.valueDec;this.valueDec<=39?t="0.":this.valueDec<=79?(t="1.",r-=40):(t="2.",r-=80),t+=r.toString()}else t=this.valueDec.toString();return t}toJSON(){return{...super.toJSON(),valueDec:this.valueDec,isFirstSid:this.isFirstSid}}};LocalSidValueBlock.NAME="sidBlock";let LocalObjectIdentifierValueBlock=class LocalObjectIdentifierValueBlock extends ValueBlock{constructor({value:t="",...r}={}){super(r),this.value=[],t&&this.fromString(t)}fromBER(t,r,a){let n=r;for(;a>0;){let r=new LocalSidValueBlock;if(-1===(n=r.fromBER(t,n,a))){this.blockLength=0,this.error=r.error;break}0===this.value.length&&(r.isFirstSid=!0),this.blockLength+=r.blockLength,a-=r.blockLength,this.value.push(r)}return n}toBER(t){let r=[];for(let a=0;a<this.value.length;a++){let n=this.value[a].toBER(t);if(0===n.byteLength)return this.error=this.value[a].error,h;r.push(n)}return concat(r)}fromString(t){this.value=[];let r=0,a=0,n="",o=!1;do if(n=-1===(a=t.indexOf(".",r))?t.substring(r):t.substring(r,a),r=a+1,o){let t=this.value[0],r=0;switch(t.valueDec){case 0:break;case 1:r=40;break;case 2:r=80;break;default:this.value=[];return}let a=parseInt(n,10);if(isNaN(a))return;t.valueDec=a+r,o=!1}else{let t=new LocalSidValueBlock;if(n>Number.MAX_SAFE_INTEGER){assertBigInt();let r=BigInt(n);t.valueBigInt=r}else if(t.valueDec=parseInt(n,10),isNaN(t.valueDec))return;this.value.length||(t.isFirstSid=!0,o=!0),this.value.push(t)}while(-1!==a)}toString(){let t="",r=!1;for(let a=0;a<this.value.length;a++){r=this.value[a].isHexOnly;let n=this.value[a].toString();0!==a&&(t=`${t}.`),r?(n=`{${n}}`,this.value[a].isFirstSid?t=`2.{${n} - 80}`:t+=n):t+=n}return t}toJSON(){let t={...super.toJSON(),value:this.toString(),sidArray:[]};for(let r=0;r<this.value.length;r++)t.sidArray.push(this.value[r].toJSON());return t}};LocalObjectIdentifierValueBlock.NAME="ObjectIdentifierValueBlock";let ObjectIdentifier=class ObjectIdentifier extends BaseBlock{constructor(t={}){super(t,LocalObjectIdentifierValueBlock),this.idBlock.tagClass=1,this.idBlock.tagNumber=6}getValue(){return this.valueBlock.toString()}setValue(t){this.valueBlock.fromString(t)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()||"empty"}`}toJSON(){return{...super.toJSON(),value:this.getValue()}}};b.ObjectIdentifier=ObjectIdentifier,ObjectIdentifier.NAME="OBJECT IDENTIFIER";let LocalRelativeSidValueBlock=class LocalRelativeSidValueBlock extends HexBlock(LocalBaseBlock){constructor({valueDec:t=0,...r}={}){super(r),this.valueDec=t}fromBER(t,r,a){if(0===a)return r;let n=i.BufferSourceConverter.toUint8Array(t);if(!checkBufferParams(this,n,r,a))return -1;let o=n.subarray(r,r+a);this.valueHexView=new Uint8Array(a);for(let t=0;t<a&&(this.valueHexView[t]=127&o[t],this.blockLength++,(128&o[t])!=0);t++);let l=new Uint8Array(this.blockLength);for(let t=0;t<this.blockLength;t++)l[t]=this.valueHexView[t];return(this.valueHexView=l,(128&o[this.blockLength-1])!=0)?(this.error="End of input reached before message was fully decoded",-1):(0===this.valueHexView[0]&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=s.utilFromBase(this.valueHexView,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),r+this.blockLength)}toBER(t){if(this.isHexOnly){if(t)return new ArrayBuffer(this.valueHexView.byteLength);let r=this.valueHexView,a=new Uint8Array(this.blockLength);for(let t=0;t<this.blockLength-1;t++)a[t]=128|r[t];return a[this.blockLength-1]=r[this.blockLength-1],a.buffer}let r=s.utilToBase(this.valueDec,7);if(0===r.byteLength)return this.error="Error during encoding SID value",h;let a=new Uint8Array(r.byteLength);if(!t){let t=new Uint8Array(r),n=r.byteLength-1;for(let r=0;r<n;r++)a[r]=128|t[r];a[n]=t[n]}return a.buffer}toString(){return this.isHexOnly?i.Convert.ToHex(this.valueHexView):this.valueDec.toString()}toJSON(){return{...super.toJSON(),valueDec:this.valueDec}}};LocalRelativeSidValueBlock.NAME="relativeSidBlock";let LocalRelativeObjectIdentifierValueBlock=class LocalRelativeObjectIdentifierValueBlock extends ValueBlock{constructor({value:t="",...r}={}){super(r),this.value=[],t&&this.fromString(t)}fromBER(t,r,a){let n=r;for(;a>0;){let r=new LocalRelativeSidValueBlock;if(-1===(n=r.fromBER(t,n,a))){this.blockLength=0,this.error=r.error;break}this.blockLength+=r.blockLength,a-=r.blockLength,this.value.push(r)}return n}toBER(t,r){let a=[];for(let r=0;r<this.value.length;r++){let n=this.value[r].toBER(t);if(0===n.byteLength)return this.error=this.value[r].error,h;a.push(n)}return concat(a)}fromString(t){this.value=[];let r=0,a=0,n="";do{n=-1===(a=t.indexOf(".",r))?t.substring(r):t.substring(r,a),r=a+1;let o=new LocalRelativeSidValueBlock;if(o.valueDec=parseInt(n,10),isNaN(o.valueDec))break;this.value.push(o)}while(-1!==a);return!0}toString(){let t="",r=!1;for(let a=0;a<this.value.length;a++){r=this.value[a].isHexOnly;let n=this.value[a].toString();0!==a&&(t=`${t}.`),r?t+=n=`{${n}}`:t+=n}return t}toJSON(){let t={...super.toJSON(),value:this.toString(),sidArray:[]};for(let r=0;r<this.value.length;r++)t.sidArray.push(this.value[r].toJSON());return t}};LocalRelativeObjectIdentifierValueBlock.NAME="RelativeObjectIdentifierValueBlock";let RelativeObjectIdentifier=class RelativeObjectIdentifier extends BaseBlock{constructor(t={}){super(t,LocalRelativeObjectIdentifierValueBlock),this.idBlock.tagClass=1,this.idBlock.tagNumber=13}getValue(){return this.valueBlock.toString()}setValue(t){this.valueBlock.fromString(t)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()||"empty"}`}toJSON(){return{...super.toJSON(),value:this.getValue()}}};b.RelativeObjectIdentifier=RelativeObjectIdentifier,RelativeObjectIdentifier.NAME="RelativeObjectIdentifier";let Sequence=class Sequence extends Constructed{constructor(t={}){super(t),this.idBlock.tagClass=1,this.idBlock.tagNumber=16}};b.Sequence=Sequence,Sequence.NAME="SEQUENCE";let Set=class Set extends Constructed{constructor(t={}){super(t),this.idBlock.tagClass=1,this.idBlock.tagNumber=17}};b.Set=Set,Set.NAME="SET";let LocalStringValueBlock=class LocalStringValueBlock extends HexBlock(ValueBlock){constructor({...t}={}){super(t),this.isHexOnly=!0,this.value=""}toJSON(){return{...super.toJSON(),value:this.value}}};LocalStringValueBlock.NAME="StringValueBlock";let LocalSimpleStringValueBlock=class LocalSimpleStringValueBlock extends LocalStringValueBlock{};LocalSimpleStringValueBlock.NAME="SimpleStringValueBlock";let LocalSimpleStringBlock=class LocalSimpleStringBlock extends BaseStringBlock{constructor({...t}={}){super(t,LocalSimpleStringValueBlock)}fromBuffer(t){this.valueBlock.value=String.fromCharCode.apply(null,i.BufferSourceConverter.toUint8Array(t))}fromString(t){let r=t.length,a=this.valueBlock.valueHexView=new Uint8Array(r);for(let n=0;n<r;n++)a[n]=t.charCodeAt(n);this.valueBlock.value=t}};LocalSimpleStringBlock.NAME="SIMPLE STRING";let LocalUtf8StringValueBlock=class LocalUtf8StringValueBlock extends LocalSimpleStringBlock{fromBuffer(t){this.valueBlock.valueHexView=i.BufferSourceConverter.toUint8Array(t);try{this.valueBlock.value=i.Convert.ToUtf8String(t)}catch(r){this.warnings.push(`Error during "decodeURIComponent": ${r}, using raw string`),this.valueBlock.value=i.Convert.ToBinary(t)}}fromString(t){this.valueBlock.valueHexView=new Uint8Array(i.Convert.FromUtf8String(t)),this.valueBlock.value=t}};LocalUtf8StringValueBlock.NAME="Utf8StringValueBlock";let Utf8String=class Utf8String extends LocalUtf8StringValueBlock{constructor(t={}){super(t),this.idBlock.tagClass=1,this.idBlock.tagNumber=12}};b.Utf8String=Utf8String,Utf8String.NAME="UTF8String";let LocalBmpStringValueBlock=class LocalBmpStringValueBlock extends LocalSimpleStringBlock{fromBuffer(t){this.valueBlock.value=i.Convert.ToUtf16String(t),this.valueBlock.valueHexView=i.BufferSourceConverter.toUint8Array(t)}fromString(t){this.valueBlock.value=t,this.valueBlock.valueHexView=new Uint8Array(i.Convert.FromUtf16String(t))}};LocalBmpStringValueBlock.NAME="BmpStringValueBlock";let BmpString=class BmpString extends LocalBmpStringValueBlock{constructor({...t}={}){super(t),this.idBlock.tagClass=1,this.idBlock.tagNumber=30}};b.BmpString=BmpString,BmpString.NAME="BMPString";let LocalUniversalStringValueBlock=class LocalUniversalStringValueBlock extends LocalSimpleStringBlock{fromBuffer(t){let r=ArrayBuffer.isView(t)?t.slice().buffer:t.slice(0),a=new Uint8Array(r);for(let t=0;t<a.length;t+=4)a[t]=a[t+3],a[t+1]=a[t+2],a[t+2]=0,a[t+3]=0;this.valueBlock.value=String.fromCharCode.apply(null,new Uint32Array(r))}fromString(t){let r=t.length,a=this.valueBlock.valueHexView=new Uint8Array(4*r);for(let n=0;n<r;n++){let r=s.utilToBase(t.charCodeAt(n),8),o=new Uint8Array(r);if(o.length>4)continue;let i=4-o.length;for(let t=o.length-1;t>=0;t--)a[4*n+t+i]=o[t]}this.valueBlock.value=t}};LocalUniversalStringValueBlock.NAME="UniversalStringValueBlock";let UniversalString=class UniversalString extends LocalUniversalStringValueBlock{constructor({...t}={}){super(t),this.idBlock.tagClass=1,this.idBlock.tagNumber=28}};b.UniversalString=UniversalString,UniversalString.NAME="UniversalString";let NumericString=class NumericString extends LocalSimpleStringBlock{constructor(t={}){super(t),this.idBlock.tagClass=1,this.idBlock.tagNumber=18}};b.NumericString=NumericString,NumericString.NAME="NumericString";let PrintableString=class PrintableString extends LocalSimpleStringBlock{constructor(t={}){super(t),this.idBlock.tagClass=1,this.idBlock.tagNumber=19}};b.PrintableString=PrintableString,PrintableString.NAME="PrintableString";let TeletexString=class TeletexString extends LocalSimpleStringBlock{constructor(t={}){super(t),this.idBlock.tagClass=1,this.idBlock.tagNumber=20}};b.TeletexString=TeletexString,TeletexString.NAME="TeletexString";let VideotexString=class VideotexString extends LocalSimpleStringBlock{constructor(t={}){super(t),this.idBlock.tagClass=1,this.idBlock.tagNumber=21}};b.VideotexString=VideotexString,VideotexString.NAME="VideotexString";let IA5String=class IA5String extends LocalSimpleStringBlock{constructor(t={}){super(t),this.idBlock.tagClass=1,this.idBlock.tagNumber=22}};b.IA5String=IA5String,IA5String.NAME="IA5String";let GraphicString=class GraphicString extends LocalSimpleStringBlock{constructor(t={}){super(t),this.idBlock.tagClass=1,this.idBlock.tagNumber=25}};b.GraphicString=GraphicString,GraphicString.NAME="GraphicString";let VisibleString=class VisibleString extends LocalSimpleStringBlock{constructor(t={}){super(t),this.idBlock.tagClass=1,this.idBlock.tagNumber=26}};b.VisibleString=VisibleString,VisibleString.NAME="VisibleString";let GeneralString=class GeneralString extends LocalSimpleStringBlock{constructor(t={}){super(t),this.idBlock.tagClass=1,this.idBlock.tagNumber=27}};b.GeneralString=GeneralString,GeneralString.NAME="GeneralString";let CharacterString=class CharacterString extends LocalSimpleStringBlock{constructor(t={}){super(t),this.idBlock.tagClass=1,this.idBlock.tagNumber=29}};b.CharacterString=CharacterString,CharacterString.NAME="CharacterString";let UTCTime=class UTCTime extends VisibleString{constructor({value:t,valueDate:r,...a}={}){if(super(a),this.year=0,this.month=0,this.day=0,this.hour=0,this.minute=0,this.second=0,t){this.fromString(t),this.valueBlock.valueHexView=new Uint8Array(t.length);for(let r=0;r<t.length;r++)this.valueBlock.valueHexView[r]=t.charCodeAt(r)}r&&(this.fromDate(r),this.valueBlock.valueHexView=new Uint8Array(this.toBuffer())),this.idBlock.tagClass=1,this.idBlock.tagNumber=23}fromBuffer(t){this.fromString(String.fromCharCode.apply(null,i.BufferSourceConverter.toUint8Array(t)))}toBuffer(){let t=this.toString(),r=new ArrayBuffer(t.length),a=new Uint8Array(r);for(let r=0;r<t.length;r++)a[r]=t.charCodeAt(r);return r}fromDate(t){this.year=t.getUTCFullYear(),this.month=t.getUTCMonth()+1,this.day=t.getUTCDate(),this.hour=t.getUTCHours(),this.minute=t.getUTCMinutes(),this.second=t.getUTCSeconds()}toDate(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second))}fromString(t){let r=/(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})Z/ig.exec(t);if(null===r){this.error="Wrong input string for conversion";return}let a=parseInt(r[1],10);a>=50?this.year=1900+a:this.year=2e3+a,this.month=parseInt(r[2],10),this.day=parseInt(r[3],10),this.hour=parseInt(r[4],10),this.minute=parseInt(r[5],10),this.second=parseInt(r[6],10)}toString(t="iso"){if("iso"===t){let t=Array(7);return t[0]=s.padNumber(this.year<2e3?this.year-1900:this.year-2e3,2),t[1]=s.padNumber(this.month,2),t[2]=s.padNumber(this.day,2),t[3]=s.padNumber(this.hour,2),t[4]=s.padNumber(this.minute,2),t[5]=s.padNumber(this.second,2),t[6]="Z",t.join("")}return super.toString(t)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.toDate().toISOString()}`}toJSON(){return{...super.toJSON(),year:this.year,month:this.month,day:this.day,hour:this.hour,minute:this.minute,second:this.second}}};b.UTCTime=UTCTime,UTCTime.NAME="UTCTime";let GeneralizedTime=class GeneralizedTime extends UTCTime{constructor(t={}){var r;super(t),null!==(r=this.millisecond)&&void 0!==r||(this.millisecond=0),this.idBlock.tagClass=1,this.idBlock.tagNumber=24}fromDate(t){super.fromDate(t),this.millisecond=t.getUTCMilliseconds()}toDate(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond))}fromString(t){let r,a=!1,n="",o="",i=0,s=0,l=0;if("Z"===t[t.length-1])n=t.substring(0,t.length-1),a=!0;else{let r=new Number(t[t.length-1]);if(isNaN(r.valueOf()))throw Error("Wrong input string for conversion");n=t}if(a){if(-1!==n.indexOf("+")||-1!==n.indexOf("-"))throw Error("Wrong input string for conversion")}else{let t=1,r=n.indexOf("+"),a="";if(-1===r&&(r=n.indexOf("-"),t=-1),-1!==r){if(a=n.substring(r+1),n=n.substring(0,r),2!==a.length&&4!==a.length)throw Error("Wrong input string for conversion");let o=parseInt(a.substring(0,2),10);if(isNaN(o.valueOf()))throw Error("Wrong input string for conversion");if(s=t*o,4===a.length){if(isNaN((o=parseInt(a.substring(2,4),10)).valueOf()))throw Error("Wrong input string for conversion");l=t*o}}}let u=n.indexOf(".");if(-1===u&&(u=n.indexOf(",")),-1!==u){let t=new Number(`0${n.substring(u)}`);if(isNaN(t.valueOf()))throw Error("Wrong input string for conversion");i=t.valueOf(),o=n.substring(0,u)}else o=n;switch(!0){case 8===o.length:if(r=/(\d{4})(\d{2})(\d{2})/ig,-1!==u)throw Error("Wrong input string for conversion");break;case 10===o.length:if(r=/(\d{4})(\d{2})(\d{2})(\d{2})/ig,-1!==u){let t=60*i;this.minute=Math.floor(t),t=60*(t-this.minute),this.second=Math.floor(t),t=1e3*(t-this.second),this.millisecond=Math.floor(t)}break;case 12===o.length:if(r=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})/ig,-1!==u){let t=60*i;this.second=Math.floor(t),t=1e3*(t-this.second),this.millisecond=Math.floor(t)}break;case 14===o.length:if(r=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})/ig,-1!==u){let t=1e3*i;this.millisecond=Math.floor(t)}break;default:throw Error("Wrong input string for conversion")}let c=r.exec(o);if(null===c)throw Error("Wrong input string for conversion");for(let t=1;t<c.length;t++)switch(t){case 1:this.year=parseInt(c[t],10);break;case 2:this.month=parseInt(c[t],10);break;case 3:this.day=parseInt(c[t],10);break;case 4:this.hour=parseInt(c[t],10)+s;break;case 5:this.minute=parseInt(c[t],10)+l;break;case 6:this.second=parseInt(c[t],10);break;default:throw Error("Wrong input string for conversion")}if(!1===a){let t=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second,this.millisecond);this.year=t.getUTCFullYear(),this.month=t.getUTCMonth(),this.day=t.getUTCDay(),this.hour=t.getUTCHours(),this.minute=t.getUTCMinutes(),this.second=t.getUTCSeconds(),this.millisecond=t.getUTCMilliseconds()}}toString(t="iso"){if("iso"===t){let t=[];return t.push(s.padNumber(this.year,4)),t.push(s.padNumber(this.month,2)),t.push(s.padNumber(this.day,2)),t.push(s.padNumber(this.hour,2)),t.push(s.padNumber(this.minute,2)),t.push(s.padNumber(this.second,2)),0!==this.millisecond&&(t.push("."),t.push(s.padNumber(this.millisecond,3))),t.push("Z"),t.join("")}return super.toString(t)}toJSON(){return{...super.toJSON(),millisecond:this.millisecond}}};b.GeneralizedTime=GeneralizedTime,GeneralizedTime.NAME="GeneralizedTime";let DATE=class DATE extends Utf8String{constructor(t={}){super(t),this.idBlock.tagClass=1,this.idBlock.tagNumber=31}};b.DATE=DATE,DATE.NAME="DATE";let TimeOfDay=class TimeOfDay extends Utf8String{constructor(t={}){super(t),this.idBlock.tagClass=1,this.idBlock.tagNumber=32}};b.TimeOfDay=TimeOfDay,TimeOfDay.NAME="TimeOfDay";let DateTime=class DateTime extends Utf8String{constructor(t={}){super(t),this.idBlock.tagClass=1,this.idBlock.tagNumber=33}};b.DateTime=DateTime,DateTime.NAME="DateTime";let Duration=class Duration extends Utf8String{constructor(t={}){super(t),this.idBlock.tagClass=1,this.idBlock.tagNumber=34}};b.Duration=Duration,Duration.NAME="Duration";let TIME=class TIME extends Utf8String{constructor(t={}){super(t),this.idBlock.tagClass=1,this.idBlock.tagNumber=14}};b.TIME=TIME,TIME.NAME="TIME";let Any=class Any{constructor({name:t="",optional:r=!1}={}){this.name=t,this.optional=r}};let Choice=class Choice extends Any{constructor({value:t=[],...r}={}){super(r),this.value=t}};let Repeated=class Repeated extends Any{constructor({value:t=new Any,local:r=!1,...a}={}){super(a),this.value=t,this.local=r}};function compareSchema(t,r,a){if(a instanceof Choice){for(let n=0;n<a.value.length;n++){let o=compareSchema(t,r,a.value[n]);if(o.verified)return{verified:!0,result:t}}{let t={verified:!1,result:{error:"Wrong values for Choice type"}};return a.hasOwnProperty(c)&&(t.name=a.name),t}}if(a instanceof Any)return a.hasOwnProperty(c)&&(t[a.name]=r),{verified:!0,result:t};if(t instanceof Object==!1)return{verified:!1,result:{error:"Wrong root object"}};if(r instanceof Object==!1)return{verified:!1,result:{error:"Wrong ASN.1 data"}};if(a instanceof Object==!1||"idBlock"in a==!1||"fromBER"in a.idBlock==!1||"toBER"in a.idBlock==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};let n=a.idBlock.toBER(!1);if(0===n.byteLength)return{verified:!1,result:{error:"Error encoding idBlock for ASN.1 schema"}};let o=a.idBlock.fromBER(n,0,n.byteLength);if(-1===o)return{verified:!1,result:{error:"Error decoding idBlock for ASN.1 schema"}};if(!1===a.idBlock.hasOwnProperty("tagClass"))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(a.idBlock.tagClass!==r.idBlock.tagClass)return{verified:!1,result:t};if(!1===a.idBlock.hasOwnProperty("tagNumber"))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(a.idBlock.tagNumber!==r.idBlock.tagNumber)return{verified:!1,result:t};if(!1===a.idBlock.hasOwnProperty("isConstructed"))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(a.idBlock.isConstructed!==r.idBlock.isConstructed)return{verified:!1,result:t};if(!("isHexOnly"in a.idBlock))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(a.idBlock.isHexOnly!==r.idBlock.isHexOnly)return{verified:!1,result:t};if(a.idBlock.isHexOnly){if(d in a.idBlock==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};let n=a.idBlock.valueHexView,o=r.idBlock.valueHexView;if(n.length!==o.length)return{verified:!1,result:t};for(let r=0;r<n.length;r++)if(n[r]!==o[1])return{verified:!1,result:t}}if(a.name&&(a.name=a.name.replace(/^\s+|\s+$/g,""),a.name&&(t[a.name]=r)),a instanceof b.Constructed){let n=0,o={verified:!1,result:{error:"Unknown error"}},i=a.valueBlock.value.length;if(i>0&&a.valueBlock.value[0]instanceof Repeated&&(i=r.valueBlock.value.length),0===i)return{verified:!0,result:t};if(0===r.valueBlock.value.length&&0!==a.valueBlock.value.length){let r=!0;for(let t=0;t<a.valueBlock.value.length;t++)r=r&&(a.valueBlock.value[t].optional||!1);return r?{verified:!0,result:t}:(a.name&&(a.name=a.name.replace(/^\s+|\s+$/g,""),a.name&&delete t[a.name]),t.error="Inconsistent object length",{verified:!1,result:t})}for(let s=0;s<i;s++)if(s-n>=r.valueBlock.value.length){if(!1===a.valueBlock.value[s].optional){let r={verified:!1,result:t};return t.error="Inconsistent length between ASN.1 data and schema",a.name&&(a.name=a.name.replace(/^\s+|\s+$/g,""),a.name&&(delete t[a.name],r.name=a.name)),r}}else if(a.valueBlock.value[0]instanceof Repeated){if(!1===(o=compareSchema(t,r.valueBlock.value[s],a.valueBlock.value[0].value)).verified){if(!a.valueBlock.value[0].optional)return a.name&&(a.name=a.name.replace(/^\s+|\s+$/g,""),a.name&&delete t[a.name]),o;n++}if(c in a.valueBlock.value[0]&&a.valueBlock.value[0].name.length>0){let n={};void 0===(n="local"in a.valueBlock.value[0]&&a.valueBlock.value[0].local?r:t)[a.valueBlock.value[0].name]&&(n[a.valueBlock.value[0].name]=[]),n[a.valueBlock.value[0].name].push(r.valueBlock.value[s])}}else if(!1===(o=compareSchema(t,r.valueBlock.value[s-n],a.valueBlock.value[s])).verified){if(!a.valueBlock.value[s].optional)return a.name&&(a.name=a.name.replace(/^\s+|\s+$/g,""),a.name&&delete t[a.name]),o;n++}if(!1===o.verified){let r={verified:!1,result:t};return a.name&&(a.name=a.name.replace(/^\s+|\s+$/g,""),a.name&&(delete t[a.name],r.name=a.name)),r}return{verified:!0,result:t}}if(a.primitiveSchema&&d in r.valueBlock){let n=localFromBER(r.valueBlock.valueHexView);if(-1===n.offset){let r={verified:!1,result:n.result};return a.name&&(a.name=a.name.replace(/^\s+|\s+$/g,""),a.name&&(delete t[a.name],r.name=a.name)),r}return compareSchema(t,n.result,a.primitiveSchema)}return{verified:!0,result:t}}r.Any=Any,r.BaseBlock=BaseBlock,r.BaseStringBlock=BaseStringBlock,r.BitString=BitString,r.BmpString=BmpString,r.Boolean=Boolean,r.CharacterString=CharacterString,r.Choice=Choice,r.Constructed=Constructed,r.DATE=DATE,r.DateTime=DateTime,r.Duration=Duration,r.EndOfContent=EndOfContent,r.Enumerated=Enumerated,r.GeneralString=GeneralString,r.GeneralizedTime=GeneralizedTime,r.GraphicString=GraphicString,r.HexBlock=HexBlock,r.IA5String=IA5String,r.Integer=Integer,r.Null=Null,r.NumericString=NumericString,r.ObjectIdentifier=ObjectIdentifier,r.OctetString=OctetString,r.Primitive=Primitive,r.PrintableString=PrintableString,r.RawData=class{constructor({data:t=p}={}){this.dataView=i.BufferSourceConverter.toUint8Array(t)}get data(){return this.dataView.slice().buffer}set data(t){this.dataView=i.BufferSourceConverter.toUint8Array(t)}fromBER(t,r,a){let n=r+a;return this.dataView=i.BufferSourceConverter.toUint8Array(t).subarray(r,n),n}toBER(t){return this.dataView.slice().buffer}},r.RelativeObjectIdentifier=RelativeObjectIdentifier,r.Repeated=Repeated,r.Sequence=Sequence,r.Set=Set,r.TIME=TIME,r.TeletexString=TeletexString,r.TimeOfDay=TimeOfDay,r.UTCTime=UTCTime,r.UniversalString=UniversalString,r.Utf8String=Utf8String,r.ValueBlock=ValueBlock,r.VideotexString=VideotexString,r.ViewWriter=ViewWriter,r.VisibleString=VisibleString,r.compareSchema=compareSchema,r.fromBER=function(t){if(!t.byteLength){let t=new BaseBlock({},ValueBlock);return t.error="Input buffer has zero length",{offset:-1,result:t}}return localFromBER(i.BufferSourceConverter.toUint8Array(t).slice(),0,t.byteLength)},r.verifySchema=function(t,r){if(r instanceof Object==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema type"}};let a=localFromBER(i.BufferSourceConverter.toUint8Array(t));return -1===a.offset?{verified:!1,result:a.result}:compareSchema(a.result,a.result,r)}},50002:(t,r)=>{/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */r.parse=function(t,r){if("string"!=typeof t)throw TypeError("argument str must be a string");for(var a={},n=(r||{}).decode||decode,o=0;o<t.length;){var i=t.indexOf("=",o);if(-1===i)break;var s=t.indexOf(";",o);if(-1===s)s=t.length;else if(s<i){o=t.lastIndexOf(";",i-1)+1;continue}var l=t.slice(o,i).trim();if(void 0===a[l]){var u=t.slice(i+1,s).trim();34===u.charCodeAt(0)&&(u=u.slice(1,-1)),a[l]=function(t,r){try{return r(t)}catch(r){return t}}(u,n)}o=s+1}return a},r.serialize=function(t,r,o){var i=o||{},s=i.encode||encode;if("function"!=typeof s)throw TypeError("option encode is invalid");if(!n.test(t))throw TypeError("argument name is invalid");var l=s(r);if(l&&!n.test(l))throw TypeError("argument val is invalid");var u=t+"="+l;if(null!=i.maxAge){var c=i.maxAge-0;if(isNaN(c)||!isFinite(c))throw TypeError("option maxAge is invalid");u+="; Max-Age="+Math.floor(c)}if(i.domain){if(!n.test(i.domain))throw TypeError("option domain is invalid");u+="; Domain="+i.domain}if(i.path){if(!n.test(i.path))throw TypeError("option path is invalid");u+="; Path="+i.path}if(i.expires){var d=i.expires;if("[object Date]"!==a.call(d)&&!(d instanceof Date)||isNaN(d.valueOf()))throw TypeError("option expires is invalid");u+="; Expires="+d.toUTCString()}if(i.httpOnly&&(u+="; HttpOnly"),i.secure&&(u+="; Secure"),i.priority)switch("string"==typeof i.priority?i.priority.toLowerCase():i.priority){case"low":u+="; Priority=Low";break;case"medium":u+="; Priority=Medium";break;case"high":u+="; Priority=High";break;default:throw TypeError("option priority is invalid")}if(i.sameSite)switch("string"==typeof i.sameSite?i.sameSite.toLowerCase():i.sameSite){case!0:case"strict":u+="; SameSite=Strict";break;case"lax":u+="; SameSite=Lax";break;case"none":u+="; SameSite=None";break;default:throw TypeError("option sameSite is invalid")}return u};var a=Object.prototype.toString,n=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function decode(t){return -1!==t.indexOf("%")?decodeURIComponent(t):t}function encode(t){return encodeURIComponent(t)}},76196:t=>{var isMergeableObject=function(t){var a;return!!t&&"object"==typeof t&&"[object RegExp]"!==(a=Object.prototype.toString.call(t))&&"[object Date]"!==a&&t.$$typeof!==r},r="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function cloneUnlessOtherwiseSpecified(t,r){return!1!==r.clone&&r.isMergeableObject(t)?deepmerge(Array.isArray(t)?[]:{},t,r):t}function defaultArrayMerge(t,r,a){return t.concat(r).map(function(t){return cloneUnlessOtherwiseSpecified(t,a)})}function getKeys(t){return Object.keys(t).concat(Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter(function(r){return t.propertyIsEnumerable(r)}):[])}function propertyIsOnObject(t,r){try{return r in t}catch(t){return!1}}function deepmerge(t,r,a){(a=a||{}).arrayMerge=a.arrayMerge||defaultArrayMerge,a.isMergeableObject=a.isMergeableObject||isMergeableObject,a.cloneUnlessOtherwiseSpecified=cloneUnlessOtherwiseSpecified;var n,o,i=Array.isArray(r);return i!==Array.isArray(t)?cloneUnlessOtherwiseSpecified(r,a):i?a.arrayMerge(t,r,a):(o={},(n=a).isMergeableObject(t)&&getKeys(t).forEach(function(r){o[r]=cloneUnlessOtherwiseSpecified(t[r],n)}),getKeys(r).forEach(function(a){(!propertyIsOnObject(t,a)||Object.hasOwnProperty.call(t,a)&&Object.propertyIsEnumerable.call(t,a))&&(propertyIsOnObject(t,a)&&n.isMergeableObject(r[a])?o[a]=(function(t,r){if(!r.customMerge)return deepmerge;var a=r.customMerge(t);return"function"==typeof a?a:deepmerge})(a,n)(t[a],r[a],n):o[a]=cloneUnlessOtherwiseSpecified(r[a],n))}),o)}deepmerge.all=function(t,r){if(!Array.isArray(t))throw Error("first argument should be an array");return t.reduce(function(t,a){return deepmerge(t,a,r)},{})},t.exports=deepmerge},84639:(t,r,a)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.dotCase=void 0;var n=a(15803),o=a(29942);r.dotCase=function(t,r){return void 0===r&&(r={}),o.noCase(t,n.__assign({delimiter:"."},r))}},39998:(t,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.lowerCase=r.localeLowerCase=void 0;var a={tr:{regexp:/\u0130|\u0049|\u0049\u0307/g,map:{İ:"i",I:"ı",İ:"i"}},az:{regexp:/\u0130/g,map:{İ:"i",I:"ı",İ:"i"}},lt:{regexp:/\u0049|\u004A|\u012E|\u00CC|\u00CD|\u0128/g,map:{I:"i̇",J:"j̇",Į:"į̇",Ì:"i̇̀",Í:"i̇́",Ĩ:"i̇̃"}}};function lowerCase(t){return t.toLowerCase()}r.localeLowerCase=function(t,r){var n=a[r.toLowerCase()];return n?lowerCase(t.replace(n.regexp,function(t){return n.map[t]})):lowerCase(t)},r.lowerCase=lowerCase},50104:t=>{let isObject=t=>"object"==typeof t&&null!==t,r=Symbol("skip"),isObjectCustom=t=>isObject(t)&&!(t instanceof RegExp)&&!(t instanceof Error)&&!(t instanceof Date),mapObject=(t,a,n,o=new WeakMap)=>{if(n={deep:!1,target:{},...n},o.has(t))return o.get(t);o.set(t,n.target);let{target:i}=n;delete n.target;let mapArray=t=>t.map(t=>isObjectCustom(t)?mapObject(t,a,n,o):t);if(Array.isArray(t))return mapArray(t);for(let[s,l]of Object.entries(t)){let u=a(s,l,t);if(u===r)continue;let[c,d,{shouldRecurse:h=!0}={}]=u;"__proto__"!==c&&(n.deep&&h&&isObjectCustom(d)&&(d=Array.isArray(d)?mapArray(d):mapObject(d,a,n,o)),i[c]=d)}return i};t.exports=(t,r,a)=>{if(!isObject(t))throw TypeError(`Expected an object, got \`${t}\` (${typeof t})`);return mapObject(t,r,a)},t.exports.mapObjectSkip=r},17536:(t,r,a)=>{Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"createProxy",{enumerable:!0,get:function(){return o}});let n=a(51447),o=n.createClientModuleProxy},99406:(t,r,a)=>{Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"DraftMode",{enumerable:!0,get:function(){return DraftMode}});let n=a(45020);let DraftMode=class DraftMode{get isEnabled(){return this._provider.isEnabled}enable(){if(!(0,n.staticGenerationBailout)("draftMode().enable()"))return this._provider.enable()}disable(){if(!(0,n.staticGenerationBailout)("draftMode().disable()"))return this._provider.disable()}constructor(t){this._provider=t}};("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},78561:(t,r,a)=>{Object.defineProperty(r,"__esModule",{value:!0}),function(t,r){for(var a in r)Object.defineProperty(t,a,{enumerable:!0,get:r[a]})}(r,{headers:function(){return headers},cookies:function(){return cookies},draftMode:function(){return draftMode}});let n=a(9879),o=a(91749),i=a(93497),s=a(54580),l=a(72934),u=a(45020),c=a(99406);function headers(){if((0,u.staticGenerationBailout)("headers",{link:"https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering"}))return o.HeadersAdapter.seal(new Headers({}));let t=s.requestAsyncStorage.getStore();if(!t)throw Error("Invariant: headers() expects to have requestAsyncStorage, none available.");return t.headers}function cookies(){if((0,u.staticGenerationBailout)("cookies",{link:"https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering"}))return n.RequestCookiesAdapter.seal(new i.RequestCookies(new Headers({})));let t=s.requestAsyncStorage.getStore();if(!t)throw Error("Invariant: cookies() expects to have requestAsyncStorage, none available.");let r=l.actionAsyncStorage.getStore();return r&&(r.isAction||r.isAppRoute)?t.mutableCookies:t.cookies}function draftMode(){let t=s.requestAsyncStorage.getStore();if(!t)throw Error("Invariant: draftMode() expects to have requestAsyncStorage, none available.");return new c.DraftMode(t.draftMode)}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},5439:(t,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),function(t,r){for(var a in r)Object.defineProperty(t,a,{enumerable:!0,get:r[a]})}(r,{DYNAMIC_ERROR_CODE:function(){return a},DynamicServerError:function(){return DynamicServerError}});let a="DYNAMIC_SERVER_USAGE";let DynamicServerError=class DynamicServerError extends Error{constructor(t){super("Dynamic server usage: "+t),this.digest=a}};("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},45020:(t,r,a)=>{Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"staticGenerationBailout",{enumerable:!0,get:function(){return staticGenerationBailout}});let n=a(5439),o=a(45869);let StaticGenBailoutError=class StaticGenBailoutError extends Error{constructor(...t){super(...t),this.code="NEXT_STATIC_GEN_BAILOUT"}};function formatErrorMessage(t,r){let{dynamic:a,link:n}=r||{};return"Page"+(a?' with `dynamic = "'+a+'"`':"")+" couldn't be rendered statically because it used `"+t+"`."+(n?" See more info here: "+n:"")}let staticGenerationBailout=(t,r)=>{let a=o.staticGenerationAsyncStorage.getStore();if(null==a?void 0:a.forceStatic)return!0;if(null==a?void 0:a.dynamicShouldError){var i;throw new StaticGenBailoutError(formatErrorMessage(t,{...r,dynamic:null!=(i=null==r?void 0:r.dynamic)?i:"error"}))}if(!a||(a.revalidate=0,(null==r?void 0:r.dynamic)||(a.staticPrefetchBailout=!0)),null==a?void 0:a.isStaticGeneration){let o=new n.DynamicServerError(formatErrorMessage(t,{...r,link:"https://nextjs.org/docs/messages/dynamic-server-error"}));throw a.dynamicUsageDescription=t,a.dynamicUsageStack=o.stack,o}return!1};("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},55865:t=>{var r=Object.defineProperty,a=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,i={};function stringifyCookie(t){var r;let a=["path"in t&&t.path&&`Path=${t.path}`,"expires"in t&&(t.expires||0===t.expires)&&`Expires=${("number"==typeof t.expires?new Date(t.expires):t.expires).toUTCString()}`,"maxAge"in t&&"number"==typeof t.maxAge&&`Max-Age=${t.maxAge}`,"domain"in t&&t.domain&&`Domain=${t.domain}`,"secure"in t&&t.secure&&"Secure","httpOnly"in t&&t.httpOnly&&"HttpOnly","sameSite"in t&&t.sameSite&&`SameSite=${t.sameSite}`].filter(Boolean);return`${t.name}=${encodeURIComponent(null!=(r=t.value)?r:"")}; ${a.join("; ")}`}function parseCookie(t){let r=new Map;for(let a of t.split(/; */)){if(!a)continue;let t=a.indexOf("=");if(-1===t){r.set(a,"true");continue}let[n,o]=[a.slice(0,t),a.slice(t+1)];try{r.set(n,decodeURIComponent(null!=o?o:"true"))}catch{}}return r}function parseSetCookie(t){var r;if(!t)return;let[[a,n],...o]=parseCookie(t),{domain:i,expires:l,httponly:u,maxage:c,path:d,samesite:h,secure:p}=Object.fromEntries(o.map(([t,r])=>[t.toLowerCase(),r])),y={name:a,value:decodeURIComponent(n),domain:i,...l&&{expires:new Date(l)},...u&&{httpOnly:!0},..."string"==typeof c&&{maxAge:Number(c)},path:d,...h&&{sameSite:s.includes(r=(r=h).toLowerCase())?r:void 0},...p&&{secure:!0}};return function(t){let r={};for(let a in t)t[a]&&(r[a]=t[a]);return r}(y)}((t,a)=>{for(var n in a)r(t,n,{get:a[n],enumerable:!0})})(i,{RequestCookies:()=>l,ResponseCookies:()=>u,parseCookie:()=>parseCookie,parseSetCookie:()=>parseSetCookie,splitCookiesString:()=>splitCookiesString,stringifyCookie:()=>stringifyCookie}),t.exports=((t,i,s,l)=>{if(i&&"object"==typeof i||"function"==typeof i)for(let s of n(i))o.call(t,s)||void 0===s||r(t,s,{get:()=>i[s],enumerable:!(l=a(i,s))||l.enumerable});return t})(r({},"__esModule",{value:!0}),i);var s=["strict","lax","none"];function splitCookiesString(t){if(!t)return[];var r,a,n,o,i,s=[],l=0;function skipWhitespace(){for(;l<t.length&&/\s/.test(t.charAt(l));)l+=1;return l<t.length}for(;l<t.length;){for(r=l,i=!1;skipWhitespace();)if(","===(a=t.charAt(l))){for(n=l,l+=1,skipWhitespace(),o=l;l<t.length&&"="!==(a=t.charAt(l))&&";"!==a&&","!==a;)l+=1;l<t.length&&"="===t.charAt(l)?(i=!0,l=o,s.push(t.substring(r,n)),r=l):l=n+1}else l+=1;(!i||l>=t.length)&&s.push(t.substring(r,t.length))}return s}var l=class{constructor(t){this._parsed=new Map,this._headers=t;let r=t.get("cookie");if(r){let t=parseCookie(r);for(let[r,a]of t)this._parsed.set(r,{name:r,value:a})}}[Symbol.iterator](){return this._parsed[Symbol.iterator]()}get size(){return this._parsed.size}get(...t){let r="string"==typeof t[0]?t[0]:t[0].name;return this._parsed.get(r)}getAll(...t){var r;let a=Array.from(this._parsed);if(!t.length)return a.map(([t,r])=>r);let n="string"==typeof t[0]?t[0]:null==(r=t[0])?void 0:r.name;return a.filter(([t])=>t===n).map(([t,r])=>r)}has(t){return this._parsed.has(t)}set(...t){let[r,a]=1===t.length?[t[0].name,t[0].value]:t,n=this._parsed;return n.set(r,{name:r,value:a}),this._headers.set("cookie",Array.from(n).map(([t,r])=>stringifyCookie(r)).join("; ")),this}delete(t){let r=this._parsed,a=Array.isArray(t)?t.map(t=>r.delete(t)):r.delete(t);return this._headers.set("cookie",Array.from(r).map(([t,r])=>stringifyCookie(r)).join("; ")),a}clear(){return this.delete(Array.from(this._parsed.keys())),this}[Symbol.for("edge-runtime.inspect.custom")](){return`RequestCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`}toString(){return[...this._parsed.values()].map(t=>`${t.name}=${encodeURIComponent(t.value)}`).join("; ")}},u=class{constructor(t){var r;this._parsed=new Map,this._headers=t;let a=null==(r=t.getSetCookie)?void 0:r.call(t);t.get("set-cookie");let n=Array.isArray(a)?a:splitCookiesString(a);for(let t of n){let r=parseSetCookie(t);r&&this._parsed.set(r.name,r)}}get(...t){let r="string"==typeof t[0]?t[0]:t[0].name;return this._parsed.get(r)}getAll(...t){var r;let a=Array.from(this._parsed.values());if(!t.length)return a;let n="string"==typeof t[0]?t[0]:null==(r=t[0])?void 0:r.name;return a.filter(t=>t.name===n)}has(t){return this._parsed.has(t)}set(...t){let[r,a,n]=1===t.length?[t[0].name,t[0].value,t[0]]:t,o=this._parsed;return o.set(r,function(t={name:"",value:""}){return"number"==typeof t.expires&&(t.expires=new Date(t.expires)),t.maxAge&&(t.expires=new Date(Date.now()+1e3*t.maxAge)),(null===t.path||void 0===t.path)&&(t.path="/"),t}({name:r,value:a,...n})),function(t,r){for(let[,a]of(r.delete("set-cookie"),t)){let t=stringifyCookie(a);r.append("set-cookie",t)}}(o,this._headers),this}delete(...t){let[r,a,n]="string"==typeof t[0]?[t[0]]:[t[0].name,t[0].path,t[0].domain];return this.set({name:r,path:a,domain:n,value:"",expires:new Date(0)})}[Symbol.for("edge-runtime.inspect.custom")](){return`ResponseCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`}toString(){return[...this._parsed.values()].map(stringifyCookie).join("; ")}}},54647:(t,r)=>{var a;Object.defineProperty(r,"x",{enumerable:!0,get:function(){return a}}),function(t){t.PAGES="PAGES",t.PAGES_API="PAGES_API",t.APP_PAGE="APP_PAGE",t.APP_ROUTE="APP_ROUTE"}(a||(a={}))},73137:(t,r,a)=>{t.exports=a(20399)},51447:(t,r,a)=>{t.exports=a(73137).vendored["react-rsc"].ReactServerDOMWebpackServerEdge},53830:(t,r,a)=>{t.exports=a(73137).vendored["react-rsc"].React},1468:(t,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),function(t,r){for(var a in r)Object.defineProperty(t,a,{enumerable:!0,get:r[a]})}(r,{PageSignatureError:function(){return PageSignatureError},RemovedPageError:function(){return RemovedPageError},RemovedUAError:function(){return RemovedUAError}});let PageSignatureError=class PageSignatureError extends Error{constructor({page:t}){super(`The middleware "${t}" accepts an async API directly with the form:
  
  export function middleware(request, event) {
    return NextResponse.redirect('/new-location')
  }
  
  Read more: https://nextjs.org/docs/messages/middleware-new-signature
  `)}};let RemovedPageError=class RemovedPageError extends Error{constructor(){super(`The request.page has been deprecated in favour of \`URLPattern\`.
  Read more: https://nextjs.org/docs/messages/middleware-request-page
  `)}};let RemovedUAError=class RemovedUAError extends Error{constructor(){super(`The request.ua has been removed in favour of \`userAgent\` function.
  Read more: https://nextjs.org/docs/messages/middleware-parse-user-agent
  `)}}},32160:(t,r,a)=>{Object.defineProperty(r,"Z",{enumerable:!0,get:function(){return n.NextRequest}});let n=a(37021)},66886:(t,r,a)=>{Object.defineProperty(r,"Z",{enumerable:!0,get:function(){return n.NextResponse}});let n=a(60177)},65973:(t,r,a)=>{Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"NextURL",{enumerable:!0,get:function(){return NextURL}});let n=a(79048),o=a(56286),i=a(23249),s=a(44316),l=/(?!^https?:\/\/)(127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}|\[::1\]|localhost)/;function parseURL(t,r){return new URL(String(t).replace(l,"localhost"),r&&String(r).replace(l,"localhost"))}let u=Symbol("NextURLInternal");let NextURL=class NextURL{constructor(t,r,a){let n,o;"object"==typeof r&&"pathname"in r||"string"==typeof r?(n=r,o=a||{}):o=a||r||{},this[u]={url:parseURL(t,n??o.base),options:o,basePath:""},this.analyze()}analyze(){var t,r,a,o,l;let c=(0,s.getNextPathnameInfo)(this[u].url.pathname,{nextConfig:this[u].options.nextConfig,parseData:!0,i18nProvider:this[u].options.i18nProvider}),d=(0,i.getHostname)(this[u].url,this[u].options.headers);this[u].domainLocale=this[u].options.i18nProvider?this[u].options.i18nProvider.detectDomainLocale(d):(0,n.detectDomainLocale)(null==(r=this[u].options.nextConfig)?void 0:null==(t=r.i18n)?void 0:t.domains,d);let h=(null==(a=this[u].domainLocale)?void 0:a.defaultLocale)||(null==(l=this[u].options.nextConfig)?void 0:null==(o=l.i18n)?void 0:o.defaultLocale);this[u].url.pathname=c.pathname,this[u].defaultLocale=h,this[u].basePath=c.basePath??"",this[u].buildId=c.buildId,this[u].locale=c.locale??h,this[u].trailingSlash=c.trailingSlash}formatPathname(){return(0,o.formatNextPathnameInfo)({basePath:this[u].basePath,buildId:this[u].buildId,defaultLocale:this[u].options.forceLocale?void 0:this[u].defaultLocale,locale:this[u].locale,pathname:this[u].url.pathname,trailingSlash:this[u].trailingSlash})}formatSearch(){return this[u].url.search}get buildId(){return this[u].buildId}set buildId(t){this[u].buildId=t}get locale(){return this[u].locale??""}set locale(t){var r,a;if(!this[u].locale||!(null==(a=this[u].options.nextConfig)?void 0:null==(r=a.i18n)?void 0:r.locales.includes(t)))throw TypeError(`The NextURL configuration includes no locale "${t}"`);this[u].locale=t}get defaultLocale(){return this[u].defaultLocale}get domainLocale(){return this[u].domainLocale}get searchParams(){return this[u].url.searchParams}get host(){return this[u].url.host}set host(t){this[u].url.host=t}get hostname(){return this[u].url.hostname}set hostname(t){this[u].url.hostname=t}get port(){return this[u].url.port}set port(t){this[u].url.port=t}get protocol(){return this[u].url.protocol}set protocol(t){this[u].url.protocol=t}get href(){let t=this.formatPathname(),r=this.formatSearch();return`${this.protocol}//${this.host}${t}${r}${this.hash}`}set href(t){this[u].url=parseURL(t),this.analyze()}get origin(){return this[u].url.origin}get pathname(){return this[u].url.pathname}set pathname(t){this[u].url.pathname=t}get hash(){return this[u].url.hash}set hash(t){this[u].url.hash=t}get search(){return this[u].url.search}set search(t){this[u].url.search=t}get password(){return this[u].url.password}set password(t){this[u].url.password=t}get username(){return this[u].url.username}set username(t){this[u].url.username=t}get basePath(){return this[u].basePath}set basePath(t){this[u].basePath=t.startsWith("/")?t:`/${t}`}toString(){return this.href}toJSON(){return this.href}[Symbol.for("edge-runtime.inspect.custom")](){return{href:this.href,origin:this.origin,protocol:this.protocol,username:this.username,password:this.password,host:this.host,hostname:this.hostname,port:this.port,pathname:this.pathname,search:this.search,searchParams:this.searchParams,hash:this.hash}}clone(){return new NextURL(String(this),this[u].options)}}},91749:(t,r,a)=>{Object.defineProperty(r,"__esModule",{value:!0}),function(t,r){for(var a in r)Object.defineProperty(t,a,{enumerable:!0,get:r[a]})}(r,{ReadonlyHeadersError:function(){return ReadonlyHeadersError},HeadersAdapter:function(){return HeadersAdapter}});let n=a(8154);let ReadonlyHeadersError=class ReadonlyHeadersError extends Error{constructor(){super("Headers cannot be modified. Read more: https://nextjs.org/docs/app/api-reference/functions/headers")}static callable(){throw new ReadonlyHeadersError}};let HeadersAdapter=class HeadersAdapter extends Headers{constructor(t){super(),this.headers=new Proxy(t,{get(r,a,o){if("symbol"==typeof a)return n.ReflectAdapter.get(r,a,o);let i=a.toLowerCase(),s=Object.keys(t).find(t=>t.toLowerCase()===i);if(void 0!==s)return n.ReflectAdapter.get(r,s,o)},set(r,a,o,i){if("symbol"==typeof a)return n.ReflectAdapter.set(r,a,o,i);let s=a.toLowerCase(),l=Object.keys(t).find(t=>t.toLowerCase()===s);return n.ReflectAdapter.set(r,l??a,o,i)},has(r,a){if("symbol"==typeof a)return n.ReflectAdapter.has(r,a);let o=a.toLowerCase(),i=Object.keys(t).find(t=>t.toLowerCase()===o);return void 0!==i&&n.ReflectAdapter.has(r,i)},deleteProperty(r,a){if("symbol"==typeof a)return n.ReflectAdapter.deleteProperty(r,a);let o=a.toLowerCase(),i=Object.keys(t).find(t=>t.toLowerCase()===o);return void 0===i||n.ReflectAdapter.deleteProperty(r,i)}})}static seal(t){return new Proxy(t,{get(t,r,a){switch(r){case"append":case"delete":case"set":return ReadonlyHeadersError.callable;default:return n.ReflectAdapter.get(t,r,a)}}})}merge(t){return Array.isArray(t)?t.join(", "):t}static from(t){return t instanceof Headers?t:new HeadersAdapter(t)}append(t,r){let a=this.headers[t];"string"==typeof a?this.headers[t]=[a,r]:Array.isArray(a)?a.push(r):this.headers[t]=r}delete(t){delete this.headers[t]}get(t){let r=this.headers[t];return void 0!==r?this.merge(r):null}has(t){return void 0!==this.headers[t]}set(t,r){this.headers[t]=r}forEach(t,r){for(let[a,n]of this.entries())t.call(r,n,a,this)}*entries(){for(let t of Object.keys(this.headers)){let r=t.toLowerCase(),a=this.get(r);yield[r,a]}}*keys(){for(let t of Object.keys(this.headers)){let r=t.toLowerCase();yield r}}*values(){for(let t of Object.keys(this.headers)){let r=this.get(t);yield r}}[Symbol.iterator](){return this.entries()}}},8154:(t,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"ReflectAdapter",{enumerable:!0,get:function(){return ReflectAdapter}});let ReflectAdapter=class ReflectAdapter{static get(t,r,a){let n=Reflect.get(t,r,a);return"function"==typeof n?n.bind(t):n}static set(t,r,a,n){return Reflect.set(t,r,a,n)}static has(t,r){return Reflect.has(t,r)}static deleteProperty(t,r){return Reflect.deleteProperty(t,r)}}},9879:(t,r,a)=>{Object.defineProperty(r,"__esModule",{value:!0}),function(t,r){for(var a in r)Object.defineProperty(t,a,{enumerable:!0,get:r[a]})}(r,{ReadonlyRequestCookiesError:function(){return ReadonlyRequestCookiesError},RequestCookiesAdapter:function(){return RequestCookiesAdapter},getModifiedCookieValues:function(){return getModifiedCookieValues},appendMutableCookies:function(){return appendMutableCookies},MutableRequestCookiesAdapter:function(){return MutableRequestCookiesAdapter}});let n=a(93497),o=a(8154);let ReadonlyRequestCookiesError=class ReadonlyRequestCookiesError extends Error{constructor(){super("Cookies can only be modified in a Server Action or Route Handler. Read more: https://nextjs.org/docs/app/api-reference/functions/cookies#cookiessetname-value-options")}static callable(){throw new ReadonlyRequestCookiesError}};let RequestCookiesAdapter=class RequestCookiesAdapter{static seal(t){return new Proxy(t,{get(t,r,a){switch(r){case"clear":case"delete":case"set":return ReadonlyRequestCookiesError.callable;default:return o.ReflectAdapter.get(t,r,a)}}})}};let i=Symbol.for("next.mutated.cookies");function getModifiedCookieValues(t){let r=t[i];return r&&Array.isArray(r)&&0!==r.length?r:[]}function appendMutableCookies(t,r){let a=getModifiedCookieValues(r);if(0===a.length)return!1;let o=new n.ResponseCookies(t),i=o.getAll();for(let t of a)o.set(t);for(let t of i)o.set(t);return!0}let MutableRequestCookiesAdapter=class MutableRequestCookiesAdapter{static wrap(t,r){let a=new n.ResponseCookies(new Headers);for(let r of t.getAll())a.set(r);let s=[],l=new Set,updateResponseCookies=()=>{var t;let o=null==fetch.__nextGetStaticStore?void 0:null==(t=fetch.__nextGetStaticStore.call(fetch))?void 0:t.getStore();o&&(o.pathWasRevalidated=!0);let i=a.getAll();if(s=i.filter(t=>l.has(t.name)),r){let t=[];for(let r of s){let a=new n.ResponseCookies(new Headers);a.set(r),t.push(a.toString())}r(t)}};return new Proxy(a,{get(t,r,a){switch(r){case i:return s;case"delete":return function(...r){l.add("string"==typeof r[0]?r[0]:r[0].name);try{t.delete(...r)}finally{updateResponseCookies()}};case"set":return function(...r){l.add("string"==typeof r[0]?r[0]:r[0].name);try{return t.set(...r)}finally{updateResponseCookies()}};default:return o.ReflectAdapter.get(t,r,a)}}})}}},93497:(t,r,a)=>{Object.defineProperty(r,"__esModule",{value:!0}),function(t,r){for(var a in r)Object.defineProperty(t,a,{enumerable:!0,get:r[a]})}(r,{RequestCookies:function(){return n.RequestCookies},ResponseCookies:function(){return n.ResponseCookies}});let n=a(55865)},37021:(t,r,a)=>{Object.defineProperty(r,"__esModule",{value:!0}),function(t,r){for(var a in r)Object.defineProperty(t,a,{enumerable:!0,get:r[a]})}(r,{INTERNALS:function(){return l},NextRequest:function(){return NextRequest}});let n=a(65973),o=a(75746),i=a(1468),s=a(93497),l=Symbol("internal request");let NextRequest=class NextRequest extends Request{constructor(t,r={}){let a="string"!=typeof t&&"url"in t?t.url:String(t);(0,o.validateURL)(a),t instanceof Request?super(t,r):super(a,r);let i=new n.NextURL(a,{headers:(0,o.toNodeOutgoingHttpHeaders)(this.headers),nextConfig:r.nextConfig});this[l]={cookies:new s.RequestCookies(this.headers),geo:r.geo||{},ip:r.ip,nextUrl:i,url:i.toString()}}[Symbol.for("edge-runtime.inspect.custom")](){return{cookies:this.cookies,geo:this.geo,ip:this.ip,nextUrl:this.nextUrl,url:this.url,bodyUsed:this.bodyUsed,cache:this.cache,credentials:this.credentials,destination:this.destination,headers:Object.fromEntries(this.headers),integrity:this.integrity,keepalive:this.keepalive,method:this.method,mode:this.mode,redirect:this.redirect,referrer:this.referrer,referrerPolicy:this.referrerPolicy,signal:this.signal}}get cookies(){return this[l].cookies}get geo(){return this[l].geo}get ip(){return this[l].ip}get nextUrl(){return this[l].nextUrl}get page(){throw new i.RemovedPageError}get ua(){throw new i.RemovedUAError}get url(){return this[l].url}}},60177:(t,r,a)=>{Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"NextResponse",{enumerable:!0,get:function(){return NextResponse}});let n=a(65973),o=a(75746),i=a(93497),s=Symbol("internal response"),l=new Set([301,302,303,307,308]);function handleMiddlewareField(t,r){var a;if(null==t?void 0:null==(a=t.request)?void 0:a.headers){if(!(t.request.headers instanceof Headers))throw Error("request.headers must be an instance of Headers");let a=[];for(let[n,o]of t.request.headers)r.set("x-middleware-request-"+n,o),a.push(n);r.set("x-middleware-override-headers",a.join(","))}}let NextResponse=class NextResponse extends Response{constructor(t,r={}){super(t,r),this[s]={cookies:new i.ResponseCookies(this.headers),url:r.url?new n.NextURL(r.url,{headers:(0,o.toNodeOutgoingHttpHeaders)(this.headers),nextConfig:r.nextConfig}):void 0}}[Symbol.for("edge-runtime.inspect.custom")](){return{cookies:this.cookies,url:this.url,body:this.body,bodyUsed:this.bodyUsed,headers:Object.fromEntries(this.headers),ok:this.ok,redirected:this.redirected,status:this.status,statusText:this.statusText,type:this.type}}get cookies(){return this[s].cookies}static json(t,r){let a=Response.json(t,r);return new NextResponse(a.body,a)}static redirect(t,r){let a="number"==typeof r?r:(null==r?void 0:r.status)??307;if(!l.has(a))throw RangeError('Failed to execute "redirect" on "response": Invalid status code');let n="object"==typeof r?r:{},i=new Headers(null==n?void 0:n.headers);return i.set("Location",(0,o.validateURL)(t)),new NextResponse(null,{...n,headers:i,status:a})}static rewrite(t,r){let a=new Headers(null==r?void 0:r.headers);return a.set("x-middleware-rewrite",(0,o.validateURL)(t)),handleMiddlewareField(r,a),new NextResponse(null,{...r,headers:a})}static next(t){let r=new Headers(null==t?void 0:t.headers);return r.set("x-middleware-next","1"),handleMiddlewareField(t,r),new NextResponse(null,{...t,headers:r})}}},75746:(t,r)=>{function fromNodeOutgoingHttpHeaders(t){let r=new Headers;for(let[a,n]of Object.entries(t)){let t=Array.isArray(n)?n:[n];for(let n of t)void 0!==n&&("number"==typeof n&&(n=n.toString()),r.append(a,n))}return r}function splitCookiesString(t){var r,a,n,o,i,s=[],l=0;function skipWhitespace(){for(;l<t.length&&/\s/.test(t.charAt(l));)l+=1;return l<t.length}for(;l<t.length;){for(r=l,i=!1;skipWhitespace();)if(","===(a=t.charAt(l))){for(n=l,l+=1,skipWhitespace(),o=l;l<t.length&&"="!==(a=t.charAt(l))&&";"!==a&&","!==a;)l+=1;l<t.length&&"="===t.charAt(l)?(i=!0,l=o,s.push(t.substring(r,n)),r=l):l=n+1}else l+=1;(!i||l>=t.length)&&s.push(t.substring(r,t.length))}return s}function toNodeOutgoingHttpHeaders(t){let r={},a=[];if(t)for(let[n,o]of t.entries())"set-cookie"===n.toLowerCase()?(a.push(...splitCookiesString(o)),r[n]=1===a.length?a[0]:a):r[n]=o;return r}function validateURL(t){try{return String(new URL(String(t)))}catch(r){throw Error(`URL is malformed "${String(t)}". Please use only absolute URLs - https://nextjs.org/docs/messages/middleware-relative-urls`,{cause:r})}}Object.defineProperty(r,"__esModule",{value:!0}),function(t,r){for(var a in r)Object.defineProperty(t,a,{enumerable:!0,get:r[a]})}(r,{fromNodeOutgoingHttpHeaders:function(){return fromNodeOutgoingHttpHeaders},splitCookiesString:function(){return splitCookiesString},toNodeOutgoingHttpHeaders:function(){return toNodeOutgoingHttpHeaders},validateURL:function(){return validateURL}})},23249:(t,r)=>{function getHostname(t,r){let a;if((null==r?void 0:r.host)&&!Array.isArray(r.host))a=r.host.toString().split(":")[0];else{if(!t.hostname)return;a=t.hostname}return a.toLowerCase()}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"getHostname",{enumerable:!0,get:function(){return getHostname}})},79048:(t,r)=>{function detectDomainLocale(t,r,a){if(t)for(let i of(a&&(a=a.toLowerCase()),t)){var n,o;let t=null==(n=i.domain)?void 0:n.split(":")[0].toLowerCase();if(r===t||a===i.defaultLocale.toLowerCase()||(null==(o=i.locales)?void 0:o.some(t=>t.toLowerCase()===a)))return i}}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"detectDomainLocale",{enumerable:!0,get:function(){return detectDomainLocale}})},83688:(t,r)=>{function normalizeLocalePath(t,r){let a;let n=t.split("/");return(r||[]).some(r=>!!n[1]&&n[1].toLowerCase()===r.toLowerCase()&&(a=r,n.splice(1,1),t=n.join("/")||"/",!0)),{pathname:t,detectedLocale:a}}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"normalizeLocalePath",{enumerable:!0,get:function(){return normalizeLocalePath}})},49517:(t,r,a)=>{Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"addLocale",{enumerable:!0,get:function(){return addLocale}});let n=a(95431),o=a(65417);function addLocale(t,r,a,i){if(!r||r===a)return t;let s=t.toLowerCase();return!i&&((0,o.pathHasPrefix)(s,"/api")||(0,o.pathHasPrefix)(s,"/"+r.toLowerCase()))?t:(0,n.addPathPrefix)(t,"/"+r)}},95431:(t,r,a)=>{Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"addPathPrefix",{enumerable:!0,get:function(){return addPathPrefix}});let n=a(11165);function addPathPrefix(t,r){if(!t.startsWith("/")||!r)return t;let{pathname:a,query:o,hash:i}=(0,n.parsePath)(t);return""+r+a+o+i}},2776:(t,r,a)=>{Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"addPathSuffix",{enumerable:!0,get:function(){return addPathSuffix}});let n=a(11165);function addPathSuffix(t,r){if(!t.startsWith("/")||!r)return t;let{pathname:a,query:o,hash:i}=(0,n.parsePath)(t);return""+a+r+o+i}},56286:(t,r,a)=>{Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"formatNextPathnameInfo",{enumerable:!0,get:function(){return formatNextPathnameInfo}});let n=a(2664),o=a(95431),i=a(2776),s=a(49517);function formatNextPathnameInfo(t){let r=(0,s.addLocale)(t.pathname,t.locale,t.buildId?void 0:t.defaultLocale,t.ignorePrefix);return(t.buildId||!t.trailingSlash)&&(r=(0,n.removeTrailingSlash)(r)),t.buildId&&(r=(0,i.addPathSuffix)((0,o.addPathPrefix)(r,"/_next/data/"+t.buildId),"/"===t.pathname?"index.json":".json")),r=(0,o.addPathPrefix)(r,t.basePath),!t.buildId&&t.trailingSlash?r.endsWith("/")?r:(0,i.addPathSuffix)(r,"/"):(0,n.removeTrailingSlash)(r)}},44316:(t,r,a)=>{Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"getNextPathnameInfo",{enumerable:!0,get:function(){return getNextPathnameInfo}});let n=a(83688),o=a(57085),i=a(65417);function getNextPathnameInfo(t,r){var a,s;let{basePath:l,i18n:u,trailingSlash:c}=null!=(a=r.nextConfig)?a:{},d={pathname:t,trailingSlash:"/"!==t?t.endsWith("/"):c};l&&(0,i.pathHasPrefix)(d.pathname,l)&&(d.pathname=(0,o.removePathPrefix)(d.pathname,l),d.basePath=l);let h=d.pathname;if(d.pathname.startsWith("/_next/data/")&&d.pathname.endsWith(".json")){let t=d.pathname.replace(/^\/_next\/data\//,"").replace(/\.json$/,"").split("/"),a=t[0];d.buildId=a,h="index"!==t[1]?"/"+t.slice(1).join("/"):"/",!0===r.parseData&&(d.pathname=h)}if(u){let t=r.i18nProvider?r.i18nProvider.analyze(d.pathname):(0,n.normalizeLocalePath)(d.pathname,u.locales);d.locale=t.detectedLocale,d.pathname=null!=(s=t.pathname)?s:d.pathname,!t.detectedLocale&&d.buildId&&(t=r.i18nProvider?r.i18nProvider.analyze(h):(0,n.normalizeLocalePath)(h,u.locales)).detectedLocale&&(d.locale=t.detectedLocale)}return d}},11165:(t,r)=>{function parsePath(t){let r=t.indexOf("#"),a=t.indexOf("?"),n=a>-1&&(r<0||a<r);return n||r>-1?{pathname:t.substring(0,n?a:r),query:n?t.substring(a,r>-1?r:void 0):"",hash:r>-1?t.slice(r):""}:{pathname:t,query:"",hash:""}}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"parsePath",{enumerable:!0,get:function(){return parsePath}})},65417:(t,r,a)=>{Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"pathHasPrefix",{enumerable:!0,get:function(){return pathHasPrefix}});let n=a(11165);function pathHasPrefix(t,r){if("string"!=typeof t)return!1;let{pathname:a}=(0,n.parsePath)(t);return a===r||a.startsWith(r+"/")}},57085:(t,r,a)=>{Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"removePathPrefix",{enumerable:!0,get:function(){return removePathPrefix}});let n=a(65417);function removePathPrefix(t,r){if(!(0,n.pathHasPrefix)(t,r))return t;let a=t.slice(r.length);return a.startsWith("/")?a:"/"+a}},2664:(t,r)=>{function removeTrailingSlash(t){return t.replace(/\/$/,"")||"/"}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"removeTrailingSlash",{enumerable:!0,get:function(){return removeTrailingSlash}})},59859:(t,r,a)=>{t.exports=a(78561)},29942:(t,r,a)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.noCase=void 0;var n=a(39998),o=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],i=/[^A-Z0-9]+/gi;function replace(t,r,a){return r instanceof RegExp?t.replace(r,a):r.reduce(function(t,r){return t.replace(r,a)},t)}r.noCase=function(t,r){void 0===r&&(r={});for(var a=r.splitRegexp,s=r.stripRegexp,l=r.transform,u=void 0===l?n.lowerCase:l,c=r.delimiter,d=void 0===c?" ":c,h=replace(replace(t,void 0===a?o:a,"$1\x00$2"),void 0===s?i:s,"\x00"),p=0,y=h.length;"\x00"===h.charAt(p);)p++;for(;"\x00"===h.charAt(y-1);)y--;return h.slice(p,y).split("\x00").map(u).join(d)}},18624:(t,r)=>{function escapeString(t){return t.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function flags(t){return t&&t.sensitive?"":"i"}r.Bo=void 0,r.Bo=function pathToRegexp(t,r,a){var n;return t instanceof RegExp?function(t,r){if(!r)return t;for(var a=/\((?:\?<(.*?)>)?(?!\?)/g,n=0,o=a.exec(t.source);o;)r.push({name:o[1]||n++,prefix:"",suffix:"",modifier:"",pattern:""}),o=a.exec(t.source);return t}(t,r):Array.isArray(t)?(n=t.map(function(t){return pathToRegexp(t,r,a).source}),new RegExp("(?:".concat(n.join("|"),")"),flags(a))):function(t,r,a){void 0===a&&(a={});for(var n=a.strict,o=void 0!==n&&n,i=a.start,s=a.end,l=a.encode,u=void 0===l?function(t){return t}:l,c=a.delimiter,d=a.endsWith,h="[".concat(escapeString(void 0===d?"":d),"]|$"),p="[".concat(escapeString(void 0===c?"/#?":c),"]"),y=void 0===i||i?"^":"",m=0;m<t.length;m++){var g=t[m];if("string"==typeof g)y+=escapeString(u(g));else{var b=escapeString(u(g.prefix)),v=escapeString(u(g.suffix));if(g.pattern){if(r&&r.push(g),b||v){if("+"===g.modifier||"*"===g.modifier){var S="*"===g.modifier?"?":"";y+="(?:".concat(b,"((?:").concat(g.pattern,")(?:").concat(v).concat(b,"(?:").concat(g.pattern,"))*)").concat(v,")").concat(S)}else y+="(?:".concat(b,"(").concat(g.pattern,")").concat(v,")").concat(g.modifier)}else"+"===g.modifier||"*"===g.modifier?y+="((?:".concat(g.pattern,")").concat(g.modifier,")"):y+="(".concat(g.pattern,")").concat(g.modifier)}else y+="(?:".concat(b).concat(v,")").concat(g.modifier)}}if(void 0===s||s)o||(y+="".concat(p,"?")),y+=a.endsWith?"(?=".concat(h,")"):"$";else{var C=t[t.length-1],w="string"==typeof C?p.indexOf(C[C.length-1])>-1:void 0===C;o||(y+="(?:".concat(p,"(?=").concat(h,"))?")),w||(y+="(?=".concat(p,"|").concat(h,")"))}return new RegExp(y,flags(a))}(function(t,r){void 0===r&&(r={});for(var a=function(t){for(var r=[],a=0;a<t.length;){var n=t[a];if("*"===n||"+"===n||"?"===n){r.push({type:"MODIFIER",index:a,value:t[a++]});continue}if("\\"===n){r.push({type:"ESCAPED_CHAR",index:a++,value:t[a++]});continue}if("{"===n){r.push({type:"OPEN",index:a,value:t[a++]});continue}if("}"===n){r.push({type:"CLOSE",index:a,value:t[a++]});continue}if(":"===n){for(var o="",i=a+1;i<t.length;){var s=t.charCodeAt(i);if(s>=48&&s<=57||s>=65&&s<=90||s>=97&&s<=122||95===s){o+=t[i++];continue}break}if(!o)throw TypeError("Missing parameter name at ".concat(a));r.push({type:"NAME",index:a,value:o}),a=i;continue}if("("===n){var l=1,u="",i=a+1;if("?"===t[i])throw TypeError('Pattern cannot start with "?" at '.concat(i));for(;i<t.length;){if("\\"===t[i]){u+=t[i++]+t[i++];continue}if(")"===t[i]){if(0==--l){i++;break}}else if("("===t[i]&&(l++,"?"!==t[i+1]))throw TypeError("Capturing groups are not allowed at ".concat(i));u+=t[i++]}if(l)throw TypeError("Unbalanced pattern at ".concat(a));if(!u)throw TypeError("Missing pattern at ".concat(a));r.push({type:"PATTERN",index:a,value:u}),a=i;continue}r.push({type:"CHAR",index:a,value:t[a++]})}return r.push({type:"END",index:a,value:""}),r}(t),n=r.prefixes,o=void 0===n?"./":n,i="[^".concat(escapeString(r.delimiter||"/#?"),"]+?"),s=[],l=0,u=0,c="",tryConsume=function(t){if(u<a.length&&a[u].type===t)return a[u++].value},mustConsume=function(t){var r=tryConsume(t);if(void 0!==r)return r;var n=a[u],o=n.type,i=n.index;throw TypeError("Unexpected ".concat(o," at ").concat(i,", expected ").concat(t))},consumeText=function(){for(var t,r="";t=tryConsume("CHAR")||tryConsume("ESCAPED_CHAR");)r+=t;return r};u<a.length;){var d=tryConsume("CHAR"),h=tryConsume("NAME"),p=tryConsume("PATTERN");if(h||p){var y=d||"";-1===o.indexOf(y)&&(c+=y,y=""),c&&(s.push(c),c=""),s.push({name:h||l++,prefix:y,suffix:"",pattern:p||i,modifier:tryConsume("MODIFIER")||""});continue}var m=d||tryConsume("ESCAPED_CHAR");if(m){c+=m;continue}if(c&&(s.push(c),c=""),tryConsume("OPEN")){var y=consumeText(),g=tryConsume("NAME")||"",b=tryConsume("PATTERN")||"",v=consumeText();mustConsume("CLOSE"),s.push({name:g||(b?l++:""),pattern:g&&!b?i:b,prefix:y,suffix:v,modifier:tryConsume("MODIFIER")||""});continue}mustConsume("END")}return s}(t,a),r,a)}},81648:(t,r)=>{let BufferSourceConverter=class BufferSourceConverter{static isArrayBuffer(t){return"[object ArrayBuffer]"===Object.prototype.toString.call(t)}static toArrayBuffer(t){return this.isArrayBuffer(t)?t:t.byteLength===t.buffer.byteLength||0===t.byteOffset&&t.byteLength===t.buffer.byteLength?t.buffer:this.toUint8Array(t.buffer).slice(t.byteOffset,t.byteOffset+t.byteLength).buffer}static toUint8Array(t){return this.toView(t,Uint8Array)}static toView(t,r){if(t.constructor===r)return t;if(this.isArrayBuffer(t))return new r(t);if(this.isArrayBufferView(t))return new r(t.buffer,t.byteOffset,t.byteLength);throw TypeError("The provided value is not of type '(ArrayBuffer or ArrayBufferView)'")}static isBufferSource(t){return this.isArrayBufferView(t)||this.isArrayBuffer(t)}static isArrayBufferView(t){return ArrayBuffer.isView(t)||t&&this.isArrayBuffer(t.buffer)}static isEqual(t,r){let a=BufferSourceConverter.toUint8Array(t),n=BufferSourceConverter.toUint8Array(r);if(a.length!==n.byteLength)return!1;for(let t=0;t<a.length;t++)if(a[t]!==n[t])return!1;return!0}static concat(...t){let r;r=!Array.isArray(t[0])||t[1]instanceof Function?Array.isArray(t[0])&&t[1]instanceof Function?t[0]:t[t.length-1]instanceof Function?t.slice(0,t.length-1):t:t[0];let a=0;for(let t of r)a+=t.byteLength;let n=new Uint8Array(a),o=0;for(let t of r){let r=this.toUint8Array(t);n.set(r,o),o+=r.length}return t[t.length-1]instanceof Function?this.toView(n,t[t.length-1]):n.buffer}};let a="string",n=/^[0-9a-f]+$/i,o=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/,i=/^[a-zA-Z0-9-_]+$/;let Utf8Converter=class Utf8Converter{static fromString(t){let r=unescape(encodeURIComponent(t)),a=new Uint8Array(r.length);for(let t=0;t<r.length;t++)a[t]=r.charCodeAt(t);return a.buffer}static toString(t){let r=BufferSourceConverter.toUint8Array(t),a="";for(let t=0;t<r.length;t++)a+=String.fromCharCode(r[t]);let n=decodeURIComponent(escape(a));return n}};let Utf16Converter=class Utf16Converter{static toString(t,r=!1){let a=BufferSourceConverter.toArrayBuffer(t),n=new DataView(a),o="";for(let t=0;t<a.byteLength;t+=2){let a=n.getUint16(t,r);o+=String.fromCharCode(a)}return o}static fromString(t,r=!1){let a=new ArrayBuffer(2*t.length),n=new DataView(a);for(let a=0;a<t.length;a++)n.setUint16(2*a,t.charCodeAt(a),r);return a}};let Convert=class Convert{static isHex(t){return typeof t===a&&n.test(t)}static isBase64(t){return typeof t===a&&o.test(t)}static isBase64Url(t){return typeof t===a&&i.test(t)}static ToString(t,r="utf8"){let a=BufferSourceConverter.toUint8Array(t);switch(r.toLowerCase()){case"utf8":return this.ToUtf8String(a);case"binary":return this.ToBinary(a);case"hex":return this.ToHex(a);case"base64":return this.ToBase64(a);case"base64url":return this.ToBase64Url(a);case"utf16le":return Utf16Converter.toString(a,!0);case"utf16":case"utf16be":return Utf16Converter.toString(a);default:throw Error(`Unknown type of encoding '${r}'`)}}static FromString(t,r="utf8"){if(!t)return new ArrayBuffer(0);switch(r.toLowerCase()){case"utf8":return this.FromUtf8String(t);case"binary":return this.FromBinary(t);case"hex":return this.FromHex(t);case"base64":return this.FromBase64(t);case"base64url":return this.FromBase64Url(t);case"utf16le":return Utf16Converter.fromString(t,!0);case"utf16":case"utf16be":return Utf16Converter.fromString(t);default:throw Error(`Unknown type of encoding '${r}'`)}}static ToBase64(t){let r=BufferSourceConverter.toUint8Array(t);if("undefined"==typeof btoa)return Buffer.from(r).toString("base64");{let t=this.ToString(r,"binary");return btoa(t)}}static FromBase64(t){let r=this.formatString(t);if(!r)return new ArrayBuffer(0);if(!Convert.isBase64(r))throw TypeError("Argument 'base64Text' is not Base64 encoded");return"undefined"!=typeof atob?this.FromBinary(atob(r)):new Uint8Array(Buffer.from(r,"base64")).buffer}static FromBase64Url(t){let r=this.formatString(t);if(!r)return new ArrayBuffer(0);if(!Convert.isBase64Url(r))throw TypeError("Argument 'base64url' is not Base64Url encoded");return this.FromBase64(this.Base64Padding(r.replace(/\-/g,"+").replace(/\_/g,"/")))}static ToBase64Url(t){return this.ToBase64(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}static FromUtf8String(t,r=Convert.DEFAULT_UTF8_ENCODING){switch(r){case"ascii":return this.FromBinary(t);case"utf8":return Utf8Converter.fromString(t);case"utf16":case"utf16be":return Utf16Converter.fromString(t);case"utf16le":case"usc2":return Utf16Converter.fromString(t,!0);default:throw Error(`Unknown type of encoding '${r}'`)}}static ToUtf8String(t,r=Convert.DEFAULT_UTF8_ENCODING){switch(r){case"ascii":return this.ToBinary(t);case"utf8":return Utf8Converter.toString(t);case"utf16":case"utf16be":return Utf16Converter.toString(t);case"utf16le":case"usc2":return Utf16Converter.toString(t,!0);default:throw Error(`Unknown type of encoding '${r}'`)}}static FromBinary(t){let r=t.length,a=new Uint8Array(r);for(let n=0;n<r;n++)a[n]=t.charCodeAt(n);return a.buffer}static ToBinary(t){let r=BufferSourceConverter.toUint8Array(t),a="";for(let t=0;t<r.length;t++)a+=String.fromCharCode(r[t]);return a}static ToHex(t){let r=BufferSourceConverter.toUint8Array(t),a="",n=r.length;for(let t=0;t<n;t++){let n=r[t];n<16&&(a+="0"),a+=n.toString(16)}return a}static FromHex(t){let r=this.formatString(t);if(!r)return new ArrayBuffer(0);if(!Convert.isHex(r))throw TypeError("Argument 'hexString' is not HEX encoded");r.length%2&&(r=`0${r}`);let a=new Uint8Array(r.length/2);for(let t=0;t<r.length;t+=2){let n=r.slice(t,t+2);a[t/2]=parseInt(n,16)}return a.buffer}static ToUtf16String(t,r=!1){return Utf16Converter.toString(t,r)}static FromUtf16String(t,r=!1){return Utf16Converter.fromString(t,r)}static Base64Padding(t){let r=4-t.length%4;if(r<4)for(let a=0;a<r;a++)t+="=";return t}static formatString(t){return(null==t?void 0:t.replace(/[\n\r\t ]/g,""))||""}};Convert.DEFAULT_UTF8_ENCODING="utf8",r.BufferSourceConverter=BufferSourceConverter,r.Convert=Convert,r.assign=function(t,...r){let a=arguments[0];for(let t=1;t<arguments.length;t++){let r=arguments[t];for(let t in r)a[t]=r[t]}return a},r.combine=function(...t){let r=t.map(t=>t.byteLength).reduce((t,r)=>t+r),a=new Uint8Array(r),n=0;return t.map(t=>new Uint8Array(t)).forEach(t=>{for(let r of t)a[n++]=r}),a.buffer},r.isEqual=function(t,r){if(!(t&&r)||t.byteLength!==r.byteLength)return!1;let a=new Uint8Array(t),n=new Uint8Array(r);for(let r=0;r<t.byteLength;r++)if(a[r]!==n[r])return!1;return!0}},47162:(t,r)=>{function utilFromBase(t,r){let a=0;if(1===t.length)return t[0];for(let n=t.length-1;n>=0;n--)a+=t[t.length-1-n]*Math.pow(2,r*n);return a}function utilToBase(t,r,a=-1){let n=t,o=0,i=Math.pow(2,r);for(let s=1;s<8;s++){if(t<i){let t;if(a<0)t=new ArrayBuffer(s),o=s;else{if(a<s)return new ArrayBuffer(0);t=new ArrayBuffer(a),o=a}let i=new Uint8Array(t);for(let t=s-1;t>=0;t--){let a=Math.pow(2,t*r);i[o-t-1]=Math.floor(n/a),n-=i[o-t-1]*a}return t}i*=Math.pow(2,r)}return new ArrayBuffer(0)}/*!
 Copyright (c) Peculiar Ventures, LLC
*/Object.defineProperty(r,"__esModule",{value:!0});let a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",o=Math.log(2);r.arrayBufferToString=function(t){let r="",a=new Uint8Array(t);for(let t of a)r+=String.fromCharCode(t);return r},r.bufferToHexCodes=function(t,r=0,a=t.byteLength-r,n=!1){let o="";for(let i of new Uint8Array(t,r,a)){let t=i.toString(16).toUpperCase();1===t.length&&(o+="0"),o+=t,n&&(o+=" ")}return o.trim()},r.checkBufferParams=function(t,r,a,n){return r instanceof ArrayBuffer?r.byteLength?a<0?(t.error="Wrong parameter: inputOffset less than zero",!1):n<0?(t.error="Wrong parameter: inputLength less than zero",!1):!(r.byteLength-a-n<0)||(t.error="End of input reached before message was fully decoded (inconsistent offset and length values)",!1):(t.error="Wrong parameter: inputBuffer has zero length",!1):(t.error='Wrong parameter: inputBuffer must be "ArrayBuffer"',!1)},r.clearProps=function(t,r){for(let a of r)delete t[a]},r.fromBase64=function(t,r=!1,o=!1){let i=r?n:a;function indexOf(t){for(let r=0;r<64;r++)if(i.charAt(r)===t)return r;return 64}function test(t){return 64===t?0:t}let s=0,l="";for(;s<t.length;){let r=indexOf(t.charAt(s++)),a=s>=t.length?0:indexOf(t.charAt(s++)),n=s>=t.length?0:indexOf(t.charAt(s++)),o=s>=t.length?0:indexOf(t.charAt(s++)),i=test(r)<<2|test(a)>>4,u=(15&test(a))<<4|test(n)>>2,c=(3&test(n))<<6|test(o);l+=String.fromCharCode(i),64!==n&&(l+=String.fromCharCode(u)),64!==o&&(l+=String.fromCharCode(c))}if(o){let t=l.length,r=-1;for(let a=t-1;a>=0;a--)if(0!==l.charCodeAt(a)){r=a;break}l=-1!==r?l.slice(0,r+1):""}return l},r.getParametersValue=function(t,r,a){var n;return t instanceof Object==!1?a:null!==(n=t[r])&&void 0!==n?n:a},r.getUTCDate=function(t){return new Date(t.getTime()+6e4*t.getTimezoneOffset())},r.isEqualBuffer=function(t,r){if(t.byteLength!==r.byteLength)return!1;let a=new Uint8Array(t),n=new Uint8Array(r);for(let t=0;t<a.length;t++)if(a[t]!==n[t])return!1;return!0},r.nearestPowerOf2=function(t){let r=Math.log(t)/o,a=Math.floor(r),n=Math.round(r);return a===n?a:n},r.padNumber=function(t,r){let a=t.toString(10);if(r<a.length)return"";let n=r-a.length,o=Array(n);for(let t=0;t<n;t++)o[t]="0";let i=o.join("");return i.concat(a)},r.stringToArrayBuffer=function(t){let r=t.length,a=new ArrayBuffer(r),n=new Uint8Array(a);for(let a=0;a<r;a++)n[a]=t.charCodeAt(a);return a},r.toBase64=function(t,r=!1,o=!1,i=!1){let s=0,l=0,u=0,c="",d=r?n:a;if(i){let r=0;for(let a=0;a<t.length;a++)if(0!==t.charCodeAt(a)){r=a;break}t=t.slice(r)}for(;s<t.length;){let r=t.charCodeAt(s++);s>=t.length&&(l=1);let a=t.charCodeAt(s++);s>=t.length&&(u=1);let n=t.charCodeAt(s++),i=r>>2,h=(3&r)<<4|a>>4,p=(15&a)<<2|n>>6,y=63&n;1===l?p=y=64:1===u&&(y=64),o?64===p?c+=`${d.charAt(i)}${d.charAt(h)}`:64===y?c+=`${d.charAt(i)}${d.charAt(h)}${d.charAt(p)}`:c+=`${d.charAt(i)}${d.charAt(h)}${d.charAt(p)}${d.charAt(y)}`:c+=`${d.charAt(i)}${d.charAt(h)}${d.charAt(p)}${d.charAt(y)}`}return c},r.utilConcatBuf=function(...t){let r=0,a=0;for(let a of t)r+=a.byteLength;let n=new ArrayBuffer(r),o=new Uint8Array(n);for(let r of t)o.set(new Uint8Array(r),a),a+=r.byteLength;return n},r.utilConcatView=function(...t){let r=0,a=0;for(let a of t)r+=a.length;let n=new ArrayBuffer(r),o=new Uint8Array(n);for(let r of t)o.set(r,a),a+=r.length;return o},r.utilDecodeTC=function(){let t=new Uint8Array(this.valueHex);if(this.valueHex.byteLength>=2){let r=255===t[0]&&128&t[1],a=0===t[0]&&(128&t[1])==0;(r||a)&&this.warnings.push("Needlessly long format")}let r=new ArrayBuffer(this.valueHex.byteLength),a=new Uint8Array(r);for(let t=0;t<this.valueHex.byteLength;t++)a[t]=0;a[0]=128&t[0];let n=utilFromBase(a,8),o=new ArrayBuffer(this.valueHex.byteLength),i=new Uint8Array(o);for(let r=0;r<this.valueHex.byteLength;r++)i[r]=t[r];i[0]&=127;let s=utilFromBase(i,8);return s-n},r.utilEncodeTC=function(t){let r=t<0?-1*t:t,a=128;for(let n=1;n<8;n++){if(r<=a){if(t<0){let t=a-r,o=utilToBase(t,8,n),i=new Uint8Array(o);return i[0]|=128,o}let o=utilToBase(r,8,n),i=new Uint8Array(o);if(128&i[0]){let t=o.slice(0),r=new Uint8Array(t);o=new ArrayBuffer(o.byteLength+1),i=new Uint8Array(o);for(let a=0;a<t.byteLength;a++)i[a+1]=r[a];i[0]=0}return o}a*=256}return new ArrayBuffer(0)},r.utilFromBase=utilFromBase,r.utilToBase=utilToBase},46652:(t,r,a)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.snakeCase=void 0;var n=a(15803),o=a(84639);r.snakeCase=function(t,r){return void 0===r&&(r={}),o.dotCase(t,n.__assign({delimiter:"_"},r))}},53918:(t,r,a)=>{let n=a(50104),{snakeCase:o}=a(46652);t.exports=function(t,r){return n(t,function(t,a){return[r.exclude.some(function(r){return"string"==typeof r?r===t:r.test(t)})?t:o(t,r.parsingOptions),a]},r=Object.assign({deep:!0,exclude:[],parsingOptions:{}},r))}},87713:(t,r,a)=>{/*!
 Copyright (c) Peculiar Ventures, LLC
*/var n=a(81648),o=a(98763),i=a(15803),s=a(55632),l=function(t){var r=Object.create(null);return t&&Object.keys(t).forEach(function(a){if("default"!==a){var n=Object.getOwnPropertyDescriptor(t,a);Object.defineProperty(r,a,n.get?n:{enumerable:!0,get:function(){return t[a]}})}}),r.default=t,Object.freeze(r)}(a(94549));let CryptoError=class CryptoError extends Error{};let AlgorithmError=class AlgorithmError extends CryptoError{};let UnsupportedOperationError=class UnsupportedOperationError extends CryptoError{constructor(t){super(`Unsupported operation: ${t?`${t}`:""}`)}};let OperationError=class OperationError extends CryptoError{};let RequiredPropertyError=class RequiredPropertyError extends CryptoError{constructor(t){super(`${t}: Missing required property`)}};function isJWK(t){return"object"==typeof t&&"kty"in t}let ProviderCrypto=class ProviderCrypto{async digest(...t){return this.checkDigest.apply(this,t),this.onDigest.apply(this,t)}checkDigest(t,r){this.checkAlgorithmName(t)}async onDigest(t,r){throw new UnsupportedOperationError("digest")}async generateKey(...t){return this.checkGenerateKey.apply(this,t),this.onGenerateKey.apply(this,t)}checkGenerateKey(t,r,a,...n){let o;if(this.checkAlgorithmName(t),this.checkGenerateKeyParams(t),!(a&&a.length))throw TypeError("Usages cannot be empty when creating a key.");o=Array.isArray(this.usages)?this.usages:this.usages.privateKey.concat(this.usages.publicKey),this.checkKeyUsages(a,o)}checkGenerateKeyParams(t){}async onGenerateKey(t,r,a,...n){throw new UnsupportedOperationError("generateKey")}async sign(...t){return this.checkSign.apply(this,t),this.onSign.apply(this,t)}checkSign(t,r,a,...n){this.checkAlgorithmName(t),this.checkAlgorithmParams(t),this.checkCryptoKey(r,"sign")}async onSign(t,r,a,...n){throw new UnsupportedOperationError("sign")}async verify(...t){return this.checkVerify.apply(this,t),this.onVerify.apply(this,t)}checkVerify(t,r,a,n,...o){this.checkAlgorithmName(t),this.checkAlgorithmParams(t),this.checkCryptoKey(r,"verify")}async onVerify(t,r,a,n,...o){throw new UnsupportedOperationError("verify")}async encrypt(...t){return this.checkEncrypt.apply(this,t),this.onEncrypt.apply(this,t)}checkEncrypt(t,r,a,n={},...o){this.checkAlgorithmName(t),this.checkAlgorithmParams(t),this.checkCryptoKey(r,n.keyUsage?"encrypt":void 0)}async onEncrypt(t,r,a,...n){throw new UnsupportedOperationError("encrypt")}async decrypt(...t){return this.checkDecrypt.apply(this,t),this.onDecrypt.apply(this,t)}checkDecrypt(t,r,a,n={},...o){this.checkAlgorithmName(t),this.checkAlgorithmParams(t),this.checkCryptoKey(r,n.keyUsage?"decrypt":void 0)}async onDecrypt(t,r,a,...n){throw new UnsupportedOperationError("decrypt")}async deriveBits(...t){return this.checkDeriveBits.apply(this,t),this.onDeriveBits.apply(this,t)}checkDeriveBits(t,r,a,n={},...o){if(this.checkAlgorithmName(t),this.checkAlgorithmParams(t),this.checkCryptoKey(r,n.keyUsage?"deriveBits":void 0),a%8!=0)throw new OperationError("length: Is not multiple of 8")}async onDeriveBits(t,r,a,...n){throw new UnsupportedOperationError("deriveBits")}async exportKey(...t){return this.checkExportKey.apply(this,t),this.onExportKey.apply(this,t)}checkExportKey(t,r,...a){if(this.checkKeyFormat(t),this.checkCryptoKey(r),!r.extractable)throw new CryptoError("key: Is not extractable")}async onExportKey(t,r,...a){throw new UnsupportedOperationError("exportKey")}async importKey(...t){return this.checkImportKey.apply(this,t),this.onImportKey.apply(this,t)}checkImportKey(t,r,a,n,o,...i){this.checkKeyFormat(t),this.checkKeyData(t,r),this.checkAlgorithmName(a),this.checkImportParams(a),Array.isArray(this.usages)&&this.checkKeyUsages(o,this.usages)}async onImportKey(t,r,a,n,o,...i){throw new UnsupportedOperationError("importKey")}checkAlgorithmName(t){if(t.name.toLowerCase()!==this.name.toLowerCase())throw new AlgorithmError("Unrecognized name")}checkAlgorithmParams(t){}checkDerivedKeyParams(t){}checkKeyUsages(t,r){for(let a of t)if(-1===r.indexOf(a))throw TypeError("Cannot create a key using the specified key usages")}checkCryptoKey(t,r){if(this.checkAlgorithmName(t.algorithm),r&&-1===t.usages.indexOf(r))throw new CryptoError("key does not match that of operation")}checkRequiredProperty(t,r){if(!(r in t))throw new RequiredPropertyError(r)}checkHashAlgorithm(t,r){for(let a of r)if(a.toLowerCase()===t.name.toLowerCase())return;throw new OperationError(`hash: Must be one of ${r.join(", ")}`)}checkImportParams(t){}checkKeyFormat(t){switch(t){case"raw":case"pkcs8":case"spki":case"jwk":break;default:throw TypeError("format: Is invalid value. Must be 'jwk', 'raw', 'spki', or 'pkcs8'")}}checkKeyData(t,r){if(!r)throw TypeError("keyData: Cannot be empty on empty on key importing");if("jwk"===t){if(!isJWK(r))throw TypeError("keyData: Is not JsonWebToken")}else if(!n.BufferSourceConverter.isBufferSource(r))throw TypeError("keyData: Is not ArrayBufferView or ArrayBuffer")}prepareData(t){return n.BufferSourceConverter.toArrayBuffer(t)}};let AesProvider=class AesProvider extends ProviderCrypto{checkGenerateKeyParams(t){if(this.checkRequiredProperty(t,"length"),"number"!=typeof t.length)throw TypeError("length: Is not of type Number");switch(t.length){case 128:case 192:case 256:break;default:throw TypeError("length: Must be 128, 192, or 256")}}checkDerivedKeyParams(t){this.checkGenerateKeyParams(t)}};let RsaProvider=class RsaProvider extends ProviderCrypto{constructor(){super(...arguments),this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512"]}checkGenerateKeyParams(t){if(this.checkRequiredProperty(t,"hash"),this.checkHashAlgorithm(t.hash,this.hashAlgorithms),this.checkRequiredProperty(t,"publicExponent"),!(t.publicExponent&&t.publicExponent instanceof Uint8Array))throw TypeError("publicExponent: Missing or not a Uint8Array");let r=n.Convert.ToBase64(t.publicExponent);if(!("Aw=="===r||"AQAB"===r))throw TypeError("publicExponent: Must be [3] or [1,0,1]");if(this.checkRequiredProperty(t,"modulusLength"),t.modulusLength%8||t.modulusLength<256||t.modulusLength>16384)throw TypeError("The modulus length must be a multiple of 8 bits and >= 256 and <= 16384")}checkImportParams(t){this.checkRequiredProperty(t,"hash"),this.checkHashAlgorithm(t.hash,this.hashAlgorithms)}};let EllipticProvider=class EllipticProvider extends ProviderCrypto{checkGenerateKeyParams(t){this.checkRequiredProperty(t,"namedCurve"),this.checkNamedCurve(t.namedCurve)}checkNamedCurve(t){for(let r of this.namedCurves)if(r.toLowerCase()===t.toLowerCase())return;throw new OperationError(`namedCurve: Must be one of ${this.namedCurves.join(", ")}`)}};let u=["secret","private","public"];let CryptoKey=class CryptoKey{static create(t,r,a,n){let o=new this;return o.algorithm=t,o.type=r,o.extractable=a,o.usages=n,o}static isKeyType(t){return -1!==u.indexOf(t)}get[Symbol.toStringTag](){return"CryptoKey"}};let EcdhProvider=class EcdhProvider extends EllipticProvider{constructor(){super(...arguments),this.name="ECDH",this.usages={privateKey:["deriveBits","deriveKey"],publicKey:[]},this.namedCurves=["P-256","P-384","P-521","K-256"]}checkAlgorithmParams(t){if(this.checkRequiredProperty(t,"public"),!(t.public instanceof CryptoKey))throw TypeError("public: Is not a CryptoKey");if("public"!==t.public.type)throw new OperationError("public: Is not a public key");if(t.public.algorithm.name!==this.name)throw new OperationError(`public: Is not ${this.name} key`)}};let c=class{constructor(t){t&&(this.value=t)}};i.__decorate([o.AsnProp({type:o.AsnPropTypes.ObjectIdentifier})],c.prototype,"value",void 0),c=i.__decorate([o.AsnType({type:o.AsnTypeTypes.Choice})],c);let AlgorithmIdentifier=class AlgorithmIdentifier{constructor(t){Object.assign(this,t)}};i.__decorate([o.AsnProp({type:o.AsnPropTypes.ObjectIdentifier})],AlgorithmIdentifier.prototype,"algorithm",void 0),i.__decorate([o.AsnProp({type:o.AsnPropTypes.Any,optional:!0})],AlgorithmIdentifier.prototype,"parameters",void 0);let PrivateKeyInfo=class PrivateKeyInfo{constructor(){this.version=0,this.privateKeyAlgorithm=new AlgorithmIdentifier,this.privateKey=new ArrayBuffer(0)}};i.__decorate([o.AsnProp({type:o.AsnPropTypes.Integer})],PrivateKeyInfo.prototype,"version",void 0),i.__decorate([o.AsnProp({type:AlgorithmIdentifier})],PrivateKeyInfo.prototype,"privateKeyAlgorithm",void 0),i.__decorate([o.AsnProp({type:o.AsnPropTypes.OctetString})],PrivateKeyInfo.prototype,"privateKey",void 0),i.__decorate([o.AsnProp({type:o.AsnPropTypes.Any,optional:!0})],PrivateKeyInfo.prototype,"attributes",void 0);let PublicKeyInfo=class PublicKeyInfo{constructor(){this.publicKeyAlgorithm=new AlgorithmIdentifier,this.publicKey=new ArrayBuffer(0)}};i.__decorate([o.AsnProp({type:AlgorithmIdentifier})],PublicKeyInfo.prototype,"publicKeyAlgorithm",void 0),i.__decorate([o.AsnProp({type:o.AsnPropTypes.BitString})],PublicKeyInfo.prototype,"publicKey",void 0);let d={fromJSON:t=>n.Convert.FromBase64Url(t),toJSON:t=>n.Convert.ToBase64Url(new Uint8Array(t))},h={fromASN:t=>{let r=t.valueBlock.valueHex;return new Uint8Array(r)[0]?t.valueBlock.valueHex:t.valueBlock.valueHex.slice(1)},toASN:t=>{let r=new Uint8Array(t)[0]>127?n.combine(new Uint8Array([0]).buffer,t):t;return new l.Integer({valueHex:r})}};var p=Object.freeze({__proto__:null,AsnIntegerArrayBufferConverter:h,JsonBase64UrlArrayBufferConverter:d});let RsaPrivateKey=class RsaPrivateKey{constructor(){this.version=0,this.modulus=new ArrayBuffer(0),this.publicExponent=new ArrayBuffer(0),this.privateExponent=new ArrayBuffer(0),this.prime1=new ArrayBuffer(0),this.prime2=new ArrayBuffer(0),this.exponent1=new ArrayBuffer(0),this.exponent2=new ArrayBuffer(0),this.coefficient=new ArrayBuffer(0)}};i.__decorate([o.AsnProp({type:o.AsnPropTypes.Integer,converter:o.AsnIntegerConverter})],RsaPrivateKey.prototype,"version",void 0),i.__decorate([o.AsnProp({type:o.AsnPropTypes.Integer,converter:h}),s.JsonProp({name:"n",converter:d})],RsaPrivateKey.prototype,"modulus",void 0),i.__decorate([o.AsnProp({type:o.AsnPropTypes.Integer,converter:h}),s.JsonProp({name:"e",converter:d})],RsaPrivateKey.prototype,"publicExponent",void 0),i.__decorate([o.AsnProp({type:o.AsnPropTypes.Integer,converter:h}),s.JsonProp({name:"d",converter:d})],RsaPrivateKey.prototype,"privateExponent",void 0),i.__decorate([o.AsnProp({type:o.AsnPropTypes.Integer,converter:h}),s.JsonProp({name:"p",converter:d})],RsaPrivateKey.prototype,"prime1",void 0),i.__decorate([o.AsnProp({type:o.AsnPropTypes.Integer,converter:h}),s.JsonProp({name:"q",converter:d})],RsaPrivateKey.prototype,"prime2",void 0),i.__decorate([o.AsnProp({type:o.AsnPropTypes.Integer,converter:h}),s.JsonProp({name:"dp",converter:d})],RsaPrivateKey.prototype,"exponent1",void 0),i.__decorate([o.AsnProp({type:o.AsnPropTypes.Integer,converter:h}),s.JsonProp({name:"dq",converter:d})],RsaPrivateKey.prototype,"exponent2",void 0),i.__decorate([o.AsnProp({type:o.AsnPropTypes.Integer,converter:h}),s.JsonProp({name:"qi",converter:d})],RsaPrivateKey.prototype,"coefficient",void 0),i.__decorate([o.AsnProp({type:o.AsnPropTypes.Any,optional:!0})],RsaPrivateKey.prototype,"otherPrimeInfos",void 0);let RsaPublicKey=class RsaPublicKey{constructor(){this.modulus=new ArrayBuffer(0),this.publicExponent=new ArrayBuffer(0)}};i.__decorate([o.AsnProp({type:o.AsnPropTypes.Integer,converter:h}),s.JsonProp({name:"n",converter:d})],RsaPublicKey.prototype,"modulus",void 0),i.__decorate([o.AsnProp({type:o.AsnPropTypes.Integer,converter:h}),s.JsonProp({name:"e",converter:d})],RsaPublicKey.prototype,"publicExponent",void 0);let y=class{constructor(t){this.value=new ArrayBuffer(0),t&&(this.value=t)}toJSON(){let t=new Uint8Array(this.value);if(4!==t[0])throw new CryptoError("Wrong ECPoint. Current version supports only Uncompressed (0x04) point");t=new Uint8Array(this.value.slice(1));let r=t.length/2,a={x:n.Convert.ToBase64Url(t.buffer.slice(0,0+r)),y:n.Convert.ToBase64Url(t.buffer.slice(0+r,0+r+r))};return a}fromJSON(t){if(!("x"in t))throw Error("x: Missing required property");if(!("y"in t))throw Error("y: Missing required property");let r=n.Convert.FromBase64Url(t.x),a=n.Convert.FromBase64Url(t.y),o=n.combine(new Uint8Array([4]).buffer,r,a);return this.value=new Uint8Array(o).buffer,this}};i.__decorate([o.AsnProp({type:o.AsnPropTypes.OctetString})],y.prototype,"value",void 0),y=i.__decorate([o.AsnType({type:o.AsnTypeTypes.Choice})],y);let EcPrivateKey=class EcPrivateKey{constructor(){this.version=1,this.privateKey=new ArrayBuffer(0)}fromJSON(t){if(!("d"in t))throw Error("d: Missing required property");if(this.privateKey=n.Convert.FromBase64Url(t.d),"x"in t){let r=new y;r.fromJSON(t);let a=o.AsnSerializer.toASN(r);"valueHex"in a.valueBlock&&(this.publicKey=a.valueBlock.valueHex)}return this}toJSON(){let t={};return t.d=n.Convert.ToBase64Url(this.privateKey),this.publicKey&&Object.assign(t,new y(this.publicKey).toJSON()),t}};i.__decorate([o.AsnProp({type:o.AsnPropTypes.Integer,converter:o.AsnIntegerConverter})],EcPrivateKey.prototype,"version",void 0),i.__decorate([o.AsnProp({type:o.AsnPropTypes.OctetString})],EcPrivateKey.prototype,"privateKey",void 0),i.__decorate([o.AsnProp({context:0,type:o.AsnPropTypes.Any,optional:!0})],EcPrivateKey.prototype,"parameters",void 0),i.__decorate([o.AsnProp({context:1,type:o.AsnPropTypes.BitString,optional:!0})],EcPrivateKey.prototype,"publicKey",void 0);let m={fromASN:t=>{let r=new Uint8Array(t.valueBlock.valueHex);return 0===r[0]?r.buffer.slice(1):r.buffer},toASN:t=>{let r=new Uint8Array(t);if(r[0]>127){let t=new Uint8Array(r.length+1);return t.set(r,1),new l.Integer({valueHex:t.buffer})}return new l.Integer({valueHex:t})}};var g=Object.freeze({__proto__:null,AsnIntegerWithoutPaddingConverter:m});let EcUtils=class EcUtils{static decodePoint(t,r){let a=n.BufferSourceConverter.toUint8Array(t);if(0===a.length||4!==a[0])throw Error("Only uncompressed point format supported");let o=(a.length-1)/2;if(o!==Math.ceil(r/8))throw Error("Point does not match field size");let i=a.slice(1,o+1),s=a.slice(o+1,o+1+o);return{x:i,y:s}}static encodePoint(t,r){let a=Math.ceil(r/8);if(t.x.byteLength!==a||t.y.byteLength!==a)throw Error("X,Y coordinates don't match point size criteria");let o=n.BufferSourceConverter.toUint8Array(t.x),i=n.BufferSourceConverter.toUint8Array(t.y),s=new Uint8Array(2*a+1);return s[0]=4,s.set(o,1),s.set(i,a+1),s}static getSize(t){return Math.ceil(t/8)}static encodeSignature(t,r){let a=this.getSize(r),o=n.BufferSourceConverter.toUint8Array(t.r),i=n.BufferSourceConverter.toUint8Array(t.s),s=new Uint8Array(2*a);return s.set(this.padStart(o,a)),s.set(this.padStart(i,a),a),s}static decodeSignature(t,r){let a=this.getSize(r),o=n.BufferSourceConverter.toUint8Array(t);if(o.length!==2*a)throw Error("Incorrect size of the signature");let i=o.slice(0,a),s=o.slice(a);return{r:this.trimStart(i),s:this.trimStart(s)}}static trimStart(t){let r=0;for(;r<t.length-1&&0===t[r];)r++;return 0===r?t:t.slice(r,t.length)}static padStart(t,r){if(r===t.length)return t;let a=new Uint8Array(r);return a.set(t,r-t.length),a}};let EcDsaSignature=class EcDsaSignature{constructor(){this.r=new ArrayBuffer(0),this.s=new ArrayBuffer(0)}static fromWebCryptoSignature(t){let r=t.byteLength/2,a=EcUtils.decodeSignature(t,8*r),o=new EcDsaSignature;return o.r=n.BufferSourceConverter.toArrayBuffer(a.r),o.s=n.BufferSourceConverter.toArrayBuffer(a.s),o}toWebCryptoSignature(t){null!=t||(t=8*Math.max(this.r.byteLength,this.s.byteLength));let r=EcUtils.encodeSignature(this,t);return r.buffer}};i.__decorate([o.AsnProp({type:o.AsnPropTypes.Integer,converter:m})],EcDsaSignature.prototype,"r",void 0),i.__decorate([o.AsnProp({type:o.AsnPropTypes.Integer,converter:m})],EcDsaSignature.prototype,"s",void 0);let OneAsymmetricKey=class OneAsymmetricKey extends PrivateKeyInfo{};i.__decorate([o.AsnProp({context:1,implicit:!0,type:o.AsnPropTypes.BitString,optional:!0})],OneAsymmetricKey.prototype,"publicKey",void 0);let b=class{constructor(){this.value=new ArrayBuffer(0)}fromJSON(t){if(!t.d)throw Error("d: Missing required property");return this.value=n.Convert.FromBase64Url(t.d),this}toJSON(){let t={d:n.Convert.ToBase64Url(this.value)};return t}};i.__decorate([o.AsnProp({type:o.AsnPropTypes.OctetString})],b.prototype,"value",void 0),b=i.__decorate([o.AsnType({type:o.AsnTypeTypes.Choice})],b);let v=class{constructor(t){this.value=new ArrayBuffer(0),t&&(this.value=t)}toJSON(){let t={x:n.Convert.ToBase64Url(this.value)};return t}fromJSON(t){if(!("x"in t))throw Error("x: Missing required property");return this.value=n.Convert.FromBase64Url(t.x),this}};i.__decorate([o.AsnProp({type:o.AsnPropTypes.BitString})],v.prototype,"value",void 0),v=i.__decorate([o.AsnType({type:o.AsnTypeTypes.Choice})],v);let S=class{};i.__decorate([o.AsnProp({type:o.AsnPropTypes.OctetString}),s.JsonProp({type:s.JsonPropTypes.String,converter:d})],S.prototype,"d",void 0),S=i.__decorate([o.AsnType({type:o.AsnTypeTypes.Choice})],S);let C="1.2.840.10045.3.1.7",w="1.3.132.0",A=`${w}.34`,k=`${w}.35`,B=`${w}.10`,P="1.3.36.3.3.2.8.1.1",E=`${P}.1`,_=`${P}.2`,R=`${P}.3`,T=`${P}.4`,O=`${P}.5`,I=`${P}.6`,K=`${P}.7`,N=`${P}.8`,U=`${P}.9`,D=`${P}.10`,L=`${P}.11`,j=`${P}.12`,q=`${P}.13`,W=`${P}.14`;var H=Object.freeze({__proto__:null,AlgorithmIdentifier:AlgorithmIdentifier,get CurvePrivateKey(){return S},EcDsaSignature:EcDsaSignature,EcPrivateKey:EcPrivateKey,get EcPublicKey(){return y},get EdPrivateKey(){return b},get EdPublicKey(){return v},get ObjectIdentifier(){return c},OneAsymmetricKey:OneAsymmetricKey,PrivateKeyInfo:PrivateKeyInfo,PublicKeyInfo:PublicKeyInfo,RsaPrivateKey:RsaPrivateKey,RsaPublicKey:RsaPublicKey,converters:g,idBrainpoolP160r1:E,idBrainpoolP160t1:_,idBrainpoolP192r1:R,idBrainpoolP192t1:T,idBrainpoolP224r1:O,idBrainpoolP224t1:I,idBrainpoolP256r1:K,idBrainpoolP256t1:N,idBrainpoolP320r1:U,idBrainpoolP320t1:D,idBrainpoolP384r1:L,idBrainpoolP384t1:j,idBrainpoolP512r1:q,idBrainpoolP512t1:W,idEd25519:"1.3.101.112",idEd448:"1.3.101.113",idEllipticCurve:w,idSecp256k1:B,idSecp256r1:C,idSecp384r1:A,idSecp521r1:k,idVersionOne:P,idX25519:"1.3.101.110",idX448:"1.3.101.111"});let EcCurves=class EcCurves{constructor(){}static register(t){let r=new c;r.value=t.id;let a=o.AsnConvert.serialize(r);this.items.push({...t,raw:a}),this.names.push(t.name)}static find(t){for(let r of(t=t.toUpperCase(),this.items))if(r.name.toUpperCase()===t||r.id.toUpperCase()===t)return r;return null}static get(t){let r=this.find(t);if(!r)throw Error(`Unsupported EC named curve '${t}'`);return r}};EcCurves.items=[],EcCurves.names=[],EcCurves.register({name:"P-256",id:C,size:256}),EcCurves.register({name:"P-384",id:A,size:384}),EcCurves.register({name:"P-521",id:k,size:521}),EcCurves.register({name:"K-256",id:B,size:256}),EcCurves.register({name:"brainpoolP160r1",id:E,size:160}),EcCurves.register({name:"brainpoolP160t1",id:_,size:160}),EcCurves.register({name:"brainpoolP192r1",id:R,size:192}),EcCurves.register({name:"brainpoolP192t1",id:T,size:192}),EcCurves.register({name:"brainpoolP224r1",id:O,size:224}),EcCurves.register({name:"brainpoolP224t1",id:I,size:224}),EcCurves.register({name:"brainpoolP256r1",id:K,size:256}),EcCurves.register({name:"brainpoolP256t1",id:N,size:256}),EcCurves.register({name:"brainpoolP320r1",id:U,size:320}),EcCurves.register({name:"brainpoolP320t1",id:D,size:320}),EcCurves.register({name:"brainpoolP384r1",id:L,size:384}),EcCurves.register({name:"brainpoolP384t1",id:j,size:384}),EcCurves.register({name:"brainpoolP512r1",id:q,size:512}),EcCurves.register({name:"brainpoolP512t1",id:W,size:512});let ShakeProvider=class ShakeProvider extends ProviderCrypto{constructor(){super(...arguments),this.usages=[],this.defaultLength=0}digest(...t){return t[0]={length:this.defaultLength,...t[0]},super.digest.apply(this,t)}checkDigest(t,r){super.checkDigest(t,r);let a=t.length||0;if("number"!=typeof a)throw TypeError("length: Is not a Number");if(a<0)throw TypeError("length: Is negative")}};let Crypto=class Crypto{get[Symbol.toStringTag](){return"Crypto"}randomUUID(){let t=this.getRandomValues(new Uint8Array(16));t[6]=15&t[6]|64,t[8]=63&t[8]|128;let r=n.Convert.ToHex(t).toLowerCase();return`${r.substring(0,8)}-${r.substring(8,12)}-${r.substring(12,16)}-${r.substring(16,20)}-${r.substring(20)}`}};let ProviderStorage=class ProviderStorage{constructor(){this.items={}}get(t){return this.items[t.toLowerCase()]||null}set(t){this.items[t.name.toLowerCase()]=t}removeAt(t){let r=this.get(t.toLowerCase());return r&&delete this.items[t],r}has(t){return!!this.get(t)}get length(){return Object.keys(this.items).length}get algorithms(){let t=[];for(let r in this.items){let a=this.items[r];t.push(a.name)}return t.sort()}};let SubtleCrypto=class SubtleCrypto{constructor(){this.providers=new ProviderStorage}static isHashedAlgorithm(t){return!!t&&"object"==typeof t&&"name"in t&&"hash"in t}get[Symbol.toStringTag](){return"SubtleCrypto"}async digest(...t){this.checkRequiredArguments(t,2,"digest");let[r,a,...o]=t,i=this.prepareAlgorithm(r),s=n.BufferSourceConverter.toArrayBuffer(a),l=this.getProvider(i.name),u=await l.digest(i,s,...o);return u}async generateKey(...t){this.checkRequiredArguments(t,3,"generateKey");let[r,a,n,...o]=t,i=this.prepareAlgorithm(r),s=this.getProvider(i.name),l=await s.generateKey({...i,name:s.name},a,n,...o);return l}async sign(...t){this.checkRequiredArguments(t,3,"sign");let[r,a,o,...i]=t;this.checkCryptoKey(a);let s=this.prepareAlgorithm(r),l=n.BufferSourceConverter.toArrayBuffer(o),u=this.getProvider(s.name),c=await u.sign({...s,name:u.name},a,l,...i);return c}async verify(...t){this.checkRequiredArguments(t,4,"verify");let[r,a,o,i,...s]=t;this.checkCryptoKey(a);let l=this.prepareAlgorithm(r),u=n.BufferSourceConverter.toArrayBuffer(i),c=n.BufferSourceConverter.toArrayBuffer(o),d=this.getProvider(l.name),h=await d.verify({...l,name:d.name},a,c,u,...s);return h}async encrypt(...t){this.checkRequiredArguments(t,3,"encrypt");let[r,a,o,...i]=t;this.checkCryptoKey(a);let s=this.prepareAlgorithm(r),l=n.BufferSourceConverter.toArrayBuffer(o),u=this.getProvider(s.name),c=await u.encrypt({...s,name:u.name},a,l,{keyUsage:!0},...i);return c}async decrypt(...t){this.checkRequiredArguments(t,3,"decrypt");let[r,a,o,...i]=t;this.checkCryptoKey(a);let s=this.prepareAlgorithm(r),l=n.BufferSourceConverter.toArrayBuffer(o),u=this.getProvider(s.name),c=await u.decrypt({...s,name:u.name},a,l,{keyUsage:!0},...i);return c}async deriveBits(...t){this.checkRequiredArguments(t,3,"deriveBits");let[r,a,n,...o]=t;this.checkCryptoKey(a);let i=this.prepareAlgorithm(r),s=this.getProvider(i.name),l=await s.deriveBits({...i,name:s.name},a,n,{keyUsage:!0},...o);return l}async deriveKey(...t){this.checkRequiredArguments(t,5,"deriveKey");let[r,a,n,o,i,...s]=t,l=this.prepareAlgorithm(n),u=this.getProvider(l.name);u.checkDerivedKeyParams(l);let c=this.prepareAlgorithm(r),d=this.getProvider(c.name);d.checkCryptoKey(a,"deriveKey");let h=await d.deriveBits({...c,name:d.name},a,n.length||512,{keyUsage:!1},...s);return this.importKey("raw",h,n,o,i,...s)}async exportKey(...t){this.checkRequiredArguments(t,2,"exportKey");let[r,a,...n]=t;this.checkCryptoKey(a);let o=this.getProvider(a.algorithm.name),i=await o.exportKey(r,a,...n);return i}async importKey(...t){this.checkRequiredArguments(t,5,"importKey");let[r,a,o,i,s,...l]=t,u=this.prepareAlgorithm(o),c=this.getProvider(u.name);if(-1!==["pkcs8","spki","raw"].indexOf(r)){let t=n.BufferSourceConverter.toArrayBuffer(a);return c.importKey(r,t,{...u,name:c.name},i,s,...l)}if(!a.kty)throw TypeError("keyData: Is not JSON");return c.importKey(r,a,{...u,name:c.name},i,s,...l)}async wrapKey(t,r,a,o,...i){let s=await this.exportKey(t,r,...i);if("jwk"===t){let t=JSON.stringify(s);s=n.Convert.FromUtf8String(t)}let l=this.prepareAlgorithm(o),u=n.BufferSourceConverter.toArrayBuffer(s),c=this.getProvider(l.name);return c.encrypt({...l,name:c.name},a,u,{keyUsage:!1},...i)}async unwrapKey(t,r,a,o,i,s,l,...u){let c=this.prepareAlgorithm(o),d=n.BufferSourceConverter.toArrayBuffer(r),h=this.getProvider(c.name),p=await h.decrypt({...c,name:h.name},a,d,{keyUsage:!1},...u);if("jwk"===t)try{p=JSON.parse(n.Convert.ToUtf8String(p))}catch(r){let t=TypeError("wrappedKey: Is not a JSON");throw t.internal=r,t}return this.importKey(t,p,i,s,l,...u)}checkRequiredArguments(t,r,a){if(t.length<r)throw TypeError(`Failed to execute '${a}' on 'SubtleCrypto': ${r} arguments required, but only ${t.length} present`)}prepareAlgorithm(t){if("string"==typeof t)return{name:t};if(SubtleCrypto.isHashedAlgorithm(t)){let r={...t};return r.hash=this.prepareAlgorithm(t.hash),r}return{...t}}getProvider(t){let r=this.providers.get(t);if(!r)throw new AlgorithmError("Unrecognized name");return r}checkCryptoKey(t){if(!(t instanceof CryptoKey))throw TypeError("Key is not of type 'CryptoKey'")}};var M=Object.freeze({__proto__:null,converters:p});let z=["crv","e","k","kty","n","x","y"];Object.defineProperty(r,"BufferSourceConverter",{enumerable:!0,get:function(){return n.BufferSourceConverter}}),r.AesCbcProvider=class extends AesProvider{constructor(){super(...arguments),this.name="AES-CBC",this.usages=["encrypt","decrypt","wrapKey","unwrapKey"]}checkAlgorithmParams(t){if(this.checkRequiredProperty(t,"iv"),!(t.iv instanceof ArrayBuffer||ArrayBuffer.isView(t.iv)))throw TypeError("iv: Is not of type '(ArrayBuffer or ArrayBufferView)'");if(16!==t.iv.byteLength)throw TypeError("iv: Must have length 16 bytes")}},r.AesCmacProvider=class extends AesProvider{constructor(){super(...arguments),this.name="AES-CMAC",this.usages=["sign","verify"]}checkAlgorithmParams(t){if(this.checkRequiredProperty(t,"length"),"number"!=typeof t.length)throw TypeError("length: Is not a Number");if(t.length<1)throw new OperationError("length: Must be more than 0")}},r.AesCtrProvider=class extends AesProvider{constructor(){super(...arguments),this.name="AES-CTR",this.usages=["encrypt","decrypt","wrapKey","unwrapKey"]}checkAlgorithmParams(t){if(this.checkRequiredProperty(t,"counter"),!(t.counter instanceof ArrayBuffer||ArrayBuffer.isView(t.counter)))throw TypeError("counter: Is not of type '(ArrayBuffer or ArrayBufferView)'");if(16!==t.counter.byteLength)throw TypeError("iv: Must have length 16 bytes");if(this.checkRequiredProperty(t,"length"),"number"!=typeof t.length)throw TypeError("length: Is not a Number");if(t.length<1)throw new OperationError("length: Must be more than 0")}},r.AesEcbProvider=class extends AesProvider{constructor(){super(...arguments),this.name="AES-ECB",this.usages=["encrypt","decrypt","wrapKey","unwrapKey"]}},r.AesGcmProvider=class extends AesProvider{constructor(){super(...arguments),this.name="AES-GCM",this.usages=["encrypt","decrypt","wrapKey","unwrapKey"]}checkAlgorithmParams(t){if(this.checkRequiredProperty(t,"iv"),!(t.iv instanceof ArrayBuffer||ArrayBuffer.isView(t.iv)))throw TypeError("iv: Is not of type '(ArrayBuffer or ArrayBufferView)'");if(t.iv.byteLength<1)throw new OperationError("iv: Must have length more than 0 and less than 2^64 - 1");switch("tagLength"in t||(t.tagLength=128),t.tagLength){case 32:case 64:case 96:case 104:case 112:case 120:case 128:break;default:throw new OperationError("tagLength: Must be one of 32, 64, 96, 104, 112, 120 or 128")}}},r.AesKwProvider=class extends AesProvider{constructor(){super(...arguments),this.name="AES-KW",this.usages=["wrapKey","unwrapKey"]}},r.AesProvider=AesProvider,r.AlgorithmError=AlgorithmError,r.Crypto=Crypto,r.CryptoError=CryptoError,r.CryptoKey=CryptoKey,r.DesProvider=class extends ProviderCrypto{constructor(){super(...arguments),this.usages=["encrypt","decrypt","wrapKey","unwrapKey"]}checkAlgorithmParams(t){if(this.ivSize){if(this.checkRequiredProperty(t,"iv"),!(t.iv instanceof ArrayBuffer||ArrayBuffer.isView(t.iv)))throw TypeError("iv: Is not of type '(ArrayBuffer or ArrayBufferView)'");if(t.iv.byteLength!==this.ivSize)throw TypeError(`iv: Must have length ${this.ivSize} bytes`)}}checkGenerateKeyParams(t){if(this.checkRequiredProperty(t,"length"),"number"!=typeof t.length)throw TypeError("length: Is not of type Number");if(t.length!==this.keySizeBits)throw new OperationError(`algorithm.length: Must be ${this.keySizeBits}`)}checkDerivedKeyParams(t){this.checkGenerateKeyParams(t)}},r.EcCurves=EcCurves,r.EcUtils=EcUtils,r.EcdhEsProvider=class extends EcdhProvider{constructor(){super(...arguments),this.name="ECDH-ES",this.namedCurves=["X25519","X448"]}},r.EcdhProvider=EcdhProvider,r.EcdsaProvider=class extends EllipticProvider{constructor(){super(...arguments),this.name="ECDSA",this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512"],this.usages={privateKey:["sign"],publicKey:["verify"]},this.namedCurves=["P-256","P-384","P-521","K-256"]}checkAlgorithmParams(t){this.checkRequiredProperty(t,"hash"),this.checkHashAlgorithm(t.hash,this.hashAlgorithms)}},r.EdDsaProvider=class extends EllipticProvider{constructor(){super(...arguments),this.name="EdDSA",this.usages={privateKey:["sign"],publicKey:["verify"]},this.namedCurves=["Ed25519","Ed448"]}},r.EllipticProvider=EllipticProvider,r.HkdfProvider=class extends ProviderCrypto{constructor(){super(...arguments),this.name="HKDF",this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512"],this.usages=["deriveKey","deriveBits"]}checkAlgorithmParams(t){if(this.checkRequiredProperty(t,"hash"),this.checkHashAlgorithm(t.hash,this.hashAlgorithms),this.checkRequiredProperty(t,"salt"),!n.BufferSourceConverter.isBufferSource(t.salt)||(this.checkRequiredProperty(t,"info"),!n.BufferSourceConverter.isBufferSource(t.info)))throw TypeError("salt: Is not of type '(ArrayBuffer or ArrayBufferView)'")}checkImportKey(t,r,a,n,o,...i){if(super.checkImportKey(t,r,a,n,o),n)throw SyntaxError("extractable: Must be 'false'")}},r.HmacProvider=class extends ProviderCrypto{constructor(){super(...arguments),this.name="HMAC",this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512"],this.usages=["sign","verify"]}getDefaultLength(t){switch(t.toUpperCase()){case"SHA-1":case"SHA-256":case"SHA-384":case"SHA-512":return 512;default:throw Error(`Unknown algorithm name '${t}'`)}}checkGenerateKeyParams(t){if(this.checkRequiredProperty(t,"hash"),this.checkHashAlgorithm(t.hash,this.hashAlgorithms),"length"in t){if("number"!=typeof t.length)throw TypeError("length: Is not a Number");if(t.length<1)throw RangeError("length: Number is out of range")}}checkImportParams(t){this.checkRequiredProperty(t,"hash"),this.checkHashAlgorithm(t.hash,this.hashAlgorithms)}},r.JwkUtils=class{static async thumbprint(t,r,a){let o=this.format(r,!0);return a.subtle.digest(t,n.Convert.FromBinary(JSON.stringify(o)))}static format(t,r=!1){let a=Object.entries(t);return r&&(a=a.filter(t=>z.includes(t[0]))),Object.fromEntries(a=a.sort(([t],[r])=>t>r?1:t<r?-1:0))}},r.OperationError=OperationError,r.Pbkdf2Provider=class extends ProviderCrypto{constructor(){super(...arguments),this.name="PBKDF2",this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512"],this.usages=["deriveBits","deriveKey"]}checkAlgorithmParams(t){if(this.checkRequiredProperty(t,"hash"),this.checkHashAlgorithm(t.hash,this.hashAlgorithms),this.checkRequiredProperty(t,"salt"),!(t.salt instanceof ArrayBuffer||ArrayBuffer.isView(t.salt)))throw TypeError("salt: Is not of type '(ArrayBuffer or ArrayBufferView)'");if(this.checkRequiredProperty(t,"iterations"),"number"!=typeof t.iterations)throw TypeError("iterations: Is not a Number");if(t.iterations<1)throw TypeError("iterations: Is less than 1")}checkImportKey(t,r,a,n,o,...i){if(super.checkImportKey(t,r,a,n,o),n)throw SyntaxError("extractable: Must be 'false'")}},r.PemConverter=class{static toArrayBuffer(t){let r=t.replace(/-{5}(BEGIN|END) .*-{5}/g,"").replace("\r","").replace("\n","");return n.Convert.FromBase64(r)}static toUint8Array(t){let r=this.toArrayBuffer(t);return new Uint8Array(r)}static fromBufferSource(t,r){let a;let o=n.Convert.ToBase64(t),i=0,s=[];for(;;)if((a=o.slice(i,i+=64)).length){if(s.push(a),a.length<64)break}else break;let l=r.toUpperCase();return`-----BEGIN ${l}-----
${s.join("\n")}
-----END ${l}-----`}static isPEM(t){return/-----BEGIN .+-----[A-Za-z0-9+\/\+\=\s\n]+-----END .+-----/i.test(t)}static getTagName(t){if(!this.isPEM(t))throw Error("Bad parameter. Incoming data is not right PEM");let r=/-----BEGIN (.+)-----/.exec(t);if(!r)throw Error("Cannot get tag from PEM");return r[1]}static hasTagName(t,r){let a=this.getTagName(t);return r.toLowerCase()===a.toLowerCase()}static isCertificate(t){return this.hasTagName(t,"certificate")}static isCertificateRequest(t){return this.hasTagName(t,"certificate request")}static isCRL(t){return this.hasTagName(t,"x509 crl")}static isPublicKey(t){return this.hasTagName(t,"public key")}},r.ProviderCrypto=ProviderCrypto,r.ProviderStorage=ProviderStorage,r.RequiredPropertyError=RequiredPropertyError,r.RsaOaepProvider=class extends RsaProvider{constructor(){super(...arguments),this.name="RSA-OAEP",this.usages={privateKey:["decrypt","unwrapKey"],publicKey:["encrypt","wrapKey"]}}checkAlgorithmParams(t){if(t.label&&!(t.label instanceof ArrayBuffer||ArrayBuffer.isView(t.label)))throw TypeError("label: Is not of type '(ArrayBuffer or ArrayBufferView)'")}},r.RsaProvider=RsaProvider,r.RsaPssProvider=class extends RsaProvider{constructor(){super(...arguments),this.name="RSA-PSS",this.usages={privateKey:["sign"],publicKey:["verify"]}}checkAlgorithmParams(t){if(this.checkRequiredProperty(t,"saltLength"),"number"!=typeof t.saltLength)throw TypeError("saltLength: Is not a Number");if(t.saltLength<0)throw RangeError("saltLength: Must be positive number")}},r.RsaSsaProvider=class extends RsaProvider{constructor(){super(...arguments),this.name="RSASSA-PKCS1-v1_5",this.usages={privateKey:["sign"],publicKey:["verify"]}}},r.Shake128Provider=class extends ShakeProvider{constructor(){super(...arguments),this.name="shake128",this.defaultLength=16}},r.Shake256Provider=class extends ShakeProvider{constructor(){super(...arguments),this.name="shake256",this.defaultLength=32}},r.ShakeProvider=ShakeProvider,r.SubtleCrypto=SubtleCrypto,r.UnsupportedOperationError=UnsupportedOperationError,r.asn1=H,r.isJWK=isJWK,r.json=M},13284:(t,r,a)=>{Object.defineProperty(r,"__esModule",{value:!0});let n=a(64955),o=a(87561),i=a(49411);a(88849),a(22286),a(65628),a(84492),a(72254),a(47261),a(41041),a(87503);let{stat:s}=o.promises,fromBlob=(t,r,a="")=>new n._Blob([new BlobDataItem({path:r,size:t.size,lastModified:t.mtimeMs,start:0})],{type:a}),fromFile=(t,r,a="")=>new n.File([new BlobDataItem({path:r,size:t.size,lastModified:t.mtimeMs,start:0})],i.basename(r),{type:a,lastModified:t.mtimeMs});let BlobDataItem=class BlobDataItem{#e;#t;constructor(t){this.#e=t.path,this.#t=t.start,this.size=t.size,this.lastModified=t.lastModified,this.originalSize=void 0===t.originalSize?t.size:t.originalSize}slice(t,r){return new BlobDataItem({path:this.#e,lastModified:this.lastModified,originalSize:this.originalSize,size:r-t,start:this.#t+t})}async *stream(){let{mtimeMs:t,size:r}=await s(this.#e);if(t>this.lastModified||this.originalSize!==r)throw new n.nodeDomexception("The requested file could not be read, typically due to permission problems that have occurred after a reference to a file was acquired.","NotReadableError");yield*o.createReadStream(this.#e,{start:this.#t,end:this.#t+this.size-1})}get[Symbol.toStringTag](){return"Blob"}};let l=globalThis.fetch||n.fetch,u=globalThis.Blob||n._Blob,c=globalThis.File||n.File,d=globalThis.FormData||n.FormData,h=globalThis.Headers||n.Headers,p=globalThis.Request||n.Request,y=globalThis.Response||n.Response,m=globalThis.AbortController||n.AbortController;r.AbortError=n.AbortError,r.FetchError=n.FetchError,r.isRedirect=n.isRedirect,r.AbortController=m,r.Blob=u,r.File=c,r.FormData=d,r.Headers=h,r.Request=p,r.Response=y,r.blobFrom=(t,r)=>s(t).then(a=>fromBlob(a,t,r)),r.blobFromSync=(t,r)=>fromBlob(o.statSync(t),t,r),r.default=l,r.fetch=l,r.fileFrom=(t,r)=>s(t).then(a=>fromFile(a,t,r)),r.fileFromSync=(t,r)=>fromFile(o.statSync(t),t,r)},64955:(t,r,a)=>{let n=a(88849),o=a(22286),i=a(65628),s=a(84492),l=a(72254),u=a(47261),c=a(41041),d=a(87503);a(87561),a(49411);var h,p="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},y={exports:{}};if(!globalThis.ReadableStream)try{let t=a(97742),{emitWarning:r}=t;try{t.emitWarning=()=>{},Object.assign(globalThis,a(72477)),t.emitWarning=r}catch(a){throw t.emitWarning=r,a}}catch(t){Object.assign(globalThis,(h||(h=1,function(t){let r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol:t=>`Symbol(${t})`;function noop(){}let a="undefined"!=typeof self?self:void 0!==p?p:void 0;function typeIsObject(t){return"object"==typeof t&&null!==t||"function"==typeof t}let n=Promise,o=Promise.prototype.then,i=Promise.resolve.bind(n),s=Promise.reject.bind(n);function newPromise(t){return new n(t)}function PerformPromiseThen(t,r,a){return o.call(t,r,a)}function uponPromise(t,r,a){PerformPromiseThen(PerformPromiseThen(t,r,a),void 0,noop)}function uponRejection(t,r){uponPromise(t,void 0,r)}function setPromiseIsHandledToTrue(t){PerformPromiseThen(t,void 0,noop)}let l=(()=>{let t=a&&a.queueMicrotask;if("function"==typeof t)return t;let r=i(void 0);return t=>PerformPromiseThen(r,t)})();function reflectCall(t,r,a){if("function"!=typeof t)throw TypeError("Argument is not a function");return Function.prototype.apply.call(t,r,a)}function promiseCall(t,r,a){try{var n;return n=reflectCall(t,r,a),i(n)}catch(t){return s(t)}}let SimpleQueue=class SimpleQueue{constructor(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}get length(){return this._size}push(t){let r=this._back,a=r;16383===r._elements.length&&(a={_elements:[],_next:void 0}),r._elements.push(t),a!==r&&(this._back=a,r._next=a),++this._size}shift(){let t=this._front,r=t,a=this._cursor,n=a+1,o=t._elements,i=o[a];return 16384===n&&(r=t._next,n=0),--this._size,this._cursor=n,t!==r&&(this._front=r),o[a]=void 0,i}forEach(t){let r=this._cursor,a=this._front,n=a._elements;for(;(r!==n.length||void 0!==a._next)&&(r!==n.length||(n=(a=a._next)._elements,r=0,0!==n.length));)t(n[r]),++r}peek(){let t=this._front,r=this._cursor;return t._elements[r]}};function ReadableStreamReaderGenericInitialize(t,r){var a;t._ownerReadableStream=r,r._reader=t,"readable"===r._state?defaultReaderClosedPromiseInitialize(t):"closed"===r._state?(defaultReaderClosedPromiseInitialize(t),defaultReaderClosedPromiseResolve(t)):(a=r._storedError,defaultReaderClosedPromiseInitialize(t),defaultReaderClosedPromiseReject(t,a))}function ReadableStreamReaderGenericCancel(t,r){let a=t._ownerReadableStream;return ReadableStreamCancel(a,r)}function ReadableStreamReaderGenericRelease(t){var r,a;"readable"===t._ownerReadableStream._state?defaultReaderClosedPromiseReject(t,TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):(r=t,a=TypeError("Reader was released and can no longer be used to monitor the stream's closedness"),defaultReaderClosedPromiseInitialize(r),defaultReaderClosedPromiseReject(r,a)),t._ownerReadableStream._reader=void 0,t._ownerReadableStream=void 0}function readerLockException(t){return TypeError("Cannot "+t+" a stream using a released reader")}function defaultReaderClosedPromiseInitialize(t){t._closedPromise=newPromise((r,a)=>{t._closedPromise_resolve=r,t._closedPromise_reject=a})}function defaultReaderClosedPromiseReject(t,r){void 0!==t._closedPromise_reject&&(setPromiseIsHandledToTrue(t._closedPromise),t._closedPromise_reject(r),t._closedPromise_resolve=void 0,t._closedPromise_reject=void 0)}function defaultReaderClosedPromiseResolve(t){void 0!==t._closedPromise_resolve&&(t._closedPromise_resolve(void 0),t._closedPromise_resolve=void 0,t._closedPromise_reject=void 0)}let u=r("[[AbortSteps]]"),c=r("[[ErrorSteps]]"),d=r("[[CancelSteps]]"),h=r("[[PullSteps]]"),y=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},m=Math.trunc||function(t){return t<0?Math.ceil(t):Math.floor(t)};function assertDictionary(t,r){if(void 0!==t&&!("object"==typeof t||"function"==typeof t))throw TypeError(`${r} is not an object.`)}function assertFunction(t,r){if("function"!=typeof t)throw TypeError(`${r} is not a function.`)}function assertObject(t,r){if(!("object"==typeof t&&null!==t||"function"==typeof t))throw TypeError(`${r} is not an object.`)}function assertRequiredArgument(t,r,a){if(void 0===t)throw TypeError(`Parameter ${r} is required in '${a}'.`)}function assertRequiredField(t,r,a){if(void 0===t)throw TypeError(`${r} is required in '${a}'.`)}function convertUnrestrictedDouble(t){return Number(t)}function convertUnsignedLongLongWithEnforceRange(t,r){var a,n;let o=Number.MAX_SAFE_INTEGER,i=Number(t);if(!y(i=0===(a=i)?0:a))throw TypeError(`${r} is not a finite number`);if((i=0===(n=m(i))?0:n)<0||i>o)throw TypeError(`${r} is outside the accepted range of 0 to ${o}, inclusive`);return y(i)&&0!==i?i:0}function assertReadableStream(t,r){if(!IsReadableStream(t))throw TypeError(`${r} is not a ReadableStream.`)}function AcquireReadableStreamDefaultReader(t){return new ReadableStreamDefaultReader(t)}function ReadableStreamAddReadRequest(t,r){t._reader._readRequests.push(r)}function ReadableStreamFulfillReadRequest(t,r,a){let n=t._reader,o=n._readRequests.shift();a?o._closeSteps():o._chunkSteps(r)}function ReadableStreamGetNumReadRequests(t){return t._reader._readRequests.length}function ReadableStreamHasDefaultReader(t){let r=t._reader;return!!(void 0!==r&&IsReadableStreamDefaultReader(r))}let ReadableStreamDefaultReader=class ReadableStreamDefaultReader{constructor(t){if(assertRequiredArgument(t,1,"ReadableStreamDefaultReader"),assertReadableStream(t,"First parameter"),IsReadableStreamLocked(t))throw TypeError("This stream has already been locked for exclusive reading by another reader");ReadableStreamReaderGenericInitialize(this,t),this._readRequests=new SimpleQueue}get closed(){return IsReadableStreamDefaultReader(this)?this._closedPromise:s(defaultReaderBrandCheckException("closed"))}cancel(t){return IsReadableStreamDefaultReader(this)?void 0===this._ownerReadableStream?s(readerLockException("cancel")):ReadableStreamReaderGenericCancel(this,t):s(defaultReaderBrandCheckException("cancel"))}read(){let t,r;if(!IsReadableStreamDefaultReader(this))return s(defaultReaderBrandCheckException("read"));if(void 0===this._ownerReadableStream)return s(readerLockException("read from"));let a=newPromise((a,n)=>{t=a,r=n});return ReadableStreamDefaultReaderRead(this,{_chunkSteps:r=>t({value:r,done:!1}),_closeSteps:()=>t({value:void 0,done:!0}),_errorSteps:t=>r(t)}),a}releaseLock(){if(!IsReadableStreamDefaultReader(this))throw defaultReaderBrandCheckException("releaseLock");if(void 0!==this._ownerReadableStream){if(this._readRequests.length>0)throw TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");ReadableStreamReaderGenericRelease(this)}}};function IsReadableStreamDefaultReader(t){return!!(typeIsObject(t)&&Object.prototype.hasOwnProperty.call(t,"_readRequests"))&&t instanceof ReadableStreamDefaultReader}function ReadableStreamDefaultReaderRead(t,r){let a=t._ownerReadableStream;a._disturbed=!0,"closed"===a._state?r._closeSteps():"errored"===a._state?r._errorSteps(a._storedError):a._readableStreamController[h](r)}function defaultReaderBrandCheckException(t){return TypeError(`ReadableStreamDefaultReader.prototype.${t} can only be used on a ReadableStreamDefaultReader`)}Object.defineProperties(ReadableStreamDefaultReader.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),"symbol"==typeof r.toStringTag&&Object.defineProperty(ReadableStreamDefaultReader.prototype,r.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0});let g=Object.getPrototypeOf(Object.getPrototypeOf(async function*(){}).prototype);let ReadableStreamAsyncIteratorImpl=class ReadableStreamAsyncIteratorImpl{constructor(t,r){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=t,this._preventCancel=r}next(){let nextSteps=()=>this._nextSteps();return this._ongoingPromise=this._ongoingPromise?PerformPromiseThen(this._ongoingPromise,nextSteps,nextSteps):nextSteps(),this._ongoingPromise}return(t){let returnSteps=()=>this._returnSteps(t);return this._ongoingPromise?PerformPromiseThen(this._ongoingPromise,returnSteps,returnSteps):returnSteps()}_nextSteps(){let t,r;if(this._isFinished)return Promise.resolve({value:void 0,done:!0});let a=this._reader;if(void 0===a._ownerReadableStream)return s(readerLockException("iterate"));let n=newPromise((a,n)=>{t=a,r=n});return ReadableStreamDefaultReaderRead(a,{_chunkSteps:r=>{this._ongoingPromise=void 0,l(()=>t({value:r,done:!1}))},_closeSteps:()=>{this._ongoingPromise=void 0,this._isFinished=!0,ReadableStreamReaderGenericRelease(a),t({value:void 0,done:!0})},_errorSteps:t=>{this._ongoingPromise=void 0,this._isFinished=!0,ReadableStreamReaderGenericRelease(a),r(t)}}),n}_returnSteps(t){if(this._isFinished)return Promise.resolve({value:t,done:!0});this._isFinished=!0;let r=this._reader;if(void 0===r._ownerReadableStream)return s(readerLockException("finish iterating"));if(!this._preventCancel){let a=ReadableStreamReaderGenericCancel(r,t);return ReadableStreamReaderGenericRelease(r),PerformPromiseThen(a,()=>({value:t,done:!0}),void 0)}return ReadableStreamReaderGenericRelease(r),i({value:t,done:!0})}};let b={next(){return IsReadableStreamAsyncIterator(this)?this._asyncIteratorImpl.next():s(streamAsyncIteratorBrandCheckException("next"))},return(t){return IsReadableStreamAsyncIterator(this)?this._asyncIteratorImpl.return(t):s(streamAsyncIteratorBrandCheckException("return"))}};function IsReadableStreamAsyncIterator(t){if(!typeIsObject(t)||!Object.prototype.hasOwnProperty.call(t,"_asyncIteratorImpl"))return!1;try{return t._asyncIteratorImpl instanceof ReadableStreamAsyncIteratorImpl}catch(t){return!1}}function streamAsyncIteratorBrandCheckException(t){return TypeError(`ReadableStreamAsyncIterator.${t} can only be used on a ReadableSteamAsyncIterator`)}void 0!==g&&Object.setPrototypeOf(b,g);let v=Number.isNaN||function(t){return t!=t};function CreateArrayFromList(t){return t.slice()}function CopyDataBlockBytes(t,r,a,n,o){new Uint8Array(t).set(new Uint8Array(a,n,o),r)}function ArrayBufferSlice(t,r,a){if(t.slice)return t.slice(r,a);let n=a-r,o=new ArrayBuffer(n);return CopyDataBlockBytes(o,0,t,r,n),o}function CloneAsUint8Array(t){let r=ArrayBufferSlice(t.buffer,t.byteOffset,t.byteOffset+t.byteLength);return new Uint8Array(r)}function DequeueValue(t){let r=t._queue.shift();return t._queueTotalSize-=r.size,t._queueTotalSize<0&&(t._queueTotalSize=0),r.value}function EnqueueValueWithSize(t,r,a){if(!(!("number"!=typeof a||v(a))&&!(a<0))||a===1/0)throw RangeError("Size must be a finite, non-NaN, non-negative number.");t._queue.push({value:r,size:a}),t._queueTotalSize+=a}function ResetQueue(t){t._queue=new SimpleQueue,t._queueTotalSize=0}let ReadableStreamBYOBRequest=class ReadableStreamBYOBRequest{constructor(){throw TypeError("Illegal constructor")}get view(){if(!IsReadableStreamBYOBRequest(this))throw byobRequestBrandCheckException("view");return this._view}respond(t){if(!IsReadableStreamBYOBRequest(this))throw byobRequestBrandCheckException("respond");if(assertRequiredArgument(t,1,"respond"),t=convertUnsignedLongLongWithEnforceRange(t,"First parameter"),void 0===this._associatedReadableByteStreamController)throw TypeError("This BYOB request has been invalidated");this._view.buffer,ReadableByteStreamControllerRespond(this._associatedReadableByteStreamController,t)}respondWithNewView(t){if(!IsReadableStreamBYOBRequest(this))throw byobRequestBrandCheckException("respondWithNewView");if(assertRequiredArgument(t,1,"respondWithNewView"),!ArrayBuffer.isView(t))throw TypeError("You can only respond with array buffer views");if(void 0===this._associatedReadableByteStreamController)throw TypeError("This BYOB request has been invalidated");t.buffer,ReadableByteStreamControllerRespondWithNewView(this._associatedReadableByteStreamController,t)}};Object.defineProperties(ReadableStreamBYOBRequest.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),"symbol"==typeof r.toStringTag&&Object.defineProperty(ReadableStreamBYOBRequest.prototype,r.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});let ReadableByteStreamController=class ReadableByteStreamController{constructor(){throw TypeError("Illegal constructor")}get byobRequest(){if(!IsReadableByteStreamController(this))throw byteStreamControllerBrandCheckException("byobRequest");return ReadableByteStreamControllerGetBYOBRequest(this)}get desiredSize(){if(!IsReadableByteStreamController(this))throw byteStreamControllerBrandCheckException("desiredSize");return ReadableByteStreamControllerGetDesiredSize(this)}close(){if(!IsReadableByteStreamController(this))throw byteStreamControllerBrandCheckException("close");if(this._closeRequested)throw TypeError("The stream has already been closed; do not close it again!");let t=this._controlledReadableByteStream._state;if("readable"!==t)throw TypeError(`The stream (in ${t} state) is not in the readable state and cannot be closed`);ReadableByteStreamControllerClose(this)}enqueue(t){if(!IsReadableByteStreamController(this))throw byteStreamControllerBrandCheckException("enqueue");if(assertRequiredArgument(t,1,"enqueue"),!ArrayBuffer.isView(t))throw TypeError("chunk must be an array buffer view");if(0===t.byteLength)throw TypeError("chunk must have non-zero byteLength");if(0===t.buffer.byteLength)throw TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw TypeError("stream is closed or draining");let r=this._controlledReadableByteStream._state;if("readable"!==r)throw TypeError(`The stream (in ${r} state) is not in the readable state and cannot be enqueued to`);ReadableByteStreamControllerEnqueue(this,t)}error(t){if(!IsReadableByteStreamController(this))throw byteStreamControllerBrandCheckException("error");ReadableByteStreamControllerError(this,t)}[d](t){ReadableByteStreamControllerClearPendingPullIntos(this),ResetQueue(this);let r=this._cancelAlgorithm(t);return ReadableByteStreamControllerClearAlgorithms(this),r}[h](t){let r=this._controlledReadableByteStream;if(this._queueTotalSize>0){let r=this._queue.shift();this._queueTotalSize-=r.byteLength,ReadableByteStreamControllerHandleQueueDrain(this);let a=new Uint8Array(r.buffer,r.byteOffset,r.byteLength);t._chunkSteps(a);return}let a=this._autoAllocateChunkSize;if(void 0!==a){let r;try{r=new ArrayBuffer(a)}catch(r){t._errorSteps(r);return}let n={buffer:r,bufferByteLength:a,byteOffset:0,byteLength:a,bytesFilled:0,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(n)}ReadableStreamAddReadRequest(r,t),ReadableByteStreamControllerCallPullIfNeeded(this)}};function IsReadableByteStreamController(t){return!!(typeIsObject(t)&&Object.prototype.hasOwnProperty.call(t,"_controlledReadableByteStream"))&&t instanceof ReadableByteStreamController}function IsReadableStreamBYOBRequest(t){return!!(typeIsObject(t)&&Object.prototype.hasOwnProperty.call(t,"_associatedReadableByteStreamController"))&&t instanceof ReadableStreamBYOBRequest}function ReadableByteStreamControllerCallPullIfNeeded(t){let r=function(t){let r=t._controlledReadableByteStream;if("readable"!==r._state||t._closeRequested||!t._started)return!1;if(ReadableStreamHasDefaultReader(r)&&ReadableStreamGetNumReadRequests(r)>0||ReadableStreamHasBYOBReader(r)&&ReadableStreamGetNumReadIntoRequests(r)>0)return!0;let a=ReadableByteStreamControllerGetDesiredSize(t);return a>0}(t);if(!r)return;if(t._pulling){t._pullAgain=!0;return}t._pulling=!0;let a=t._pullAlgorithm();uponPromise(a,()=>{t._pulling=!1,t._pullAgain&&(t._pullAgain=!1,ReadableByteStreamControllerCallPullIfNeeded(t))},r=>{ReadableByteStreamControllerError(t,r)})}function ReadableByteStreamControllerClearPendingPullIntos(t){ReadableByteStreamControllerInvalidateBYOBRequest(t),t._pendingPullIntos=new SimpleQueue}function ReadableByteStreamControllerCommitPullIntoDescriptor(t,r){let a=!1;"closed"===t._state&&(a=!0);let n=ReadableByteStreamControllerConvertPullIntoDescriptor(r);"default"===r.readerType?ReadableStreamFulfillReadRequest(t,n,a):function(t,r,a){let n=t._reader,o=n._readIntoRequests.shift();a?o._closeSteps(r):o._chunkSteps(r)}(t,n,a)}function ReadableByteStreamControllerConvertPullIntoDescriptor(t){let r=t.bytesFilled,a=t.elementSize;return new t.viewConstructor(t.buffer,t.byteOffset,r/a)}function ReadableByteStreamControllerEnqueueChunkToQueue(t,r,a,n){t._queue.push({buffer:r,byteOffset:a,byteLength:n}),t._queueTotalSize+=n}function ReadableByteStreamControllerFillPullIntoDescriptorFromQueue(t,r){let a=r.elementSize,n=r.bytesFilled-r.bytesFilled%a,o=Math.min(t._queueTotalSize,r.byteLength-r.bytesFilled),i=r.bytesFilled+o,s=i-i%a,l=o,u=!1;s>n&&(l=s-r.bytesFilled,u=!0);let c=t._queue;for(;l>0;){let a=c.peek(),n=Math.min(l,a.byteLength),o=r.byteOffset+r.bytesFilled;CopyDataBlockBytes(r.buffer,o,a.buffer,a.byteOffset,n),a.byteLength===n?c.shift():(a.byteOffset+=n,a.byteLength-=n),t._queueTotalSize-=n,ReadableByteStreamControllerFillHeadPullIntoDescriptor(t,n,r),l-=n}return u}function ReadableByteStreamControllerFillHeadPullIntoDescriptor(t,r,a){a.bytesFilled+=r}function ReadableByteStreamControllerHandleQueueDrain(t){0===t._queueTotalSize&&t._closeRequested?(ReadableByteStreamControllerClearAlgorithms(t),ReadableStreamClose(t._controlledReadableByteStream)):ReadableByteStreamControllerCallPullIfNeeded(t)}function ReadableByteStreamControllerInvalidateBYOBRequest(t){null!==t._byobRequest&&(t._byobRequest._associatedReadableByteStreamController=void 0,t._byobRequest._view=null,t._byobRequest=null)}function ReadableByteStreamControllerProcessPullIntoDescriptorsUsingQueue(t){for(;t._pendingPullIntos.length>0;){if(0===t._queueTotalSize)return;let r=t._pendingPullIntos.peek();ReadableByteStreamControllerFillPullIntoDescriptorFromQueue(t,r)&&(ReadableByteStreamControllerShiftPendingPullInto(t),ReadableByteStreamControllerCommitPullIntoDescriptor(t._controlledReadableByteStream,r))}}function ReadableByteStreamControllerRespondInternal(t,r){let a=t._pendingPullIntos.peek();ReadableByteStreamControllerInvalidateBYOBRequest(t);let n=t._controlledReadableByteStream._state;"closed"===n?function(t,r){let a=t._controlledReadableByteStream;if(ReadableStreamHasBYOBReader(a))for(;ReadableStreamGetNumReadIntoRequests(a)>0;){let r=ReadableByteStreamControllerShiftPendingPullInto(t);ReadableByteStreamControllerCommitPullIntoDescriptor(a,r)}}(t):function(t,r,a){if(ReadableByteStreamControllerFillHeadPullIntoDescriptor(t,r,a),a.bytesFilled<a.elementSize)return;ReadableByteStreamControllerShiftPendingPullInto(t);let n=a.bytesFilled%a.elementSize;if(n>0){let r=a.byteOffset+a.bytesFilled,o=ArrayBufferSlice(a.buffer,r-n,r);ReadableByteStreamControllerEnqueueChunkToQueue(t,o,0,o.byteLength)}a.bytesFilled-=n,ReadableByteStreamControllerCommitPullIntoDescriptor(t._controlledReadableByteStream,a),ReadableByteStreamControllerProcessPullIntoDescriptorsUsingQueue(t)}(t,r,a),ReadableByteStreamControllerCallPullIfNeeded(t)}function ReadableByteStreamControllerShiftPendingPullInto(t){let r=t._pendingPullIntos.shift();return r}function ReadableByteStreamControllerClearAlgorithms(t){t._pullAlgorithm=void 0,t._cancelAlgorithm=void 0}function ReadableByteStreamControllerClose(t){let r=t._controlledReadableByteStream;if(!t._closeRequested&&"readable"===r._state){if(t._queueTotalSize>0){t._closeRequested=!0;return}if(t._pendingPullIntos.length>0){let r=t._pendingPullIntos.peek();if(r.bytesFilled>0){let r=TypeError("Insufficient bytes to fill elements in the given buffer");throw ReadableByteStreamControllerError(t,r),r}}ReadableByteStreamControllerClearAlgorithms(t),ReadableStreamClose(r)}}function ReadableByteStreamControllerEnqueue(t,r){let a=t._controlledReadableByteStream;if(t._closeRequested||"readable"!==a._state)return;let n=r.buffer,o=r.byteOffset,i=r.byteLength;if(t._pendingPullIntos.length>0){let r=t._pendingPullIntos.peek();r.buffer,r.buffer=r.buffer}if(ReadableByteStreamControllerInvalidateBYOBRequest(t),ReadableStreamHasDefaultReader(a)){if(0===ReadableStreamGetNumReadRequests(a))ReadableByteStreamControllerEnqueueChunkToQueue(t,n,o,i);else{t._pendingPullIntos.length>0&&ReadableByteStreamControllerShiftPendingPullInto(t);let r=new Uint8Array(n,o,i);ReadableStreamFulfillReadRequest(a,r,!1)}}else ReadableStreamHasBYOBReader(a)?(ReadableByteStreamControllerEnqueueChunkToQueue(t,n,o,i),ReadableByteStreamControllerProcessPullIntoDescriptorsUsingQueue(t)):ReadableByteStreamControllerEnqueueChunkToQueue(t,n,o,i);ReadableByteStreamControllerCallPullIfNeeded(t)}function ReadableByteStreamControllerError(t,r){let a=t._controlledReadableByteStream;"readable"===a._state&&(ReadableByteStreamControllerClearPendingPullIntos(t),ResetQueue(t),ReadableByteStreamControllerClearAlgorithms(t),ReadableStreamError(a,r))}function ReadableByteStreamControllerGetBYOBRequest(t){if(null===t._byobRequest&&t._pendingPullIntos.length>0){let r=t._pendingPullIntos.peek(),a=new Uint8Array(r.buffer,r.byteOffset+r.bytesFilled,r.byteLength-r.bytesFilled),n=Object.create(ReadableStreamBYOBRequest.prototype);n._associatedReadableByteStreamController=t,n._view=a,t._byobRequest=n}return t._byobRequest}function ReadableByteStreamControllerGetDesiredSize(t){let r=t._controlledReadableByteStream._state;return"errored"===r?null:"closed"===r?0:t._strategyHWM-t._queueTotalSize}function ReadableByteStreamControllerRespond(t,r){let a=t._pendingPullIntos.peek(),n=t._controlledReadableByteStream._state;if("closed"===n){if(0!==r)throw TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(0===r)throw TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(a.bytesFilled+r>a.byteLength)throw RangeError("bytesWritten out of range")}a.buffer=a.buffer,ReadableByteStreamControllerRespondInternal(t,r)}function ReadableByteStreamControllerRespondWithNewView(t,r){let a=t._pendingPullIntos.peek(),n=t._controlledReadableByteStream._state;if("closed"===n){if(0!==r.byteLength)throw TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(0===r.byteLength)throw TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(a.byteOffset+a.bytesFilled!==r.byteOffset)throw RangeError("The region specified by view does not match byobRequest");if(a.bufferByteLength!==r.buffer.byteLength)throw RangeError("The buffer of view has different capacity than byobRequest");if(a.bytesFilled+r.byteLength>a.byteLength)throw RangeError("The region specified by view is larger than byobRequest");let o=r.byteLength;a.buffer=r.buffer,ReadableByteStreamControllerRespondInternal(t,o)}function SetUpReadableByteStreamController(t,r,a,n,o,s,l){r._controlledReadableByteStream=t,r._pullAgain=!1,r._pulling=!1,r._byobRequest=null,r._queue=r._queueTotalSize=void 0,ResetQueue(r),r._closeRequested=!1,r._started=!1,r._strategyHWM=s,r._pullAlgorithm=n,r._cancelAlgorithm=o,r._autoAllocateChunkSize=l,r._pendingPullIntos=new SimpleQueue,t._readableStreamController=r;let u=a();uponPromise(i(u),()=>{r._started=!0,ReadableByteStreamControllerCallPullIfNeeded(r)},t=>{ReadableByteStreamControllerError(r,t)})}function byobRequestBrandCheckException(t){return TypeError(`ReadableStreamBYOBRequest.prototype.${t} can only be used on a ReadableStreamBYOBRequest`)}function byteStreamControllerBrandCheckException(t){return TypeError(`ReadableByteStreamController.prototype.${t} can only be used on a ReadableByteStreamController`)}function ReadableStreamAddReadIntoRequest(t,r){t._reader._readIntoRequests.push(r)}function ReadableStreamGetNumReadIntoRequests(t){return t._reader._readIntoRequests.length}function ReadableStreamHasBYOBReader(t){let r=t._reader;return!!(void 0!==r&&IsReadableStreamBYOBReader(r))}Object.defineProperties(ReadableByteStreamController.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),"symbol"==typeof r.toStringTag&&Object.defineProperty(ReadableByteStreamController.prototype,r.toStringTag,{value:"ReadableByteStreamController",configurable:!0});let ReadableStreamBYOBReader=class ReadableStreamBYOBReader{constructor(t){if(assertRequiredArgument(t,1,"ReadableStreamBYOBReader"),assertReadableStream(t,"First parameter"),IsReadableStreamLocked(t))throw TypeError("This stream has already been locked for exclusive reading by another reader");if(!IsReadableByteStreamController(t._readableStreamController))throw TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");ReadableStreamReaderGenericInitialize(this,t),this._readIntoRequests=new SimpleQueue}get closed(){return IsReadableStreamBYOBReader(this)?this._closedPromise:s(byobReaderBrandCheckException("closed"))}cancel(t){return IsReadableStreamBYOBReader(this)?void 0===this._ownerReadableStream?s(readerLockException("cancel")):ReadableStreamReaderGenericCancel(this,t):s(byobReaderBrandCheckException("cancel"))}read(t){let r,a;if(!IsReadableStreamBYOBReader(this))return s(byobReaderBrandCheckException("read"));if(!ArrayBuffer.isView(t))return s(TypeError("view must be an array buffer view"));if(0===t.byteLength)return s(TypeError("view must have non-zero byteLength"));if(0===t.buffer.byteLength)return s(TypeError("view's buffer must have non-zero byteLength"));if(t.buffer,void 0===this._ownerReadableStream)return s(readerLockException("read from"));let n=newPromise((t,n)=>{r=t,a=n});return ReadableStreamBYOBReaderRead(this,t,{_chunkSteps:t=>r({value:t,done:!1}),_closeSteps:t=>r({value:t,done:!0}),_errorSteps:t=>a(t)}),n}releaseLock(){if(!IsReadableStreamBYOBReader(this))throw byobReaderBrandCheckException("releaseLock");if(void 0!==this._ownerReadableStream){if(this._readIntoRequests.length>0)throw TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");ReadableStreamReaderGenericRelease(this)}}};function IsReadableStreamBYOBReader(t){return!!(typeIsObject(t)&&Object.prototype.hasOwnProperty.call(t,"_readIntoRequests"))&&t instanceof ReadableStreamBYOBReader}function ReadableStreamBYOBReaderRead(t,r,a){let n=t._ownerReadableStream;n._disturbed=!0,"errored"===n._state?a._errorSteps(n._storedError):function(t,r,a){let n=t._controlledReadableByteStream,o=1;r.constructor!==DataView&&(o=r.constructor.BYTES_PER_ELEMENT);let i=r.constructor,s=r.buffer,l={buffer:s,bufferByteLength:s.byteLength,byteOffset:r.byteOffset,byteLength:r.byteLength,bytesFilled:0,elementSize:o,viewConstructor:i,readerType:"byob"};if(t._pendingPullIntos.length>0){t._pendingPullIntos.push(l),ReadableStreamAddReadIntoRequest(n,a);return}if("closed"===n._state){let t=new i(l.buffer,l.byteOffset,0);a._closeSteps(t);return}if(t._queueTotalSize>0){if(ReadableByteStreamControllerFillPullIntoDescriptorFromQueue(t,l)){let r=ReadableByteStreamControllerConvertPullIntoDescriptor(l);ReadableByteStreamControllerHandleQueueDrain(t),a._chunkSteps(r);return}if(t._closeRequested){let r=TypeError("Insufficient bytes to fill elements in the given buffer");ReadableByteStreamControllerError(t,r),a._errorSteps(r);return}}t._pendingPullIntos.push(l),ReadableStreamAddReadIntoRequest(n,a),ReadableByteStreamControllerCallPullIfNeeded(t)}(n._readableStreamController,r,a)}function byobReaderBrandCheckException(t){return TypeError(`ReadableStreamBYOBReader.prototype.${t} can only be used on a ReadableStreamBYOBReader`)}function ExtractHighWaterMark(t,r){let{highWaterMark:a}=t;if(void 0===a)return r;if(v(a)||a<0)throw RangeError("Invalid highWaterMark");return a}function ExtractSizeAlgorithm(t){let{size:r}=t;return r||(()=>1)}function convertQueuingStrategy(t,r){assertDictionary(t,r);let a=null==t?void 0:t.highWaterMark,n=null==t?void 0:t.size;return{highWaterMark:void 0===a?void 0:convertUnrestrictedDouble(a),size:void 0===n?void 0:(assertFunction(n,`${r} has member 'size' that`),t=>convertUnrestrictedDouble(n(t)))}}function assertWritableStream(t,r){if(!IsWritableStream(t))throw TypeError(`${r} is not a WritableStream.`)}Object.defineProperties(ReadableStreamBYOBReader.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),"symbol"==typeof r.toStringTag&&Object.defineProperty(ReadableStreamBYOBReader.prototype,r.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});let S="function"==typeof AbortController;let WritableStream=class WritableStream{constructor(t={},r={}){void 0===t?t=null:assertObject(t,"First parameter");let a=convertQueuingStrategy(r,"Second parameter"),n=function(t,r){assertDictionary(t,r);let a=null==t?void 0:t.abort,n=null==t?void 0:t.close,o=null==t?void 0:t.start,i=null==t?void 0:t.type,s=null==t?void 0:t.write;return{abort:void 0===a?void 0:(assertFunction(a,`${r} has member 'abort' that`),r=>promiseCall(a,t,[r])),close:void 0===n?void 0:(assertFunction(n,`${r} has member 'close' that`),()=>promiseCall(n,t,[])),start:void 0===o?void 0:(assertFunction(o,`${r} has member 'start' that`),r=>reflectCall(o,t,[r])),write:void 0===s?void 0:(assertFunction(s,`${r} has member 'write' that`),(r,a)=>promiseCall(s,t,[r,a])),type:i}}(t,"First parameter");InitializeWritableStream(this);let o=n.type;if(void 0!==o)throw RangeError("Invalid type is specified");let s=ExtractSizeAlgorithm(a),l=ExtractHighWaterMark(a,1);(function(t,r,a,n){let o=Object.create(WritableStreamDefaultController.prototype),startAlgorithm=()=>void 0,writeAlgorithm=()=>i(void 0),closeAlgorithm=()=>i(void 0),abortAlgorithm=()=>i(void 0);void 0!==r.start&&(startAlgorithm=()=>r.start(o)),void 0!==r.write&&(writeAlgorithm=t=>r.write(t,o)),void 0!==r.close&&(closeAlgorithm=()=>r.close()),void 0!==r.abort&&(abortAlgorithm=t=>r.abort(t)),SetUpWritableStreamDefaultController(t,o,startAlgorithm,writeAlgorithm,closeAlgorithm,abortAlgorithm,a,n)})(this,n,l,s)}get locked(){if(!IsWritableStream(this))throw streamBrandCheckException$2("locked");return IsWritableStreamLocked(this)}abort(t){return IsWritableStream(this)?IsWritableStreamLocked(this)?s(TypeError("Cannot abort a stream that already has a writer")):WritableStreamAbort(this,t):s(streamBrandCheckException$2("abort"))}close(){return IsWritableStream(this)?IsWritableStreamLocked(this)?s(TypeError("Cannot close a stream that already has a writer")):WritableStreamCloseQueuedOrInFlight(this)?s(TypeError("Cannot close an already-closing stream")):WritableStreamClose(this):s(streamBrandCheckException$2("close"))}getWriter(){if(!IsWritableStream(this))throw streamBrandCheckException$2("getWriter");return new WritableStreamDefaultWriter(this)}};function InitializeWritableStream(t){t._state="writable",t._storedError=void 0,t._writer=void 0,t._writableStreamController=void 0,t._writeRequests=new SimpleQueue,t._inFlightWriteRequest=void 0,t._closeRequest=void 0,t._inFlightCloseRequest=void 0,t._pendingAbortRequest=void 0,t._backpressure=!1}function IsWritableStream(t){return!!(typeIsObject(t)&&Object.prototype.hasOwnProperty.call(t,"_writableStreamController"))&&t instanceof WritableStream}function IsWritableStreamLocked(t){return void 0!==t._writer}function WritableStreamAbort(t,r){var a;if("closed"===t._state||"errored"===t._state)return i(void 0);t._writableStreamController._abortReason=r,null===(a=t._writableStreamController._abortController)||void 0===a||a.abort();let n=t._state;if("closed"===n||"errored"===n)return i(void 0);if(void 0!==t._pendingAbortRequest)return t._pendingAbortRequest._promise;let o=!1;"erroring"===n&&(o=!0,r=void 0);let s=newPromise((a,n)=>{t._pendingAbortRequest={_promise:void 0,_resolve:a,_reject:n,_reason:r,_wasAlreadyErroring:o}});return t._pendingAbortRequest._promise=s,o||WritableStreamStartErroring(t,r),s}function WritableStreamClose(t){var r;let a=t._state;if("closed"===a||"errored"===a)return s(TypeError(`The stream (in ${a} state) is not in the writable state and cannot be closed`));let n=newPromise((r,a)=>{t._closeRequest={_resolve:r,_reject:a}}),o=t._writer;return void 0!==o&&t._backpressure&&"writable"===a&&defaultWriterReadyPromiseResolve(o),EnqueueValueWithSize(r=t._writableStreamController,C,0),WritableStreamDefaultControllerAdvanceQueueIfNeeded(r),n}function WritableStreamDealWithRejection(t,r){let a=t._state;if("writable"===a){WritableStreamStartErroring(t,r);return}WritableStreamFinishErroring(t)}function WritableStreamStartErroring(t,r){let a=t._writableStreamController;t._state="erroring",t._storedError=r;let n=t._writer;void 0!==n&&WritableStreamDefaultWriterEnsureReadyPromiseRejected(n,r),!(void 0!==t._inFlightWriteRequest||void 0!==t._inFlightCloseRequest)&&a._started&&WritableStreamFinishErroring(t)}function WritableStreamFinishErroring(t){t._state="errored",t._writableStreamController[c]();let r=t._storedError;if(t._writeRequests.forEach(t=>{t._reject(r)}),t._writeRequests=new SimpleQueue,void 0===t._pendingAbortRequest){WritableStreamRejectCloseAndClosedPromiseIfNeeded(t);return}let a=t._pendingAbortRequest;if(t._pendingAbortRequest=void 0,a._wasAlreadyErroring){a._reject(r),WritableStreamRejectCloseAndClosedPromiseIfNeeded(t);return}let n=t._writableStreamController[u](a._reason);uponPromise(n,()=>{a._resolve(),WritableStreamRejectCloseAndClosedPromiseIfNeeded(t)},r=>{a._reject(r),WritableStreamRejectCloseAndClosedPromiseIfNeeded(t)})}function WritableStreamCloseQueuedOrInFlight(t){return void 0!==t._closeRequest||void 0!==t._inFlightCloseRequest}function WritableStreamRejectCloseAndClosedPromiseIfNeeded(t){void 0!==t._closeRequest&&(t._closeRequest._reject(t._storedError),t._closeRequest=void 0);let r=t._writer;void 0!==r&&defaultWriterClosedPromiseReject(r,t._storedError)}function WritableStreamUpdateBackpressure(t,r){let a=t._writer;void 0!==a&&r!==t._backpressure&&(r?defaultWriterReadyPromiseInitialize(a):defaultWriterReadyPromiseResolve(a)),t._backpressure=r}Object.defineProperties(WritableStream.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),"symbol"==typeof r.toStringTag&&Object.defineProperty(WritableStream.prototype,r.toStringTag,{value:"WritableStream",configurable:!0});let WritableStreamDefaultWriter=class WritableStreamDefaultWriter{constructor(t){if(assertRequiredArgument(t,1,"WritableStreamDefaultWriter"),assertWritableStream(t,"First parameter"),IsWritableStreamLocked(t))throw TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=t,t._writer=this;let r=t._state;if("writable"===r)!WritableStreamCloseQueuedOrInFlight(t)&&t._backpressure?defaultWriterReadyPromiseInitialize(this):(defaultWriterReadyPromiseInitialize(this),defaultWriterReadyPromiseResolve(this)),defaultWriterClosedPromiseInitialize(this);else if("erroring"===r)defaultWriterReadyPromiseInitializeAsRejected(this,t._storedError),defaultWriterClosedPromiseInitialize(this);else if("closed"===r)defaultWriterReadyPromiseInitialize(this),defaultWriterReadyPromiseResolve(this),defaultWriterClosedPromiseInitialize(this),defaultWriterClosedPromiseResolve(this);else{let r=t._storedError;defaultWriterReadyPromiseInitializeAsRejected(this,r),defaultWriterClosedPromiseInitialize(this),defaultWriterClosedPromiseReject(this,r)}}get closed(){return IsWritableStreamDefaultWriter(this)?this._closedPromise:s(defaultWriterBrandCheckException("closed"))}get desiredSize(){if(!IsWritableStreamDefaultWriter(this))throw defaultWriterBrandCheckException("desiredSize");if(void 0===this._ownerWritableStream)throw defaultWriterLockException("desiredSize");return function(t){let r=t._ownerWritableStream,a=r._state;return"errored"===a||"erroring"===a?null:"closed"===a?0:WritableStreamDefaultControllerGetDesiredSize(r._writableStreamController)}(this)}get ready(){return IsWritableStreamDefaultWriter(this)?this._readyPromise:s(defaultWriterBrandCheckException("ready"))}abort(t){return IsWritableStreamDefaultWriter(this)?void 0===this._ownerWritableStream?s(defaultWriterLockException("abort")):function(t,r){let a=t._ownerWritableStream;return WritableStreamAbort(a,r)}(this,t):s(defaultWriterBrandCheckException("abort"))}close(){if(!IsWritableStreamDefaultWriter(this))return s(defaultWriterBrandCheckException("close"));let t=this._ownerWritableStream;return void 0===t?s(defaultWriterLockException("close")):WritableStreamCloseQueuedOrInFlight(t)?s(TypeError("Cannot close an already-closing stream")):WritableStreamDefaultWriterClose(this)}releaseLock(){if(!IsWritableStreamDefaultWriter(this))throw defaultWriterBrandCheckException("releaseLock");let t=this._ownerWritableStream;void 0!==t&&WritableStreamDefaultWriterRelease(this)}write(t){return IsWritableStreamDefaultWriter(this)?void 0===this._ownerWritableStream?s(defaultWriterLockException("write to")):WritableStreamDefaultWriterWrite(this,t):s(defaultWriterBrandCheckException("write"))}};function IsWritableStreamDefaultWriter(t){return!!(typeIsObject(t)&&Object.prototype.hasOwnProperty.call(t,"_ownerWritableStream"))&&t instanceof WritableStreamDefaultWriter}function WritableStreamDefaultWriterClose(t){let r=t._ownerWritableStream;return WritableStreamClose(r)}function WritableStreamDefaultWriterEnsureReadyPromiseRejected(t,r){"pending"===t._readyPromiseState?defaultWriterReadyPromiseReject(t,r):defaultWriterReadyPromiseInitializeAsRejected(t,r)}function WritableStreamDefaultWriterRelease(t){var r,a;let n=t._ownerWritableStream,o=TypeError("Writer was released and can no longer be used to monitor the stream's closedness");WritableStreamDefaultWriterEnsureReadyPromiseRejected(t,o),"pending"===t._closedPromiseState?defaultWriterClosedPromiseReject(t,o):(r=t,a=o,defaultWriterClosedPromiseInitialize(r),defaultWriterClosedPromiseReject(r,a)),n._writer=void 0,t._ownerWritableStream=void 0}function WritableStreamDefaultWriterWrite(t,r){let a=t._ownerWritableStream,n=a._writableStreamController,o=function(t,r){try{return t._strategySizeAlgorithm(r)}catch(r){return WritableStreamDefaultControllerErrorIfNeeded(t,r),1}}(n,r);if(a!==t._ownerWritableStream)return s(defaultWriterLockException("write to"));let i=a._state;if("errored"===i)return s(a._storedError);if(WritableStreamCloseQueuedOrInFlight(a)||"closed"===i)return s(TypeError("The stream is closing or closed and cannot be written to"));if("erroring"===i)return s(a._storedError);let l=function(t){let r=newPromise((r,a)=>{t._writeRequests.push({_resolve:r,_reject:a})});return r}(a);return function(t,r,a){try{EnqueueValueWithSize(t,r,a)}catch(r){WritableStreamDefaultControllerErrorIfNeeded(t,r);return}let n=t._controlledWritableStream;if(!WritableStreamCloseQueuedOrInFlight(n)&&"writable"===n._state){let r=WritableStreamDefaultControllerGetBackpressure(t);WritableStreamUpdateBackpressure(n,r)}WritableStreamDefaultControllerAdvanceQueueIfNeeded(t)}(n,r,o),l}Object.defineProperties(WritableStreamDefaultWriter.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),"symbol"==typeof r.toStringTag&&Object.defineProperty(WritableStreamDefaultWriter.prototype,r.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});let C={};let WritableStreamDefaultController=class WritableStreamDefaultController{constructor(){throw TypeError("Illegal constructor")}get abortReason(){if(!IsWritableStreamDefaultController(this))throw defaultControllerBrandCheckException$2("abortReason");return this._abortReason}get signal(){if(!IsWritableStreamDefaultController(this))throw defaultControllerBrandCheckException$2("signal");if(void 0===this._abortController)throw TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal}error(t){if(!IsWritableStreamDefaultController(this))throw defaultControllerBrandCheckException$2("error");let r=this._controlledWritableStream._state;"writable"===r&&WritableStreamDefaultControllerError(this,t)}[u](t){let r=this._abortAlgorithm(t);return WritableStreamDefaultControllerClearAlgorithms(this),r}[c](){ResetQueue(this)}};function IsWritableStreamDefaultController(t){return!!(typeIsObject(t)&&Object.prototype.hasOwnProperty.call(t,"_controlledWritableStream"))&&t instanceof WritableStreamDefaultController}function SetUpWritableStreamDefaultController(t,r,a,n,o,s,l,u){r._controlledWritableStream=t,t._writableStreamController=r,r._queue=void 0,r._queueTotalSize=void 0,ResetQueue(r),r._abortReason=void 0,r._abortController=function(){if(S)return new AbortController}(),r._started=!1,r._strategySizeAlgorithm=u,r._strategyHWM=l,r._writeAlgorithm=n,r._closeAlgorithm=o,r._abortAlgorithm=s;let c=WritableStreamDefaultControllerGetBackpressure(r);WritableStreamUpdateBackpressure(t,c);let d=a(),h=i(d);uponPromise(h,()=>{r._started=!0,WritableStreamDefaultControllerAdvanceQueueIfNeeded(r)},a=>{r._started=!0,WritableStreamDealWithRejection(t,a)})}function WritableStreamDefaultControllerClearAlgorithms(t){t._writeAlgorithm=void 0,t._closeAlgorithm=void 0,t._abortAlgorithm=void 0,t._strategySizeAlgorithm=void 0}function WritableStreamDefaultControllerGetDesiredSize(t){return t._strategyHWM-t._queueTotalSize}function WritableStreamDefaultControllerAdvanceQueueIfNeeded(t){let r=t._controlledWritableStream;if(!t._started||void 0!==r._inFlightWriteRequest)return;let a=r._state;if("erroring"===a){WritableStreamFinishErroring(r);return}if(0===t._queue.length)return;let n=function(t){let r=t._queue.peek();return r.value}(t);n===C?function(t){let r=t._controlledWritableStream;r._inFlightCloseRequest=r._closeRequest,r._closeRequest=void 0,DequeueValue(t);let a=t._closeAlgorithm();WritableStreamDefaultControllerClearAlgorithms(t),uponPromise(a,()=>{!function(t){t._inFlightCloseRequest._resolve(void 0),t._inFlightCloseRequest=void 0;let r=t._state;"erroring"===r&&(t._storedError=void 0,void 0!==t._pendingAbortRequest&&(t._pendingAbortRequest._resolve(),t._pendingAbortRequest=void 0)),t._state="closed";let a=t._writer;void 0!==a&&defaultWriterClosedPromiseResolve(a)}(r)},t=>{r._inFlightCloseRequest._reject(t),r._inFlightCloseRequest=void 0,void 0!==r._pendingAbortRequest&&(r._pendingAbortRequest._reject(t),r._pendingAbortRequest=void 0),WritableStreamDealWithRejection(r,t)})}(t):function(t,r){let a=t._controlledWritableStream;a._inFlightWriteRequest=a._writeRequests.shift();let n=t._writeAlgorithm(r);uponPromise(n,()=>{a._inFlightWriteRequest._resolve(void 0),a._inFlightWriteRequest=void 0;let r=a._state;if(DequeueValue(t),!WritableStreamCloseQueuedOrInFlight(a)&&"writable"===r){let r=WritableStreamDefaultControllerGetBackpressure(t);WritableStreamUpdateBackpressure(a,r)}WritableStreamDefaultControllerAdvanceQueueIfNeeded(t)},r=>{"writable"===a._state&&WritableStreamDefaultControllerClearAlgorithms(t),a._inFlightWriteRequest._reject(r),a._inFlightWriteRequest=void 0,WritableStreamDealWithRejection(a,r)})}(t,n)}function WritableStreamDefaultControllerErrorIfNeeded(t,r){"writable"===t._controlledWritableStream._state&&WritableStreamDefaultControllerError(t,r)}function WritableStreamDefaultControllerGetBackpressure(t){let r=WritableStreamDefaultControllerGetDesiredSize(t);return r<=0}function WritableStreamDefaultControllerError(t,r){let a=t._controlledWritableStream;WritableStreamDefaultControllerClearAlgorithms(t),WritableStreamStartErroring(a,r)}function streamBrandCheckException$2(t){return TypeError(`WritableStream.prototype.${t} can only be used on a WritableStream`)}function defaultControllerBrandCheckException$2(t){return TypeError(`WritableStreamDefaultController.prototype.${t} can only be used on a WritableStreamDefaultController`)}function defaultWriterBrandCheckException(t){return TypeError(`WritableStreamDefaultWriter.prototype.${t} can only be used on a WritableStreamDefaultWriter`)}function defaultWriterLockException(t){return TypeError("Cannot "+t+" a stream using a released writer")}function defaultWriterClosedPromiseInitialize(t){t._closedPromise=newPromise((r,a)=>{t._closedPromise_resolve=r,t._closedPromise_reject=a,t._closedPromiseState="pending"})}function defaultWriterClosedPromiseReject(t,r){void 0!==t._closedPromise_reject&&(setPromiseIsHandledToTrue(t._closedPromise),t._closedPromise_reject(r),t._closedPromise_resolve=void 0,t._closedPromise_reject=void 0,t._closedPromiseState="rejected")}function defaultWriterClosedPromiseResolve(t){void 0!==t._closedPromise_resolve&&(t._closedPromise_resolve(void 0),t._closedPromise_resolve=void 0,t._closedPromise_reject=void 0,t._closedPromiseState="resolved")}function defaultWriterReadyPromiseInitialize(t){t._readyPromise=newPromise((r,a)=>{t._readyPromise_resolve=r,t._readyPromise_reject=a}),t._readyPromiseState="pending"}function defaultWriterReadyPromiseInitializeAsRejected(t,r){defaultWriterReadyPromiseInitialize(t),defaultWriterReadyPromiseReject(t,r)}function defaultWriterReadyPromiseReject(t,r){void 0!==t._readyPromise_reject&&(setPromiseIsHandledToTrue(t._readyPromise),t._readyPromise_reject(r),t._readyPromise_resolve=void 0,t._readyPromise_reject=void 0,t._readyPromiseState="rejected")}function defaultWriterReadyPromiseResolve(t){void 0!==t._readyPromise_resolve&&(t._readyPromise_resolve(void 0),t._readyPromise_resolve=void 0,t._readyPromise_reject=void 0,t._readyPromiseState="fulfilled")}Object.defineProperties(WritableStreamDefaultController.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),"symbol"==typeof r.toStringTag&&Object.defineProperty(WritableStreamDefaultController.prototype,r.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});let w="undefined"!=typeof DOMException?DOMException:void 0,A=!function(t){if(!("function"==typeof t||"object"==typeof t))return!1;try{return new t,!0}catch(t){return!1}}(w)?function(){let ctor=function(t,r){this.message=t||"",this.name=r||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return ctor.prototype=Object.create(Error.prototype),Object.defineProperty(ctor.prototype,"constructor",{value:ctor,writable:!0,configurable:!0}),ctor}():w;function ReadableStreamPipeTo(t,r,a,n,o,l){let u=AcquireReadableStreamDefaultReader(t),c=new WritableStreamDefaultWriter(r);t._disturbed=!0;let d=!1,h=i(void 0);return newPromise((p,y)=>{var m,g;let b;if(void 0!==l){if(b=()=>{let a=new A("Aborted","AbortError"),s=[];n||s.push(()=>"writable"===r._state?WritableStreamAbort(r,a):i(void 0)),o||s.push(()=>"readable"===t._state?ReadableStreamCancel(t,a):i(void 0)),shutdownWithAction(()=>Promise.all(s.map(t=>t())),!0,a)},l.aborted){b();return}l.addEventListener("abort",b)}if(isOrBecomesErrored(t,u._closedPromise,t=>{n?shutdown(!0,t):shutdownWithAction(()=>WritableStreamAbort(r,t),!0,t)}),isOrBecomesErrored(r,c._closedPromise,r=>{o?shutdown(!0,r):shutdownWithAction(()=>ReadableStreamCancel(t,r),!0,r)}),m=u._closedPromise,g=()=>{a?shutdown():shutdownWithAction(()=>(function(t){let r=t._ownerWritableStream,a=r._state;return WritableStreamCloseQueuedOrInFlight(r)||"closed"===a?i(void 0):"errored"===a?s(r._storedError):WritableStreamDefaultWriterClose(t)})(c))},"closed"===t._state?g():uponPromise(m,g),WritableStreamCloseQueuedOrInFlight(r)||"closed"===r._state){let r=TypeError("the destination writable stream closed before all data could be piped to it");o?shutdown(!0,r):shutdownWithAction(()=>ReadableStreamCancel(t,r),!0,r)}function waitForWritesToFinish(){let t=h;return PerformPromiseThen(h,()=>t!==h?waitForWritesToFinish():void 0)}function isOrBecomesErrored(t,r,a){"errored"===t._state?a(t._storedError):uponRejection(r,a)}function shutdownWithAction(t,a,n){!d&&((d=!0,"writable"!==r._state||WritableStreamCloseQueuedOrInFlight(r))?doTheRest():uponPromise(waitForWritesToFinish(),doTheRest));function doTheRest(){uponPromise(t(),()=>finalize(a,n),t=>finalize(!0,t))}}function shutdown(t,a){!d&&((d=!0,"writable"!==r._state||WritableStreamCloseQueuedOrInFlight(r))?finalize(t,a):uponPromise(waitForWritesToFinish(),()=>finalize(t,a)))}function finalize(t,r){WritableStreamDefaultWriterRelease(c),ReadableStreamReaderGenericRelease(u),void 0!==l&&l.removeEventListener("abort",b),t?y(r):p(void 0)}setPromiseIsHandledToTrue(newPromise((t,r)=>{!function next(a){a?t():PerformPromiseThen(d?i(!0):PerformPromiseThen(c._readyPromise,()=>newPromise((t,r)=>{ReadableStreamDefaultReaderRead(u,{_chunkSteps:r=>{h=PerformPromiseThen(WritableStreamDefaultWriterWrite(c,r),void 0,noop),t(!1)},_closeSteps:()=>t(!0),_errorSteps:r})})),next,r)}(!1)}))})}let ReadableStreamDefaultController=class ReadableStreamDefaultController{constructor(){throw TypeError("Illegal constructor")}get desiredSize(){if(!IsReadableStreamDefaultController(this))throw defaultControllerBrandCheckException$1("desiredSize");return ReadableStreamDefaultControllerGetDesiredSize(this)}close(){if(!IsReadableStreamDefaultController(this))throw defaultControllerBrandCheckException$1("close");if(!ReadableStreamDefaultControllerCanCloseOrEnqueue(this))throw TypeError("The stream is not in a state that permits close");ReadableStreamDefaultControllerClose(this)}enqueue(t){if(!IsReadableStreamDefaultController(this))throw defaultControllerBrandCheckException$1("enqueue");if(!ReadableStreamDefaultControllerCanCloseOrEnqueue(this))throw TypeError("The stream is not in a state that permits enqueue");return ReadableStreamDefaultControllerEnqueue(this,t)}error(t){if(!IsReadableStreamDefaultController(this))throw defaultControllerBrandCheckException$1("error");ReadableStreamDefaultControllerError(this,t)}[d](t){ResetQueue(this);let r=this._cancelAlgorithm(t);return ReadableStreamDefaultControllerClearAlgorithms(this),r}[h](t){let r=this._controlledReadableStream;if(this._queue.length>0){let a=DequeueValue(this);this._closeRequested&&0===this._queue.length?(ReadableStreamDefaultControllerClearAlgorithms(this),ReadableStreamClose(r)):ReadableStreamDefaultControllerCallPullIfNeeded(this),t._chunkSteps(a)}else ReadableStreamAddReadRequest(r,t),ReadableStreamDefaultControllerCallPullIfNeeded(this)}};function IsReadableStreamDefaultController(t){return!!(typeIsObject(t)&&Object.prototype.hasOwnProperty.call(t,"_controlledReadableStream"))&&t instanceof ReadableStreamDefaultController}function ReadableStreamDefaultControllerCallPullIfNeeded(t){let r=ReadableStreamDefaultControllerShouldCallPull(t);if(!r)return;if(t._pulling){t._pullAgain=!0;return}t._pulling=!0;let a=t._pullAlgorithm();uponPromise(a,()=>{t._pulling=!1,t._pullAgain&&(t._pullAgain=!1,ReadableStreamDefaultControllerCallPullIfNeeded(t))},r=>{ReadableStreamDefaultControllerError(t,r)})}function ReadableStreamDefaultControllerShouldCallPull(t){let r=t._controlledReadableStream;if(!ReadableStreamDefaultControllerCanCloseOrEnqueue(t)||!t._started)return!1;if(IsReadableStreamLocked(r)&&ReadableStreamGetNumReadRequests(r)>0)return!0;let a=ReadableStreamDefaultControllerGetDesiredSize(t);return a>0}function ReadableStreamDefaultControllerClearAlgorithms(t){t._pullAlgorithm=void 0,t._cancelAlgorithm=void 0,t._strategySizeAlgorithm=void 0}function ReadableStreamDefaultControllerClose(t){if(!ReadableStreamDefaultControllerCanCloseOrEnqueue(t))return;let r=t._controlledReadableStream;t._closeRequested=!0,0===t._queue.length&&(ReadableStreamDefaultControllerClearAlgorithms(t),ReadableStreamClose(r))}function ReadableStreamDefaultControllerEnqueue(t,r){if(!ReadableStreamDefaultControllerCanCloseOrEnqueue(t))return;let a=t._controlledReadableStream;if(IsReadableStreamLocked(a)&&ReadableStreamGetNumReadRequests(a)>0)ReadableStreamFulfillReadRequest(a,r,!1);else{let a;try{a=t._strategySizeAlgorithm(r)}catch(r){throw ReadableStreamDefaultControllerError(t,r),r}try{EnqueueValueWithSize(t,r,a)}catch(r){throw ReadableStreamDefaultControllerError(t,r),r}}ReadableStreamDefaultControllerCallPullIfNeeded(t)}function ReadableStreamDefaultControllerError(t,r){let a=t._controlledReadableStream;"readable"===a._state&&(ResetQueue(t),ReadableStreamDefaultControllerClearAlgorithms(t),ReadableStreamError(a,r))}function ReadableStreamDefaultControllerGetDesiredSize(t){let r=t._controlledReadableStream._state;return"errored"===r?null:"closed"===r?0:t._strategyHWM-t._queueTotalSize}function ReadableStreamDefaultControllerCanCloseOrEnqueue(t){let r=t._controlledReadableStream._state;return!t._closeRequested&&"readable"===r}function SetUpReadableStreamDefaultController(t,r,a,n,o,s,l){r._controlledReadableStream=t,r._queue=void 0,r._queueTotalSize=void 0,ResetQueue(r),r._started=!1,r._closeRequested=!1,r._pullAgain=!1,r._pulling=!1,r._strategySizeAlgorithm=l,r._strategyHWM=s,r._pullAlgorithm=n,r._cancelAlgorithm=o,t._readableStreamController=r;let u=a();uponPromise(i(u),()=>{r._started=!0,ReadableStreamDefaultControllerCallPullIfNeeded(r)},t=>{ReadableStreamDefaultControllerError(r,t)})}function defaultControllerBrandCheckException$1(t){return TypeError(`ReadableStreamDefaultController.prototype.${t} can only be used on a ReadableStreamDefaultController`)}function convertPipeOptions(t,r){assertDictionary(t,r);let a=null==t?void 0:t.preventAbort,n=null==t?void 0:t.preventCancel,o=null==t?void 0:t.preventClose,i=null==t?void 0:t.signal;return void 0!==i&&function(t,r){if(!function(t){if("object"!=typeof t||null===t)return!1;try{return"boolean"==typeof t.aborted}catch(t){return!1}}(t))throw TypeError(`${r} is not an AbortSignal.`)}(i,`${r} has member 'signal' that`),{preventAbort:!!a,preventCancel:!!n,preventClose:!!o,signal:i}}Object.defineProperties(ReadableStreamDefaultController.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),"symbol"==typeof r.toStringTag&&Object.defineProperty(ReadableStreamDefaultController.prototype,r.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});let ReadableStream1=class ReadableStream1{constructor(t={},r={}){void 0===t?t=null:assertObject(t,"First parameter");let a=convertQueuingStrategy(r,"Second parameter"),n=function(t,r){assertDictionary(t,r);let a=null==t?void 0:t.autoAllocateChunkSize,n=null==t?void 0:t.cancel,o=null==t?void 0:t.pull,i=null==t?void 0:t.start,s=null==t?void 0:t.type;return{autoAllocateChunkSize:void 0===a?void 0:convertUnsignedLongLongWithEnforceRange(a,`${r} has member 'autoAllocateChunkSize' that`),cancel:void 0===n?void 0:(assertFunction(n,`${r} has member 'cancel' that`),r=>promiseCall(n,t,[r])),pull:void 0===o?void 0:(assertFunction(o,`${r} has member 'pull' that`),r=>promiseCall(o,t,[r])),start:void 0===i?void 0:(assertFunction(i,`${r} has member 'start' that`),r=>reflectCall(i,t,[r])),type:void 0===s?void 0:function(t,r){if("bytes"!=(t=`${t}`))throw TypeError(`${r} '${t}' is not a valid enumeration value for ReadableStreamType`);return t}(s,`${r} has member 'type' that`)}}(t,"First parameter");if(InitializeReadableStream(this),"bytes"===n.type){if(void 0!==a.size)throw RangeError("The strategy for a byte stream cannot have a size function");let t=ExtractHighWaterMark(a,0);!function(t,r,a){let n=Object.create(ReadableByteStreamController.prototype),startAlgorithm=()=>void 0,pullAlgorithm=()=>i(void 0),cancelAlgorithm=()=>i(void 0);void 0!==r.start&&(startAlgorithm=()=>r.start(n)),void 0!==r.pull&&(pullAlgorithm=()=>r.pull(n)),void 0!==r.cancel&&(cancelAlgorithm=t=>r.cancel(t));let o=r.autoAllocateChunkSize;if(0===o)throw TypeError("autoAllocateChunkSize must be greater than 0");SetUpReadableByteStreamController(t,n,startAlgorithm,pullAlgorithm,cancelAlgorithm,a,o)}(this,n,t)}else{let t=ExtractSizeAlgorithm(a),r=ExtractHighWaterMark(a,1);!function(t,r,a,n){let o=Object.create(ReadableStreamDefaultController.prototype),startAlgorithm=()=>void 0,pullAlgorithm=()=>i(void 0),cancelAlgorithm=()=>i(void 0);void 0!==r.start&&(startAlgorithm=()=>r.start(o)),void 0!==r.pull&&(pullAlgorithm=()=>r.pull(o)),void 0!==r.cancel&&(cancelAlgorithm=t=>r.cancel(t)),SetUpReadableStreamDefaultController(t,o,startAlgorithm,pullAlgorithm,cancelAlgorithm,a,n)}(this,n,r,t)}}get locked(){if(!IsReadableStream(this))throw streamBrandCheckException$1("locked");return IsReadableStreamLocked(this)}cancel(t){return IsReadableStream(this)?IsReadableStreamLocked(this)?s(TypeError("Cannot cancel a stream that already has a reader")):ReadableStreamCancel(this,t):s(streamBrandCheckException$1("cancel"))}getReader(t){if(!IsReadableStream(this))throw streamBrandCheckException$1("getReader");let r=function(t,r){assertDictionary(t,r);let a=null==t?void 0:t.mode;return{mode:void 0===a?void 0:function(t,r){if("byob"!=(t=`${t}`))throw TypeError(`${r} '${t}' is not a valid enumeration value for ReadableStreamReaderMode`);return t}(a,`${r} has member 'mode' that`)}}(t,"First parameter");return void 0===r.mode?AcquireReadableStreamDefaultReader(this):new ReadableStreamBYOBReader(this)}pipeThrough(t,r={}){if(!IsReadableStream(this))throw streamBrandCheckException$1("pipeThrough");assertRequiredArgument(t,1,"pipeThrough");let a=function(t,r){assertDictionary(t,r);let a=null==t?void 0:t.readable;assertRequiredField(a,"readable","ReadableWritablePair"),assertReadableStream(a,`${r} has member 'readable' that`);let n=null==t?void 0:t.writable;return assertRequiredField(n,"writable","ReadableWritablePair"),assertWritableStream(n,`${r} has member 'writable' that`),{readable:a,writable:n}}(t,"First parameter"),n=convertPipeOptions(r,"Second parameter");if(IsReadableStreamLocked(this))throw TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(IsWritableStreamLocked(a.writable))throw TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");let o=ReadableStreamPipeTo(this,a.writable,n.preventClose,n.preventAbort,n.preventCancel,n.signal);return setPromiseIsHandledToTrue(o),a.readable}pipeTo(t,r={}){let a;if(!IsReadableStream(this))return s(streamBrandCheckException$1("pipeTo"));if(void 0===t)return s("Parameter 1 is required in 'pipeTo'.");if(!IsWritableStream(t))return s(TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));try{a=convertPipeOptions(r,"Second parameter")}catch(t){return s(t)}return IsReadableStreamLocked(this)?s(TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):IsWritableStreamLocked(t)?s(TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):ReadableStreamPipeTo(this,t,a.preventClose,a.preventAbort,a.preventCancel,a.signal)}tee(){if(!IsReadableStream(this))throw streamBrandCheckException$1("tee");let t=IsReadableByteStreamController(this._readableStreamController)?function(t){let r,a,n,o,s,u=AcquireReadableStreamDefaultReader(t),c=!1,d=!1,h=!1,p=!1,y=!1,m=newPromise(t=>{s=t});function forwardReaderError(t){uponRejection(t._closedPromise,r=>{t===u&&(ReadableByteStreamControllerError(n._readableStreamController,r),ReadableByteStreamControllerError(o._readableStreamController,r),p&&y||s(void 0))})}function pullWithDefaultReader(){IsReadableStreamBYOBReader(u)&&(ReadableStreamReaderGenericRelease(u),forwardReaderError(u=AcquireReadableStreamDefaultReader(t))),ReadableStreamDefaultReaderRead(u,{_chunkSteps:r=>{l(()=>{d=!1,h=!1;let a=r;if(!p&&!y)try{a=CloneAsUint8Array(r)}catch(r){ReadableByteStreamControllerError(n._readableStreamController,r),ReadableByteStreamControllerError(o._readableStreamController,r),s(ReadableStreamCancel(t,r));return}p||ReadableByteStreamControllerEnqueue(n._readableStreamController,r),y||ReadableByteStreamControllerEnqueue(o._readableStreamController,a),c=!1,d?pull1Algorithm():h&&pull2Algorithm()})},_closeSteps:()=>{c=!1,p||ReadableByteStreamControllerClose(n._readableStreamController),y||ReadableByteStreamControllerClose(o._readableStreamController),n._readableStreamController._pendingPullIntos.length>0&&ReadableByteStreamControllerRespond(n._readableStreamController,0),o._readableStreamController._pendingPullIntos.length>0&&ReadableByteStreamControllerRespond(o._readableStreamController,0),p&&y||s(void 0)},_errorSteps:()=>{c=!1}})}function pullWithBYOBReader(r,a){IsReadableStreamDefaultReader(u)&&(ReadableStreamReaderGenericRelease(u),forwardReaderError(u=new ReadableStreamBYOBReader(t)));let i=a?o:n,m=a?n:o;ReadableStreamBYOBReaderRead(u,r,{_chunkSteps:r=>{l(()=>{d=!1,h=!1;let n=a?y:p,o=a?p:y;if(o)n||ReadableByteStreamControllerRespondWithNewView(i._readableStreamController,r);else{let a;try{a=CloneAsUint8Array(r)}catch(r){ReadableByteStreamControllerError(i._readableStreamController,r),ReadableByteStreamControllerError(m._readableStreamController,r),s(ReadableStreamCancel(t,r));return}n||ReadableByteStreamControllerRespondWithNewView(i._readableStreamController,r),ReadableByteStreamControllerEnqueue(m._readableStreamController,a)}c=!1,d?pull1Algorithm():h&&pull2Algorithm()})},_closeSteps:t=>{c=!1;let r=a?y:p,n=a?p:y;r||ReadableByteStreamControllerClose(i._readableStreamController),n||ReadableByteStreamControllerClose(m._readableStreamController),void 0!==t&&(r||ReadableByteStreamControllerRespondWithNewView(i._readableStreamController,t),!n&&m._readableStreamController._pendingPullIntos.length>0&&ReadableByteStreamControllerRespond(m._readableStreamController,0)),r&&n||s(void 0)},_errorSteps:()=>{c=!1}})}function pull1Algorithm(){if(c)return d=!0,i(void 0);c=!0;let t=ReadableByteStreamControllerGetBYOBRequest(n._readableStreamController);return null===t?pullWithDefaultReader():pullWithBYOBReader(t._view,!1),i(void 0)}function pull2Algorithm(){if(c)return h=!0,i(void 0);c=!0;let t=ReadableByteStreamControllerGetBYOBRequest(o._readableStreamController);return null===t?pullWithDefaultReader():pullWithBYOBReader(t._view,!0),i(void 0)}function startAlgorithm(){}return n=CreateReadableByteStream(startAlgorithm,pull1Algorithm,function(n){if(p=!0,r=n,y){let n=CreateArrayFromList([r,a]),o=ReadableStreamCancel(t,n);s(o)}return m}),o=CreateReadableByteStream(startAlgorithm,pull2Algorithm,function(n){if(y=!0,a=n,p){let n=CreateArrayFromList([r,a]),o=ReadableStreamCancel(t,n);s(o)}return m}),forwardReaderError(u),[n,o]}(this):function(t,r){let a,n,o,s,u;let c=AcquireReadableStreamDefaultReader(t),d=!1,h=!1,p=!1,y=!1,m=newPromise(t=>{u=t});function pullAlgorithm(){return d?h=!0:(d=!0,ReadableStreamDefaultReaderRead(c,{_chunkSteps:t=>{l(()=>{h=!1,p||ReadableStreamDefaultControllerEnqueue(o._readableStreamController,t),y||ReadableStreamDefaultControllerEnqueue(s._readableStreamController,t),d=!1,h&&pullAlgorithm()})},_closeSteps:()=>{d=!1,p||ReadableStreamDefaultControllerClose(o._readableStreamController),y||ReadableStreamDefaultControllerClose(s._readableStreamController),p&&y||u(void 0)},_errorSteps:()=>{d=!1}})),i(void 0)}function startAlgorithm(){}return o=CreateReadableStream(startAlgorithm,pullAlgorithm,function(r){if(p=!0,a=r,y){let r=CreateArrayFromList([a,n]),o=ReadableStreamCancel(t,r);u(o)}return m}),s=CreateReadableStream(startAlgorithm,pullAlgorithm,function(r){if(y=!0,n=r,p){let r=CreateArrayFromList([a,n]),o=ReadableStreamCancel(t,r);u(o)}return m}),uponRejection(c._closedPromise,t=>{ReadableStreamDefaultControllerError(o._readableStreamController,t),ReadableStreamDefaultControllerError(s._readableStreamController,t),p&&y||u(void 0)}),[o,s]}(this);return CreateArrayFromList(t)}values(t){if(!IsReadableStream(this))throw streamBrandCheckException$1("values");let r=function(t,r){assertDictionary(t,r);let a=null==t?void 0:t.preventCancel;return{preventCancel:!!a}}(t,"First parameter");return function(t,r){let a=AcquireReadableStreamDefaultReader(t),n=new ReadableStreamAsyncIteratorImpl(a,r),o=Object.create(b);return o._asyncIteratorImpl=n,o}(this,r.preventCancel)}};function CreateReadableStream(t,r,a,n=1,o=()=>1){let i=Object.create(ReadableStream1.prototype);InitializeReadableStream(i);let s=Object.create(ReadableStreamDefaultController.prototype);return SetUpReadableStreamDefaultController(i,s,t,r,a,n,o),i}function CreateReadableByteStream(t,r,a){let n=Object.create(ReadableStream1.prototype);InitializeReadableStream(n);let o=Object.create(ReadableByteStreamController.prototype);return SetUpReadableByteStreamController(n,o,t,r,a,0,void 0),n}function InitializeReadableStream(t){t._state="readable",t._reader=void 0,t._storedError=void 0,t._disturbed=!1}function IsReadableStream(t){return!!(typeIsObject(t)&&Object.prototype.hasOwnProperty.call(t,"_readableStreamController"))&&t instanceof ReadableStream1}function IsReadableStreamLocked(t){return void 0!==t._reader}function ReadableStreamCancel(t,r){if(t._disturbed=!0,"closed"===t._state)return i(void 0);if("errored"===t._state)return s(t._storedError);ReadableStreamClose(t);let a=t._reader;void 0!==a&&IsReadableStreamBYOBReader(a)&&(a._readIntoRequests.forEach(t=>{t._closeSteps(void 0)}),a._readIntoRequests=new SimpleQueue);let n=t._readableStreamController[d](r);return PerformPromiseThen(n,noop,void 0)}function ReadableStreamClose(t){t._state="closed";let r=t._reader;void 0!==r&&(defaultReaderClosedPromiseResolve(r),IsReadableStreamDefaultReader(r)&&(r._readRequests.forEach(t=>{t._closeSteps()}),r._readRequests=new SimpleQueue))}function ReadableStreamError(t,r){t._state="errored",t._storedError=r;let a=t._reader;void 0!==a&&(defaultReaderClosedPromiseReject(a,r),IsReadableStreamDefaultReader(a)?(a._readRequests.forEach(t=>{t._errorSteps(r)}),a._readRequests=new SimpleQueue):(a._readIntoRequests.forEach(t=>{t._errorSteps(r)}),a._readIntoRequests=new SimpleQueue))}function streamBrandCheckException$1(t){return TypeError(`ReadableStream.prototype.${t} can only be used on a ReadableStream`)}function convertQueuingStrategyInit(t,r){assertDictionary(t,r);let a=null==t?void 0:t.highWaterMark;return assertRequiredField(a,"highWaterMark","QueuingStrategyInit"),{highWaterMark:convertUnrestrictedDouble(a)}}Object.defineProperties(ReadableStream1.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),"symbol"==typeof r.toStringTag&&Object.defineProperty(ReadableStream1.prototype,r.toStringTag,{value:"ReadableStream",configurable:!0}),"symbol"==typeof r.asyncIterator&&Object.defineProperty(ReadableStream1.prototype,r.asyncIterator,{value:ReadableStream1.prototype.values,writable:!0,configurable:!0});let byteLengthSizeFunction=t=>t.byteLength;try{Object.defineProperty(byteLengthSizeFunction,"name",{value:"size",configurable:!0})}catch(t){}let ByteLengthQueuingStrategy=class ByteLengthQueuingStrategy{constructor(t){assertRequiredArgument(t,1,"ByteLengthQueuingStrategy"),t=convertQueuingStrategyInit(t,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=t.highWaterMark}get highWaterMark(){if(!IsByteLengthQueuingStrategy(this))throw byteLengthBrandCheckException("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark}get size(){if(!IsByteLengthQueuingStrategy(this))throw byteLengthBrandCheckException("size");return byteLengthSizeFunction}};function byteLengthBrandCheckException(t){return TypeError(`ByteLengthQueuingStrategy.prototype.${t} can only be used on a ByteLengthQueuingStrategy`)}function IsByteLengthQueuingStrategy(t){return!!(typeIsObject(t)&&Object.prototype.hasOwnProperty.call(t,"_byteLengthQueuingStrategyHighWaterMark"))&&t instanceof ByteLengthQueuingStrategy}Object.defineProperties(ByteLengthQueuingStrategy.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),"symbol"==typeof r.toStringTag&&Object.defineProperty(ByteLengthQueuingStrategy.prototype,r.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});let countSizeFunction=()=>1;try{Object.defineProperty(countSizeFunction,"name",{value:"size",configurable:!0})}catch(t){}let CountQueuingStrategy=class CountQueuingStrategy{constructor(t){assertRequiredArgument(t,1,"CountQueuingStrategy"),t=convertQueuingStrategyInit(t,"First parameter"),this._countQueuingStrategyHighWaterMark=t.highWaterMark}get highWaterMark(){if(!IsCountQueuingStrategy(this))throw countBrandCheckException("highWaterMark");return this._countQueuingStrategyHighWaterMark}get size(){if(!IsCountQueuingStrategy(this))throw countBrandCheckException("size");return countSizeFunction}};function countBrandCheckException(t){return TypeError(`CountQueuingStrategy.prototype.${t} can only be used on a CountQueuingStrategy`)}function IsCountQueuingStrategy(t){return!!(typeIsObject(t)&&Object.prototype.hasOwnProperty.call(t,"_countQueuingStrategyHighWaterMark"))&&t instanceof CountQueuingStrategy}Object.defineProperties(CountQueuingStrategy.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),"symbol"==typeof r.toStringTag&&Object.defineProperty(CountQueuingStrategy.prototype,r.toStringTag,{value:"CountQueuingStrategy",configurable:!0});let TransformStream=class TransformStream{constructor(t={},r={},a={}){let n;void 0===t&&(t=null);let o=convertQueuingStrategy(r,"Second parameter"),l=convertQueuingStrategy(a,"Third parameter"),u=function(t,r){assertDictionary(t,r);let a=null==t?void 0:t.flush,n=null==t?void 0:t.readableType,o=null==t?void 0:t.start,i=null==t?void 0:t.transform,s=null==t?void 0:t.writableType;return{flush:void 0===a?void 0:(assertFunction(a,`${r} has member 'flush' that`),r=>promiseCall(a,t,[r])),readableType:n,start:void 0===o?void 0:(assertFunction(o,`${r} has member 'start' that`),r=>reflectCall(o,t,[r])),transform:void 0===i?void 0:(assertFunction(i,`${r} has member 'transform' that`),(r,a)=>promiseCall(i,t,[r,a])),writableType:s}}(t,"First parameter");if(void 0!==u.readableType)throw RangeError("Invalid readableType specified");if(void 0!==u.writableType)throw RangeError("Invalid writableType specified");let c=ExtractHighWaterMark(l,0),d=ExtractSizeAlgorithm(l),h=ExtractHighWaterMark(o,1),p=ExtractSizeAlgorithm(o),y=newPromise(t=>{n=t});(function(t,r,a,n,o,s){function startAlgorithm(){return r}t._writable=function(t,r,a,n,o=1,i=()=>1){let s=Object.create(WritableStream.prototype);InitializeWritableStream(s);let l=Object.create(WritableStreamDefaultController.prototype);return SetUpWritableStreamDefaultController(s,l,t,r,a,n,o,i),s}(startAlgorithm,function(r){return function(t,r){let a=t._transformStreamController;if(t._backpressure){let n=t._backpressureChangePromise;return PerformPromiseThen(n,()=>{let n=t._writable,o=n._state;if("erroring"===o)throw n._storedError;return TransformStreamDefaultControllerPerformTransform(a,r)},void 0)}return TransformStreamDefaultControllerPerformTransform(a,r)}(t,r)},function(){return function(t){let r=t._readable,a=t._transformStreamController,n=a._flushAlgorithm();return TransformStreamDefaultControllerClearAlgorithms(a),PerformPromiseThen(n,()=>{if("errored"===r._state)throw r._storedError;ReadableStreamDefaultControllerClose(r._readableStreamController)},a=>{throw TransformStreamError(t,a),r._storedError})}(t)},function(r){return TransformStreamError(t,r),i(void 0)},a,n),t._readable=CreateReadableStream(startAlgorithm,function(){return TransformStreamSetBackpressure(t,!1),t._backpressureChangePromise},function(r){return TransformStreamErrorWritableAndUnblockWrite(t,r),i(void 0)},o,s),t._backpressure=void 0,t._backpressureChangePromise=void 0,t._backpressureChangePromise_resolve=void 0,TransformStreamSetBackpressure(t,!0),t._transformStreamController=void 0})(this,y,h,p,c,d),function(t,r){var a,n;let o=Object.create(TransformStreamDefaultController.prototype),transformAlgorithm=t=>{try{return TransformStreamDefaultControllerEnqueue(o,t),i(void 0)}catch(t){return s(t)}},flushAlgorithm=()=>i(void 0);void 0!==r.transform&&(transformAlgorithm=t=>r.transform(t,o)),void 0!==r.flush&&(flushAlgorithm=()=>r.flush(o)),a=transformAlgorithm,n=flushAlgorithm,o._controlledTransformStream=t,t._transformStreamController=o,o._transformAlgorithm=a,o._flushAlgorithm=n}(this,u),void 0!==u.start?n(u.start(this._transformStreamController)):n(void 0)}get readable(){if(!IsTransformStream(this))throw streamBrandCheckException("readable");return this._readable}get writable(){if(!IsTransformStream(this))throw streamBrandCheckException("writable");return this._writable}};function IsTransformStream(t){return!!(typeIsObject(t)&&Object.prototype.hasOwnProperty.call(t,"_transformStreamController"))&&t instanceof TransformStream}function TransformStreamError(t,r){ReadableStreamDefaultControllerError(t._readable._readableStreamController,r),TransformStreamErrorWritableAndUnblockWrite(t,r)}function TransformStreamErrorWritableAndUnblockWrite(t,r){TransformStreamDefaultControllerClearAlgorithms(t._transformStreamController),WritableStreamDefaultControllerErrorIfNeeded(t._writable._writableStreamController,r),t._backpressure&&TransformStreamSetBackpressure(t,!1)}function TransformStreamSetBackpressure(t,r){void 0!==t._backpressureChangePromise&&t._backpressureChangePromise_resolve(),t._backpressureChangePromise=newPromise(r=>{t._backpressureChangePromise_resolve=r}),t._backpressure=r}Object.defineProperties(TransformStream.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),"symbol"==typeof r.toStringTag&&Object.defineProperty(TransformStream.prototype,r.toStringTag,{value:"TransformStream",configurable:!0});let TransformStreamDefaultController=class TransformStreamDefaultController{constructor(){throw TypeError("Illegal constructor")}get desiredSize(){if(!IsTransformStreamDefaultController(this))throw defaultControllerBrandCheckException("desiredSize");let t=this._controlledTransformStream._readable._readableStreamController;return ReadableStreamDefaultControllerGetDesiredSize(t)}enqueue(t){if(!IsTransformStreamDefaultController(this))throw defaultControllerBrandCheckException("enqueue");TransformStreamDefaultControllerEnqueue(this,t)}error(t){if(!IsTransformStreamDefaultController(this))throw defaultControllerBrandCheckException("error");TransformStreamError(this._controlledTransformStream,t)}terminate(){if(!IsTransformStreamDefaultController(this))throw defaultControllerBrandCheckException("terminate");(function(t){let r=t._controlledTransformStream,a=r._readable._readableStreamController;ReadableStreamDefaultControllerClose(a);let n=TypeError("TransformStream terminated");TransformStreamErrorWritableAndUnblockWrite(r,n)})(this)}};function IsTransformStreamDefaultController(t){return!!(typeIsObject(t)&&Object.prototype.hasOwnProperty.call(t,"_controlledTransformStream"))&&t instanceof TransformStreamDefaultController}function TransformStreamDefaultControllerClearAlgorithms(t){t._transformAlgorithm=void 0,t._flushAlgorithm=void 0}function TransformStreamDefaultControllerEnqueue(t,r){let a=t._controlledTransformStream,n=a._readable._readableStreamController;if(!ReadableStreamDefaultControllerCanCloseOrEnqueue(n))throw TypeError("Readable side is not in a state that permits enqueue");try{ReadableStreamDefaultControllerEnqueue(n,r)}catch(t){throw TransformStreamErrorWritableAndUnblockWrite(a,t),a._readable._storedError}let o=!ReadableStreamDefaultControllerShouldCallPull(n);o!==a._backpressure&&TransformStreamSetBackpressure(a,!0)}function TransformStreamDefaultControllerPerformTransform(t,r){let a=t._transformAlgorithm(r);return PerformPromiseThen(a,void 0,r=>{throw TransformStreamError(t._controlledTransformStream,r),r})}function defaultControllerBrandCheckException(t){return TypeError(`TransformStreamDefaultController.prototype.${t} can only be used on a TransformStreamDefaultController`)}function streamBrandCheckException(t){return TypeError(`TransformStream.prototype.${t} can only be used on a TransformStream`)}Object.defineProperties(TransformStreamDefaultController.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),"symbol"==typeof r.toStringTag&&Object.defineProperty(TransformStreamDefaultController.prototype,r.toStringTag,{value:"TransformStreamDefaultController",configurable:!0}),t.ByteLengthQueuingStrategy=ByteLengthQueuingStrategy,t.CountQueuingStrategy=CountQueuingStrategy,t.ReadableByteStreamController=ReadableByteStreamController,t.ReadableStream=ReadableStream1,t.ReadableStreamBYOBReader=ReadableStreamBYOBReader,t.ReadableStreamBYOBRequest=ReadableStreamBYOBRequest,t.ReadableStreamDefaultController=ReadableStreamDefaultController,t.ReadableStreamDefaultReader=ReadableStreamDefaultReader,t.TransformStream=TransformStream,t.TransformStreamDefaultController=TransformStreamDefaultController,t.WritableStream=WritableStream,t.WritableStreamDefaultController=WritableStreamDefaultController,t.WritableStreamDefaultWriter=WritableStreamDefaultWriter,Object.defineProperty(t,"__esModule",{value:!0})}(y.exports)),y.exports))}try{let{Blob:t}=a(14300);t&&!t.prototype.stream&&(t.prototype.stream=function(t){let r=0,a=this;return new ReadableStream({type:"bytes",async pull(t){let n=a.slice(r,Math.min(a.size,r+65536)),o=await n.arrayBuffer();r+=o.byteLength,t.enqueue(new Uint8Array(o)),r===a.size&&t.close()}})})}catch(t){}async function*toIterator(t,r=!0){for(let a of t)if("stream"in a)yield*a.stream();else if(ArrayBuffer.isView(a)){if(r){let t=a.byteOffset,r=a.byteOffset+a.byteLength;for(;t!==r;){let n=Math.min(r-t,65536),o=a.buffer.slice(t,t+n);t+=o.byteLength,yield new Uint8Array(o)}}else yield a}else{let t=0;for(;t!==a.size;){let r=a.slice(t,Math.min(a.size,t+65536)),n=await r.arrayBuffer();t+=n.byteLength,yield new Uint8Array(n)}}}let m=class Blob{#r;#a;#n;#o;constructor(t=[],r={}){if(this.#r=[],this.#a="",this.#n=0,this.#o="transparent","object"!=typeof t||null===t)throw TypeError("Failed to construct 'Blob': The provided value cannot be converted to a sequence.");if("function"!=typeof t[Symbol.iterator])throw TypeError("Failed to construct 'Blob': The object must have a callable @@iterator property.");if("object"!=typeof r&&"function"!=typeof r)throw TypeError("Failed to construct 'Blob': parameter 2 cannot convert to dictionary.");null===r&&(r={});let a=new TextEncoder;for(let r of t){let t;t=ArrayBuffer.isView(r)?new Uint8Array(r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength)):r instanceof ArrayBuffer?new Uint8Array(r.slice(0)):r instanceof Blob?r:a.encode(`${r}`);let n=ArrayBuffer.isView(t)?t.byteLength:t.size;n&&(this.#n+=n,this.#r.push(t))}this.#o=`${void 0===r.endings?"transparent":r.endings}`;let n=void 0===r.type?"":String(r.type);this.#a=/^[\x20-\x7E]*$/.test(n)?n:""}get size(){return this.#n}get type(){return this.#a}async text(){let t=new TextDecoder,r="";for await(let a of toIterator(this.#r,!1))r+=t.decode(a,{stream:!0});return r+t.decode()}async arrayBuffer(){let t=new Uint8Array(this.size),r=0;for await(let a of toIterator(this.#r,!1))t.set(a,r),r+=a.length;return t.buffer}stream(){let t=toIterator(this.#r,!0);return new globalThis.ReadableStream({type:"bytes",async pull(r){let a=await t.next();a.done?r.close():r.enqueue(a.value)},async cancel(){await t.return()}})}slice(t=0,r=this.size,a=""){let{size:n}=this,o=t<0?Math.max(n+t,0):Math.min(t,n),i=r<0?Math.max(n+r,0):Math.min(r,n),s=Math.max(i-o,0),l=this.#r,u=[],c=0;for(let t of l){if(c>=s)break;let r=ArrayBuffer.isView(t)?t.byteLength:t.size;if(o&&r<=o)o-=r,i-=r;else{let a;ArrayBuffer.isView(t)?c+=(a=t.subarray(o,Math.min(r,i))).byteLength:c+=(a=t.slice(o,Math.min(r,i))).size,i-=r,u.push(a),o=0}}let d=new Blob([],{type:String(a).toLowerCase()});return d.#n=s,d.#r=u,d}get[Symbol.toStringTag](){return"Blob"}static[Symbol.hasInstance](t){return t&&"object"==typeof t&&"function"==typeof t.constructor&&("function"==typeof t.stream||"function"==typeof t.arrayBuffer)&&/^(Blob|File)$/.test(t[Symbol.toStringTag])}};Object.defineProperties(m.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}});let g=m,b=class extends g{#i;#s;constructor(t,r,a={}){if(arguments.length<2)throw TypeError(`Failed to construct 'File': 2 arguments required, but only ${arguments.length} present.`);super(t,a),this.#i=0,this.#s="",null===a&&(a={});let n=void 0===a.lastModified?Date.now():Number(a.lastModified);Number.isNaN(n)||(this.#i=n),this.#s=String(r)}get name(){return this.#s}get lastModified(){return this.#i}get[Symbol.toStringTag](){return"File"}static[Symbol.hasInstance](t){return!!t&&t instanceof g&&/^(File)$/.test(t[Symbol.toStringTag])}};/*! formdata-polyfill. MIT License. Jimmy Wärting <https://jimmy.warting.se/opensource> */var{toStringTag:v,iterator:S,hasInstance:C}=Symbol,w=Math.random,A="append,set,get,getAll,delete,keys,values,entries,forEach,constructor".split(","),f=(t,r,a)=>(t+="",/^(Blob|File)$/.test(r&&r[v])?[(a=void 0!==a?a+"":"File"==r[v]?r.name:"blob",t),r.name!==a||"blob"==r[v]?new b([r],a,r):r]:[t,r+""]),e=(t,r)=>(r?t:t.replace(/\r?\n|\r/g,"\r\n")).replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22"),x=(t,r,a)=>{if(r.length<a)throw TypeError(`Failed to execute '${t}' on 'FormData': ${a} arguments required, but only ${r.length} present.`)};let k=class{#l;constructor(...t){if(this.#l=[],t.length)throw TypeError("Failed to construct 'FormData': parameter 1 is not of type 'HTMLFormElement'.")}get[v](){return"FormData"}[S](){return this.entries()}static[C](t){return t&&"object"==typeof t&&"FormData"===t[v]&&!A.some(r=>"function"!=typeof t[r])}append(...t){x("append",arguments,2),this.#l.push(f(...t))}delete(t){x("delete",arguments,1),t+="",this.#l=this.#l.filter(([r])=>r!==t)}get(t){x("get",arguments,1),t+="";for(var r=this.#l,a=r.length,n=0;n<a;n++)if(r[n][0]===t)return r[n][1];return null}getAll(t,r){return x("getAll",arguments,1),r=[],t+="",this.#l.forEach(a=>a[0]===t&&r.push(a[1])),r}has(t){return x("has",arguments,1),t+="",this.#l.some(r=>r[0]===t)}forEach(t,r){for(var[a,n]of(x("forEach",arguments,1),this))t.call(r,n,a,this)}set(...t){x("set",arguments,2);var r=[],a=!0;t=f(...t),this.#l.forEach(n=>{n[0]===t[0]?a&&(a=!r.push(t)):r.push(n)}),a&&r.push(t),this.#l=r}*entries(){yield*this.#l}*keys(){for(var[t]of this)yield t}*values(){for(var[,t]of this)yield t}};let FetchBaseError=class FetchBaseError extends Error{constructor(t,r){super(t),Error.captureStackTrace(this,this.constructor),this.type=r}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}};let FetchError=class FetchError extends FetchBaseError{constructor(t,r,a){super(t,r),a&&(this.code=this.errno=a.code,this.erroredSysCall=a.syscall)}};let B=Symbol.toStringTag,isURLSearchParameters=t=>"object"==typeof t&&"function"==typeof t.append&&"function"==typeof t.delete&&"function"==typeof t.get&&"function"==typeof t.getAll&&"function"==typeof t.has&&"function"==typeof t.set&&"function"==typeof t.sort&&"URLSearchParams"===t[B],isBlob=t=>t&&"object"==typeof t&&"function"==typeof t.arrayBuffer&&"string"==typeof t.type&&"function"==typeof t.stream&&"function"==typeof t.constructor&&/^(Blob|File)$/.test(t[B]),isAbortSignal=t=>"object"==typeof t&&("AbortSignal"===t[B]||"EventTarget"===t[B]),isDomainOrSubdomain=(t,r)=>{let a=new URL(r).hostname,n=new URL(t).hostname;return a===n||a.endsWith(`.${n}`)},isSameProtocol=(t,r)=>{let a=new URL(r).protocol,n=new URL(t).protocol;return a===n},P=u.promisify(s.pipeline),E=Symbol("Body internals");let Body=class Body{constructor(t,{size:r=0}={}){let a=null;null===t?t=null:isURLSearchParameters(t)?t=l.Buffer.from(t.toString()):isBlob(t)||l.Buffer.isBuffer(t)||(u.types.isAnyArrayBuffer(t)?t=l.Buffer.from(t):ArrayBuffer.isView(t)?t=l.Buffer.from(t.buffer,t.byteOffset,t.byteLength):t instanceof s||(t instanceof k?a=(t=function(t,r=g){var a=`${w()}${w()}`.replace(/\./g,"").slice(-28).padStart(32,"-"),n=[],o=`--${a}\r
Content-Disposition: form-data; name="`;return t.forEach((t,r)=>"string"==typeof t?n.push(o+e(r)+`"\r
\r
${t.replace(/\r(?!\n)|(?<!\r)\n/g,"\r\n")}\r
`):n.push(o+e(r)+`"; filename="${e(t.name,1)}"\r
Content-Type: ${t.type||"application/octet-stream"}\r
\r
`,t,"\r\n")),n.push(`--${a}--`),new r(n,{type:"multipart/form-data; boundary="+a})}(t)).type.split("=")[1]:t=l.Buffer.from(String(t))));let n=t;l.Buffer.isBuffer(t)?n=s.Readable.from(t):isBlob(t)&&(n=s.Readable.from(t.stream())),this[E]={body:t,stream:n,boundary:a,disturbed:!1,error:null},this.size=r,t instanceof s&&t.on("error",t=>{let r=t instanceof FetchBaseError?t:new FetchError(`Invalid response body while trying to fetch ${this.url}: ${t.message}`,"system",t);this[E].error=r})}get body(){return this[E].stream}get bodyUsed(){return this[E].disturbed}async arrayBuffer(){let{buffer:t,byteOffset:r,byteLength:a}=await consumeBody(this);return t.slice(r,r+a)}async formData(){let t=this.headers.get("content-type");if(t.startsWith("application/x-www-form-urlencoded")){let t=new k,r=new URLSearchParams(await this.text());for(let[a,n]of r)t.append(a,n);return t}let{toFormData:r}=await a.e(90).then(a.t.bind(a,7090,19));return r(this.body,t)}async blob(){let t=this.headers&&this.headers.get("content-type")||this[E].body&&this[E].body.type||"",r=await this.arrayBuffer();return new g([r],{type:t})}async json(){let t=await this.text();return JSON.parse(t)}async text(){let t=await consumeBody(this);return new TextDecoder().decode(t)}buffer(){return consumeBody(this)}};async function consumeBody(t){if(t[E].disturbed)throw TypeError(`body used already for: ${t.url}`);if(t[E].disturbed=!0,t[E].error)throw t[E].error;let{body:r}=t;if(null===r||!(r instanceof s))return l.Buffer.alloc(0);let a=[],n=0;try{for await(let o of r){if(t.size>0&&n+o.length>t.size){let a=new FetchError(`content size at ${t.url} over limit: ${t.size}`,"max-size");throw r.destroy(a),a}n+=o.length,a.push(o)}}catch(a){let r=a instanceof FetchBaseError?a:new FetchError(`Invalid response body while trying to fetch ${t.url}: ${a.message}`,"system",a);throw r}if(!0===r.readableEnded||!0===r._readableState.ended)try{if(a.every(t=>"string"==typeof t))return l.Buffer.from(a.join(""));return l.Buffer.concat(a,n)}catch(r){throw new FetchError(`Could not create Buffer from response body for ${t.url}: ${r.message}`,"system",r)}else throw new FetchError(`Premature close of server response while trying to fetch ${t.url}`)}Body.prototype.buffer=u.deprecate(Body.prototype.buffer,"Please use 'response.arrayBuffer()' instead of 'response.buffer()'","node-fetch#buffer"),Object.defineProperties(Body.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0},data:{get:u.deprecate(()=>{},"data doesn't exist, use json(), text(), arrayBuffer(), or body instead","https://github.com/node-fetch/node-fetch/issues/1000 (response)")}});let clone=(t,r)=>{let a,n;let{body:o}=t[E];if(t.bodyUsed)throw Error("cannot clone body after it is used");return o instanceof s&&"function"!=typeof o.getBoundary&&(a=new s.PassThrough({highWaterMark:r}),n=new s.PassThrough({highWaterMark:r}),o.pipe(a),o.pipe(n),t[E].stream=a,o=n),o},_=u.deprecate(t=>t.getBoundary(),"form-data doesn't follow the spec and requires special treatment. Use alternative package","https://github.com/node-fetch/node-fetch/issues/1167"),extractContentType=(t,r)=>null===t?null:"string"==typeof t?"text/plain;charset=UTF-8":isURLSearchParameters(t)?"application/x-www-form-urlencoded;charset=UTF-8":isBlob(t)?t.type||null:l.Buffer.isBuffer(t)||u.types.isAnyArrayBuffer(t)||ArrayBuffer.isView(t)?null:t instanceof k?`multipart/form-data; boundary=${r[E].boundary}`:t&&"function"==typeof t.getBoundary?`multipart/form-data;boundary=${_(t)}`:t instanceof s?null:"text/plain;charset=UTF-8",getTotalBytes=t=>{let{body:r}=t[E];return null===r?0:isBlob(r)?r.size:l.Buffer.isBuffer(r)?r.length:r&&"function"==typeof r.getLengthSync&&r.hasKnownLength&&r.hasKnownLength()?r.getLengthSync():null},writeToStream=async(t,{body:r})=>{null===r?t.end():await P(r,t)},R="function"==typeof n.validateHeaderName?n.validateHeaderName:t=>{if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(t)){let r=TypeError(`Header name must be a valid HTTP token [${t}]`);throw Object.defineProperty(r,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),r}},T="function"==typeof n.validateHeaderValue?n.validateHeaderValue:(t,r)=>{if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(r)){let r=TypeError(`Invalid character in header content ["${t}"]`);throw Object.defineProperty(r,"code",{value:"ERR_INVALID_CHAR"}),r}};let Headers=class Headers extends URLSearchParams{constructor(t){let r=[];if(t instanceof Headers){let a=t.raw();for(let[t,n]of Object.entries(a))r.push(...n.map(r=>[t,r]))}else if(null==t);else if("object"!=typeof t||u.types.isBoxedPrimitive(t))throw TypeError("Failed to construct 'Headers': The provided value is not of type '(sequence<sequence<ByteString>> or record<ByteString, ByteString>)");else{let a=t[Symbol.iterator];if(null==a)r.push(...Object.entries(t));else{if("function"!=typeof a)throw TypeError("Header pairs must be iterable");r=[...t].map(t=>{if("object"!=typeof t||u.types.isBoxedPrimitive(t))throw TypeError("Each header pair must be an iterable object");return[...t]}).map(t=>{if(2!==t.length)throw TypeError("Each header pair must be a name/value tuple");return[...t]})}}return super(r=r.length>0?r.map(([t,r])=>(R(t),T(t,String(r)),[String(t).toLowerCase(),String(r)])):void 0),new Proxy(this,{get(t,r,a){switch(r){case"append":case"set":return(a,n)=>(R(a),T(a,String(n)),URLSearchParams.prototype[r].call(t,String(a).toLowerCase(),String(n)));case"delete":case"has":case"getAll":return a=>(R(a),URLSearchParams.prototype[r].call(t,String(a).toLowerCase()));case"keys":return()=>(t.sort(),new Set(URLSearchParams.prototype.keys.call(t)).keys());default:return Reflect.get(t,r,a)}}})}get[Symbol.toStringTag](){return this.constructor.name}toString(){return Object.prototype.toString.call(this)}get(t){let r=this.getAll(t);if(0===r.length)return null;let a=r.join(", ");return/^content-encoding$/i.test(t)&&(a=a.toLowerCase()),a}forEach(t,r){for(let a of this.keys())Reflect.apply(t,r,[this.get(a),a,this])}*values(){for(let t of this.keys())yield this.get(t)}*entries(){for(let t of this.keys())yield[t,this.get(t)]}[Symbol.iterator](){return this.entries()}raw(){return[...this.keys()].reduce((t,r)=>(t[r]=this.getAll(r),t),{})}[Symbol.for("nodejs.util.inspect.custom")](){return[...this.keys()].reduce((t,r)=>{let a=this.getAll(r);return"host"===r?t[r]=a[0]:t[r]=a.length>1?a:a[0],t},{})}};Object.defineProperties(Headers.prototype,["get","entries","forEach","values"].reduce((t,r)=>(t[r]={enumerable:!0},t),{}));let O=new Set([301,302,303,307,308]),isRedirect=t=>O.has(t),I=Symbol("Response internals");let Response=class Response extends Body{constructor(t=null,r={}){super(t,r);let a=null!=r.status?r.status:200,n=new Headers(r.headers);if(null!==t&&!n.has("Content-Type")){let r=extractContentType(t,this);r&&n.append("Content-Type",r)}this[I]={type:"default",url:r.url,status:a,statusText:r.statusText||"",headers:n,counter:r.counter,highWaterMark:r.highWaterMark}}get type(){return this[I].type}get url(){return this[I].url||""}get status(){return this[I].status}get ok(){return this[I].status>=200&&this[I].status<300}get redirected(){return this[I].counter>0}get statusText(){return this[I].statusText}get headers(){return this[I].headers}get highWaterMark(){return this[I].highWaterMark}clone(){return new Response(clone(this,this.highWaterMark),{type:this.type,url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected,size:this.size,highWaterMark:this.highWaterMark})}static redirect(t,r=302){if(!isRedirect(r))throw RangeError('Failed to execute "redirect" on "response": Invalid status code');return new Response(null,{headers:{location:new URL(t).toString()},status:r})}static error(){let t=new Response(null,{status:0,statusText:""});return t[I].type="error",t}static json(t,r={}){let a=JSON.stringify(t);if(void 0===a)throw TypeError("data is not JSON serializable");let n=new Headers(r&&r.headers);return n.has("content-type")||n.set("content-type","application/json"),new Response(a,{...r,headers:n})}get[Symbol.toStringTag](){return"Response"}};Object.defineProperties(Response.prototype,{type:{enumerable:!0},url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});let getSearch=t=>{if(t.search)return t.search;let r=t.href.length-1,a=t.hash||("#"===t.href[r]?"#":"");return"?"===t.href[r-a.length]?"?":""};function stripURLForUseAsAReferrer(t,r=!1){return null==t?"no-referrer":(t=new URL(t),/^(about|blob|data):$/.test(t.protocol))?"no-referrer":(t.username="",t.password="",t.hash="",r&&(t.pathname="",t.search=""),t)}let K=new Set(["","no-referrer","no-referrer-when-downgrade","same-origin","origin","strict-origin","origin-when-cross-origin","strict-origin-when-cross-origin","unsafe-url"]);function isUrlPotentiallyTrustworthy(t){return!!(/^about:(blank|srcdoc)$/.test(t)||"data:"===t.protocol||/^(blob|filesystem):$/.test(t.protocol))||function(t){if(/^(http|ws)s:$/.test(t.protocol))return!0;let r=t.host.replace(/(^\[)|(]$)/g,""),a=d.isIP(r);return!!(4===a&&/^127\./.test(r)||6===a&&/^(((0+:){7})|(::(0+:){0,6}))0*1$/.test(r))||!("localhost"===t.host||t.host.endsWith(".localhost"))&&"file:"===t.protocol}(t)}let N=Symbol("Request internals"),isRequest=t=>"object"==typeof t&&"object"==typeof t[N],U=u.deprecate(()=>{},".data is not a valid RequestInit property, use .body instead","https://github.com/node-fetch/node-fetch/issues/1000 (request)");let Request=class Request extends Body{constructor(t,r={}){let a;if(isRequest(t)?a=new URL(t.url):(a=new URL(t),t={}),""!==a.username||""!==a.password)throw TypeError(`${a} is an url with embedded credentials.`);let n=r.method||t.method||"GET";if(/^(delete|get|head|options|post|put)$/i.test(n)&&(n=n.toUpperCase()),!isRequest(r)&&"data"in r&&U(),(null!=r.body||isRequest(t)&&null!==t.body)&&("GET"===n||"HEAD"===n))throw TypeError("Request with GET/HEAD method cannot have body");let o=r.body?r.body:isRequest(t)&&null!==t.body?clone(t):null;super(o,{size:r.size||t.size||0});let i=new Headers(r.headers||t.headers||{});if(null!==o&&!i.has("Content-Type")){let t=extractContentType(o,this);t&&i.set("Content-Type",t)}let s=isRequest(t)?t.signal:null;if("signal"in r&&(s=r.signal),null!=s&&!isAbortSignal(s))throw TypeError("Expected signal to be an instanceof AbortSignal or EventTarget");let l=null==r.referrer?t.referrer:r.referrer;if(""===l)l="no-referrer";else if(l){let t=new URL(l);l=/^about:(\/\/)?client$/.test(t)?"client":t}else l=void 0;this[N]={method:n,redirect:r.redirect||t.redirect||"follow",headers:i,parsedURL:a,signal:s,referrer:l},this.follow=void 0===r.follow?void 0===t.follow?20:t.follow:r.follow,this.compress=void 0===r.compress?void 0===t.compress||t.compress:r.compress,this.counter=r.counter||t.counter||0,this.agent=r.agent||t.agent,this.highWaterMark=r.highWaterMark||t.highWaterMark||16384,this.insecureHTTPParser=r.insecureHTTPParser||t.insecureHTTPParser||!1,this.referrerPolicy=r.referrerPolicy||t.referrerPolicy||""}get method(){return this[N].method}get url(){return c.format(this[N].parsedURL)}get headers(){return this[N].headers}get redirect(){return this[N].redirect}get signal(){return this[N].signal}get referrer(){return"no-referrer"===this[N].referrer?"":"client"===this[N].referrer?"about:client":this[N].referrer?this[N].referrer.toString():void 0}get referrerPolicy(){return this[N].referrerPolicy}set referrerPolicy(t){this[N].referrerPolicy=function(t){if(!K.has(t))throw TypeError(`Invalid referrerPolicy: ${t}`);return t}(t)}clone(){return new Request(this)}get[Symbol.toStringTag](){return"Request"}};Object.defineProperties(Request.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0},referrer:{enumerable:!0},referrerPolicy:{enumerable:!0}});let getNodeRequestOptions=t=>{let{parsedURL:r}=t[N],a=new Headers(t[N].headers);a.has("Accept")||a.set("Accept","*/*");let n=null;if(null===t.body&&/^(post|put)$/i.test(t.method)&&(n="0"),null!==t.body){let r=getTotalBytes(t);"number"!=typeof r||Number.isNaN(r)||(n=String(r))}n&&a.set("Content-Length",n),""===t.referrerPolicy&&(t.referrerPolicy="strict-origin-when-cross-origin"),t.referrer&&"no-referrer"!==t.referrer?t[N].referrer=function(t,{referrerURLCallback:r,referrerOriginCallback:a}={}){if("no-referrer"===t.referrer||""===t.referrerPolicy)return null;let n=t.referrerPolicy;if("about:client"===t.referrer)return"no-referrer";let o=t.referrer,i=stripURLForUseAsAReferrer(o),s=stripURLForUseAsAReferrer(o,!0);i.toString().length>4096&&(i=s),r&&(i=r(i)),a&&(s=a(s));let l=new URL(t.url);switch(n){case"no-referrer":return"no-referrer";case"origin":return s;case"unsafe-url":return i;case"strict-origin":if(isUrlPotentiallyTrustworthy(i)&&!isUrlPotentiallyTrustworthy(l))return"no-referrer";return s.toString();case"strict-origin-when-cross-origin":if(i.origin===l.origin)return i;if(isUrlPotentiallyTrustworthy(i)&&!isUrlPotentiallyTrustworthy(l))return"no-referrer";return s;case"same-origin":if(i.origin===l.origin)return i;return"no-referrer";case"origin-when-cross-origin":if(i.origin===l.origin)return i;return s;case"no-referrer-when-downgrade":if(isUrlPotentiallyTrustworthy(i)&&!isUrlPotentiallyTrustworthy(l))return"no-referrer";return i;default:throw TypeError(`Invalid referrerPolicy: ${n}`)}}(t):t[N].referrer="no-referrer",t[N].referrer instanceof URL&&a.set("Referer",t.referrer),a.has("User-Agent")||a.set("User-Agent","node-fetch"),t.compress&&!a.has("Accept-Encoding")&&a.set("Accept-Encoding","gzip, deflate, br");let{agent:o}=t;"function"==typeof o&&(o=o(r)),a.has("Connection")||o||a.set("Connection","close");let i=getSearch(r),s={path:r.pathname+i,method:t.method,headers:a[Symbol.for("nodejs.util.inspect.custom")](),insecureHTTPParser:t.insecureHTTPParser,agent:o};return{parsedURL:r,options:s}};let AbortError=class AbortError extends FetchBaseError{constructor(t,r="aborted"){super(t,r)}};/*! node-domexception. MIT License. Jimmy Wärting <https://jimmy.warting.se/opensource> */if(!globalThis.DOMException)try{let{MessageChannel:t}=a(71267),r=new t().port1,n=new ArrayBuffer;r.postMessage(n,[n,n])}catch(t){"DOMException"===t.constructor.name&&(globalThis.DOMException=t.constructor)}var D=globalThis.DOMException;let L=new Set(["data:","http:","https:"]);async function fetch(t,r){return new Promise((a,u)=>{let c=new Request(t,r),{parsedURL:d,options:h}=getNodeRequestOptions(c);if(!L.has(d.protocol))throw TypeError(`node-fetch cannot load ${t}. URL scheme "${d.protocol.replace(/:$/,"")}" is not supported.`);if("data:"===d.protocol){let t=function(t){if(!/^data:/i.test(t))throw TypeError('`uri` does not appear to be a Data URI (must begin with "data:")');t=t.replace(/\r?\n/g,"");let r=t.indexOf(",");if(-1===r||r<=4)throw TypeError("malformed data: URI");let a=t.substring(5,r).split(";"),n="",o=!1,i=a[0]||"text/plain",s=i;for(let t=1;t<a.length;t++)"base64"===a[t]?o=!0:(s+=`;${a[t]}`,0===a[t].indexOf("charset=")&&(n=a[t].substring(8)));a[0]||n.length||(s+=";charset=US-ASCII",n="US-ASCII");let l=o?"base64":"ascii",u=unescape(t.substring(r+1)),c=Buffer.from(u,l);return c.type=i,c.typeFull=s,c.charset=n,c}(c.url),r=new Response(t,{headers:{"Content-Type":t.typeFull}});a(r);return}let p=("https:"===d.protocol?o:n).request,{signal:y}=c,m=null,abort=()=>{let t=new AbortError("The operation was aborted.");u(t),c.body&&c.body instanceof s.Readable&&c.body.destroy(t),m&&m.body&&m.body.emit("error",t)};if(y&&y.aborted){abort();return}let abortAndFinalize=()=>{abort(),finalize()},g=p(d.toString(),h);y&&y.addEventListener("abort",abortAndFinalize);let finalize=()=>{g.abort(),y&&y.removeEventListener("abort",abortAndFinalize)};g.on("error",t=>{u(new FetchError(`request to ${c.url} failed, reason: ${t.message}`,"system",t)),finalize()}),function(t,r){let a;let n=l.Buffer.from("0\r\n\r\n"),o=!1,i=!1;t.on("response",t=>{let{headers:r}=t;o="chunked"===r["transfer-encoding"]&&!r["content-length"]}),t.on("socket",s=>{let onSocketClose=()=>{if(o&&!i){let t=Error("Premature close");t.code="ERR_STREAM_PREMATURE_CLOSE",r(t)}},onData=t=>{(i=0===l.Buffer.compare(t.slice(-5),n))||!a||(i=0===l.Buffer.compare(a.slice(-3),n.slice(0,3))&&0===l.Buffer.compare(t.slice(-2),n.slice(3))),a=t};s.prependListener("close",onSocketClose),s.on("data",onData),t.on("close",()=>{s.removeListener("close",onSocketClose),s.removeListener("data",onData)})})}(g,t=>{m&&m.body&&m.body.destroy(t)}),process.version<"v14"&&g.on("socket",t=>{let r;t.prependListener("end",()=>{r=t._eventsCount}),t.prependListener("close",a=>{if(m&&r<t._eventsCount&&!a){let t=Error("Premature close");t.code="ERR_STREAM_PREMATURE_CLOSE",m.body.emit("error",t)}})}),g.on("response",t=>{g.setTimeout(0);let n=function(t=[]){return new Headers(t.reduce((t,r,a,n)=>(a%2==0&&t.push(n.slice(a,a+2)),t),[]).filter(([t,r])=>{try{return R(t),T(t,String(r)),!0}catch{return!1}}))}(t.rawHeaders);if(isRedirect(t.statusCode)){let o=n.get("Location"),i=null;try{i=null===o?null:new URL(o,c.url)}catch{if("manual"!==c.redirect){u(new FetchError(`uri requested responds with an invalid redirect URL: ${o}`,"invalid-redirect")),finalize();return}}switch(c.redirect){case"error":u(new FetchError(`uri requested responds with a redirect, redirect mode is set to error: ${c.url}`,"no-redirect")),finalize();return;case"manual":break;case"follow":{if(null===i)break;if(c.counter>=c.follow){u(new FetchError(`maximum redirect reached at: ${c.url}`,"max-redirect")),finalize();return}let o={headers:new Headers(c.headers),follow:c.follow,counter:c.counter+1,agent:c.agent,compress:c.compress,method:c.method,body:clone(c),signal:c.signal,size:c.size,referrer:c.referrer,referrerPolicy:c.referrerPolicy};if(!isDomainOrSubdomain(c.url,i)||!isSameProtocol(c.url,i))for(let t of["authorization","www-authenticate","cookie","cookie2"])o.headers.delete(t);if(303!==t.statusCode&&c.body&&r.body instanceof s.Readable){u(new FetchError("Cannot follow redirect with body being a readable stream","unsupported-redirect")),finalize();return}(303===t.statusCode||(301===t.statusCode||302===t.statusCode)&&"POST"===c.method)&&(o.method="GET",o.body=void 0,o.headers.delete("content-length"));let l=function(t){let r=(t.get("referrer-policy")||"").split(/[,\s]+/),a="";for(let t of r)t&&K.has(t)&&(a=t);return a}(n);l&&(o.referrerPolicy=l),a(fetch(new Request(i,o))),finalize();return}default:return u(TypeError(`Redirect option '${c.redirect}' is not a valid value of RequestRedirect`))}}y&&t.once("end",()=>{y.removeEventListener("abort",abortAndFinalize)});let o=s.pipeline(t,new s.PassThrough,t=>{t&&u(t)});process.version<"v12.10"&&t.on("aborted",abortAndFinalize);let l={url:c.url,status:t.statusCode,statusText:t.statusMessage,headers:n,size:c.size,counter:c.counter,highWaterMark:c.highWaterMark},d=n.get("Content-Encoding");if(!c.compress||"HEAD"===c.method||null===d||204===t.statusCode||304===t.statusCode){a(m=new Response(o,l));return}let h={flush:i.Z_SYNC_FLUSH,finishFlush:i.Z_SYNC_FLUSH};if("gzip"===d||"x-gzip"===d){o=s.pipeline(o,i.createGunzip(h),t=>{t&&u(t)}),a(m=new Response(o,l));return}if("deflate"===d||"x-deflate"===d){let r=s.pipeline(t,new s.PassThrough,t=>{t&&u(t)});r.once("data",t=>{o=(15&t[0])==8?s.pipeline(o,i.createInflate(),t=>{t&&u(t)}):s.pipeline(o,i.createInflateRaw(),t=>{t&&u(t)}),a(m=new Response(o,l))}),r.once("end",()=>{m||a(m=new Response(o,l))});return}if("br"===d){o=s.pipeline(o,i.createBrotliDecompress(),t=>{t&&u(t)}),a(m=new Response(o,l));return}a(m=new Response(o,l))}),writeToStream(g,c).catch(u)})}/**
 * @author Toru Nagashima <https://github.com/mysticatea>
 * @copyright 2015 Toru Nagashima. All rights reserved.
 * See LICENSE file in root directory for full license.
 */let j=new WeakMap,q=new WeakMap;function pd(t){let r=j.get(t);return console.assert(null!=r,"'this' is expected an Event object, but got",t),r}function setCancelFlag(t){if(null!=t.passiveListener){"undefined"!=typeof console&&"function"==typeof console.error&&console.error("Unable to preventDefault inside passive event listener invocation.",t.passiveListener);return}t.event.cancelable&&(t.canceled=!0,"function"==typeof t.event.preventDefault&&t.event.preventDefault())}function Event(t,r){j.set(this,{eventTarget:t,event:r,eventPhase:2,currentTarget:t,canceled:!1,stopped:!1,immediateStopped:!1,passiveListener:null,timeStamp:r.timeStamp||Date.now()}),Object.defineProperty(this,"isTrusted",{value:!1,enumerable:!0});let a=Object.keys(r);for(let t=0;t<a.length;++t){let r=a[t];r in this||Object.defineProperty(this,r,defineRedirectDescriptor(r))}}function defineRedirectDescriptor(t){return{get(){return pd(this).event[t]},set(r){pd(this).event[t]=r},configurable:!0,enumerable:!0}}function setPassiveListener(t,r){pd(t).passiveListener=r}Event.prototype={get type(){return pd(this).event.type},get target(){return pd(this).eventTarget},get currentTarget(){return pd(this).currentTarget},composedPath(){let t=pd(this).currentTarget;return null==t?[]:[t]},get NONE(){return 0},get CAPTURING_PHASE(){return 1},get AT_TARGET(){return 2},get BUBBLING_PHASE(){return 3},get eventPhase(){return pd(this).eventPhase},stopPropagation(){let t=pd(this);t.stopped=!0,"function"==typeof t.event.stopPropagation&&t.event.stopPropagation()},stopImmediatePropagation(){let t=pd(this);t.stopped=!0,t.immediateStopped=!0,"function"==typeof t.event.stopImmediatePropagation&&t.event.stopImmediatePropagation()},get bubbles(){return!!pd(this).event.bubbles},get cancelable(){return!!pd(this).event.cancelable},preventDefault(){setCancelFlag(pd(this))},get defaultPrevented(){return pd(this).canceled},get composed(){return!!pd(this).event.composed},get timeStamp(){return pd(this).timeStamp},get srcElement(){return pd(this).eventTarget},get cancelBubble(){return pd(this).stopped},set cancelBubble(value){if(!value)return;let t=pd(this);t.stopped=!0,"boolean"==typeof t.event.cancelBubble&&(t.event.cancelBubble=!0)},get returnValue(){return!pd(this).canceled},set returnValue(value){value||setCancelFlag(pd(this))},initEvent(){}},Object.defineProperty(Event.prototype,"constructor",{value:Event,configurable:!0,writable:!0});let W=new WeakMap;function isObject(t){return null!==t&&"object"==typeof t}function getListeners(t){let r=W.get(t);if(null==r)throw TypeError("'this' is expected an EventTarget object, but got another value.");return r}function defineEventAttribute(t,r){Object.defineProperty(t,`on${r}`,{get(){let t=getListeners(this),a=t.get(r);for(;null!=a;){if(3===a.listenerType)return a.listener;a=a.next}return null},set(t){"function"==typeof t||isObject(t)||(t=null);let a=getListeners(this),n=null,o=a.get(r);for(;null!=o;)3===o.listenerType?null!==n?n.next=o.next:null!==o.next?a.set(r,o.next):a.delete(r):n=o,o=o.next;if(null!==t){let o={listener:t,listenerType:3,passive:!1,once:!1,next:null};null===n?a.set(r,o):n.next=o}},configurable:!0,enumerable:!0})}function defineCustomEventTarget(t){function CustomEventTarget(){EventTarget.call(this)}CustomEventTarget.prototype=Object.create(EventTarget.prototype,{constructor:{value:CustomEventTarget,configurable:!0,writable:!0}});for(let r=0;r<t.length;++r)defineEventAttribute(CustomEventTarget.prototype,t[r]);return CustomEventTarget}function EventTarget(){if(this instanceof EventTarget){W.set(this,new Map);return}if(1==arguments.length&&Array.isArray(arguments[0]))return defineCustomEventTarget(arguments[0]);if(arguments.length>0){let t=Array(arguments.length);for(let r=0;r<arguments.length;++r)t[r]=arguments[r];return defineCustomEventTarget(t)}throw TypeError("Cannot call a class as a function")}EventTarget.prototype={addEventListener(t,r,a){if(null==r)return;if("function"!=typeof r&&!isObject(r))throw TypeError("'listener' should be a function or an object.");let n=getListeners(this),o=isObject(a),i=o?!!a.capture:!!a,s=i?1:2,l={listener:r,listenerType:s,passive:o&&!!a.passive,once:o&&!!a.once,next:null},u=n.get(t);if(void 0===u){n.set(t,l);return}let c=null;for(;null!=u;){if(u.listener===r&&u.listenerType===s)return;c=u,u=u.next}c.next=l},removeEventListener(t,r,a){if(null==r)return;let n=getListeners(this),o=isObject(a)?!!a.capture:!!a,i=o?1:2,s=null,l=n.get(t);for(;null!=l;){if(l.listener===r&&l.listenerType===i){null!==s?s.next=l.next:null!==l.next?n.set(t,l.next):n.delete(t);return}s=l,l=l.next}},dispatchEvent(t){if(null==t||"string"!=typeof t.type)throw TypeError('"event.type" should be a string.');let r=getListeners(this),a=t.type,n=r.get(a);if(null==n)return!0;let o=function(t,r){let a=function getWrapper(t){if(null==t||t===Object.prototype)return Event;let r=q.get(t);return null==r&&(r=function(t,r){let a=Object.keys(r);if(0===a.length)return t;function CustomEvent(r,a){t.call(this,r,a)}CustomEvent.prototype=Object.create(t.prototype,{constructor:{value:CustomEvent,configurable:!0,writable:!0}});for(let n=0;n<a.length;++n){let o=a[n];if(!(o in t.prototype)){let t=Object.getOwnPropertyDescriptor(r,o),a="function"==typeof t.value;Object.defineProperty(CustomEvent.prototype,o,a?function(t){return{value(){let r=pd(this).event;return r[t].apply(r,arguments)},configurable:!0,enumerable:!0}}(o):defineRedirectDescriptor(o))}}return CustomEvent}(getWrapper(Object.getPrototypeOf(t)),t),q.set(t,r)),r}(Object.getPrototypeOf(r));return new a(t,r)}(this,t),i=null;for(;null!=n;){if(n.once?null!==i?i.next=n.next:null!==n.next?r.set(a,n.next):r.delete(a):i=n,setPassiveListener(o,n.passive?n.listener:null),"function"==typeof n.listener)try{n.listener.call(this,o)}catch(t){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(t)}else 3!==n.listenerType&&"function"==typeof n.listener.handleEvent&&n.listener.handleEvent(o);if(pd(o).immediateStopped)break;n=n.next}return setPassiveListener(o,null),pd(o).eventPhase=0,pd(o).currentTarget=null,!o.defaultPrevented}},Object.defineProperty(EventTarget.prototype,"constructor",{value:EventTarget,configurable:!0,writable:!0});let AbortSignal=class AbortSignal extends EventTarget{constructor(){throw super(),TypeError("AbortSignal cannot be constructed directly")}get aborted(){let t=H.get(this);if("boolean"!=typeof t)throw TypeError(`Expected 'this' to be an 'AbortSignal' object, but got ${this===null?"null":typeof this}`);return t}};defineEventAttribute(AbortSignal.prototype,"abort");let H=new WeakMap;Object.defineProperties(AbortSignal.prototype,{aborted:{enumerable:!0}}),"function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag&&Object.defineProperty(AbortSignal.prototype,Symbol.toStringTag,{configurable:!0,value:"AbortSignal"});let AbortController$1=class AbortController$1{constructor(){M.set(this,function(){let t=Object.create(AbortSignal.prototype);return EventTarget.call(t),H.set(t,!1),t}())}get signal(){return getSignal(this)}abort(){var t;t=getSignal(this),!1===H.get(t)&&(H.set(t,!0),t.dispatchEvent({type:"abort"}))}};let M=new WeakMap;function getSignal(t){let r=M.get(t);if(null==r)throw TypeError(`Expected 'this' to be an 'AbortController' object, but got ${null===t?"null":typeof t}`);return r}Object.defineProperties(AbortController$1.prototype,{signal:{enumerable:!0},abort:{enumerable:!0}}),"function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag&&Object.defineProperty(AbortController$1.prototype,Symbol.toStringTag,{configurable:!0,value:"AbortController"}),r.AbortController=AbortController$1,r.AbortError=AbortError,r.FetchError=FetchError,r.File=b,r.FormData=k,r.Headers=Headers,r.Request=Request,r.Response=Response,r._Blob=g,r.fetch=fetch,r.isRedirect=isRedirect,r.nodeDomexception=D},60013:(t,r,a)=>{let n=a(13284);function fetch(t,r){return n.fetch(t,r)}for(let t in n)fetch[t]=n[t];t.exports=fetch},15803:(t,r,a)=>{a.r(r),a.d(r,{__addDisposableResource:()=>__addDisposableResource,__assign:()=>__assign,__asyncDelegator:()=>__asyncDelegator,__asyncGenerator:()=>__asyncGenerator,__asyncValues:()=>__asyncValues,__await:()=>__await,__awaiter:()=>__awaiter,__classPrivateFieldGet:()=>__classPrivateFieldGet,__classPrivateFieldIn:()=>__classPrivateFieldIn,__classPrivateFieldSet:()=>__classPrivateFieldSet,__createBinding:()=>n,__decorate:()=>__decorate,__disposeResources:()=>__disposeResources,__esDecorate:()=>__esDecorate,__exportStar:()=>__exportStar,__extends:()=>__extends,__generator:()=>__generator,__importDefault:()=>__importDefault,__importStar:()=>__importStar,__makeTemplateObject:()=>__makeTemplateObject,__metadata:()=>__metadata,__param:()=>__param,__propKey:()=>__propKey,__read:()=>__read,__rest:()=>__rest,__runInitializers:()=>__runInitializers,__setFunctionName:()=>__setFunctionName,__spread:()=>__spread,__spreadArray:()=>__spreadArray,__spreadArrays:()=>__spreadArrays,__values:()=>__values,default:()=>s});var extendStatics=function(t,r){return(extendStatics=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])})(t,r)};function __extends(t,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,r),t.prototype=null===r?Object.create(r):(__.prototype=r.prototype,new __)}var __assign=function(){return(__assign=Object.assign||function(t){for(var r,a=1,n=arguments.length;a<n;a++)for(var o in r=arguments[a])Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o]);return t}).apply(this,arguments)};function __rest(t,r){var a={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&0>r.indexOf(n)&&(a[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,n=Object.getOwnPropertySymbols(t);o<n.length;o++)0>r.indexOf(n[o])&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(a[n[o]]=t[n[o]]);return a}function __decorate(t,r,a,n){var o,i=arguments.length,s=i<3?r:null===n?n=Object.getOwnPropertyDescriptor(r,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,r,a,n);else for(var l=t.length-1;l>=0;l--)(o=t[l])&&(s=(i<3?o(s):i>3?o(r,a,s):o(r,a))||s);return i>3&&s&&Object.defineProperty(r,a,s),s}function __param(t,r){return function(a,n){r(a,n,t)}}function __esDecorate(t,r,a,n,o,i){function accept(t){if(void 0!==t&&"function"!=typeof t)throw TypeError("Function expected");return t}for(var s,l=n.kind,u="getter"===l?"get":"setter"===l?"set":"value",c=!r&&t?n.static?t:t.prototype:null,d=r||(c?Object.getOwnPropertyDescriptor(c,n.name):{}),h=!1,p=a.length-1;p>=0;p--){var y={};for(var m in n)y[m]="access"===m?{}:n[m];for(var m in n.access)y.access[m]=n.access[m];y.addInitializer=function(t){if(h)throw TypeError("Cannot add initializers after decoration has completed");i.push(accept(t||null))};var g=(0,a[p])("accessor"===l?{get:d.get,set:d.set}:d[u],y);if("accessor"===l){if(void 0===g)continue;if(null===g||"object"!=typeof g)throw TypeError("Object expected");(s=accept(g.get))&&(d.get=s),(s=accept(g.set))&&(d.set=s),(s=accept(g.init))&&o.unshift(s)}else(s=accept(g))&&("field"===l?o.unshift(s):d[u]=s)}c&&Object.defineProperty(c,n.name,d),h=!0}function __runInitializers(t,r,a){for(var n=arguments.length>2,o=0;o<r.length;o++)a=n?r[o].call(t,a):r[o].call(t);return n?a:void 0}function __propKey(t){return"symbol"==typeof t?t:"".concat(t)}function __setFunctionName(t,r,a){return"symbol"==typeof r&&(r=r.description?"[".concat(r.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:a?"".concat(a," ",r):r})}function __metadata(t,r){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,r)}function __awaiter(t,r,a,n){return new(a||(a=Promise))(function(o,i){function fulfilled(t){try{step(n.next(t))}catch(t){i(t)}}function rejected(t){try{step(n.throw(t))}catch(t){i(t)}}function step(t){var r;t.done?o(t.value):((r=t.value)instanceof a?r:new a(function(t){t(r)})).then(fulfilled,rejected)}step((n=n.apply(t,r||[])).next())})}function __generator(t,r){var a,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function verb(l){return function(u){return function(l){if(a)throw TypeError("Generator is already executing.");for(;i&&(i=0,l[0]&&(s=0)),s;)try{if(a=1,n&&(o=2&l[0]?n.return:l[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,l[1])).done)return o;switch(n=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return s.label++,{value:l[1],done:!1};case 5:s.label++,n=l[1],l=[0];continue;case 7:l=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){s=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){s.label=l[1];break}if(6===l[0]&&s.label<o[1]){s.label=o[1],o=l;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(l);break}o[2]&&s.ops.pop(),s.trys.pop();continue}l=r.call(t,s)}catch(t){l=[6,t],n=0}finally{a=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,u])}}}var n=Object.create?function(t,r,a,n){void 0===n&&(n=a);var o=Object.getOwnPropertyDescriptor(r,a);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[a]}}),Object.defineProperty(t,n,o)}:function(t,r,a,n){void 0===n&&(n=a),t[n]=r[a]};function __exportStar(t,r){for(var a in t)"default"===a||Object.prototype.hasOwnProperty.call(r,a)||n(r,t,a)}function __values(t){var r="function"==typeof Symbol&&Symbol.iterator,a=r&&t[r],n=0;if(a)return a.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read(t,r){var a="function"==typeof Symbol&&t[Symbol.iterator];if(!a)return t;var n,o,i=a.call(t),s=[];try{for(;(void 0===r||r-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(a=i.return)&&a.call(i)}finally{if(o)throw o.error}}return s}function __spread(){for(var t=[],r=0;r<arguments.length;r++)t=t.concat(__read(arguments[r]));return t}function __spreadArrays(){for(var t=0,r=0,a=arguments.length;r<a;r++)t+=arguments[r].length;for(var n=Array(t),o=0,r=0;r<a;r++)for(var i=arguments[r],s=0,l=i.length;s<l;s++,o++)n[o]=i[s];return n}function __spreadArray(t,r,a){if(a||2==arguments.length)for(var n,o=0,i=r.length;o<i;o++)!n&&o in r||(n||(n=Array.prototype.slice.call(r,0,o)),n[o]=r[o]);return t.concat(n||Array.prototype.slice.call(r))}function __await(t){return this instanceof __await?(this.v=t,this):new __await(t)}function __asyncGenerator(t,r,a){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var n,o=a.apply(t,r||[]),i=[];return n={},verb("next"),verb("throw"),verb("return"),n[Symbol.asyncIterator]=function(){return this},n;function verb(t){o[t]&&(n[t]=function(r){return new Promise(function(a,n){i.push([t,r,a,n])>1||resume(t,r)})})}function resume(t,r){try{var a;(a=o[t](r)).value instanceof __await?Promise.resolve(a.value.v).then(fulfill,reject):settle(i[0][2],a)}catch(t){settle(i[0][3],t)}}function fulfill(t){resume("next",t)}function reject(t){resume("throw",t)}function settle(t,r){t(r),i.shift(),i.length&&resume(i[0][0],i[0][1])}}function __asyncDelegator(t){var r,a;return r={},verb("next"),verb("throw",function(t){throw t}),verb("return"),r[Symbol.iterator]=function(){return this},r;function verb(n,o){r[n]=t[n]?function(r){return(a=!a)?{value:__await(t[n](r)),done:!1}:o?o(r):r}:o}}function __asyncValues(t){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var r,a=t[Symbol.asyncIterator];return a?a.call(t):(t=__values(t),r={},verb("next"),verb("throw"),verb("return"),r[Symbol.asyncIterator]=function(){return this},r);function verb(a){r[a]=t[a]&&function(r){return new Promise(function(n,o){(function(t,r,a,n){Promise.resolve(n).then(function(r){t({value:r,done:a})},r)})(n,o,(r=t[a](r)).done,r.value)})}}}function __makeTemplateObject(t,r){return Object.defineProperty?Object.defineProperty(t,"raw",{value:r}):t.raw=r,t}var o=Object.create?function(t,r){Object.defineProperty(t,"default",{enumerable:!0,value:r})}:function(t,r){t.default=r};function __importStar(t){if(t&&t.__esModule)return t;var r={};if(null!=t)for(var a in t)"default"!==a&&Object.prototype.hasOwnProperty.call(t,a)&&n(r,t,a);return o(r,t),r}function __importDefault(t){return t&&t.__esModule?t:{default:t}}function __classPrivateFieldGet(t,r,a,n){if("a"===a&&!n)throw TypeError("Private accessor was defined without a getter");if("function"==typeof r?t!==r||!n:!r.has(t))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===a?n:"a"===a?n.call(t):n?n.value:r.get(t)}function __classPrivateFieldSet(t,r,a,n,o){if("m"===n)throw TypeError("Private method is not writable");if("a"===n&&!o)throw TypeError("Private accessor was defined without a setter");if("function"==typeof r?t!==r||!o:!r.has(t))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?o.call(t,a):o?o.value=a:r.set(t,a),a}function __classPrivateFieldIn(t,r){if(null===r||"object"!=typeof r&&"function"!=typeof r)throw TypeError("Cannot use 'in' operator on non-object");return"function"==typeof t?r===t:t.has(r)}function __addDisposableResource(t,r,a){if(null!=r){var n;if("object"!=typeof r&&"function"!=typeof r)throw TypeError("Object expected.");if(a){if(!Symbol.asyncDispose)throw TypeError("Symbol.asyncDispose is not defined.");n=r[Symbol.asyncDispose]}if(void 0===n){if(!Symbol.dispose)throw TypeError("Symbol.dispose is not defined.");n=r[Symbol.dispose]}if("function"!=typeof n)throw TypeError("Object not disposable.");t.stack.push({value:r,dispose:n,async:a})}else a&&t.stack.push({async:!0});return r}var i="function"==typeof SuppressedError?SuppressedError:function(t,r,a){var n=Error(a);return n.name="SuppressedError",n.error=t,n.suppressed=r,n};function __disposeResources(t){function fail(r){t.error=t.hasError?new i(r,t.error,"An error was suppressed during disposal."):r,t.hasError=!0}return function next(){for(;t.stack.length;){var r=t.stack.pop();try{var a=r.dispose&&r.dispose.call(r.value);if(r.async)return Promise.resolve(a).then(next,function(t){return fail(t),next()})}catch(t){fail(t)}}if(t.hasError)throw t.error}()}let s={__extends,__assign,__rest,__decorate,__param,__metadata,__awaiter,__generator,__createBinding:n,__exportStar,__values,__read,__spread,__spreadArrays,__spreadArray,__await,__asyncGenerator,__asyncDelegator,__asyncValues,__makeTemplateObject,__importStar,__importDefault,__classPrivateFieldGet,__classPrivateFieldSet,__classPrivateFieldIn,__addDisposableResource,__disposeResources}}};